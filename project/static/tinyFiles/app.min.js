var app=angular.module("app",["ngRoute","ngSanitize","pageslide-directive"]).config(["$routeProvider",function(t){t.when("/",{controller:"HomeController",templateUrl:"static/views/home.html"}).when("/feed",{controller:"FeedController",templateUrl:"static/views/feed.html"}).when("/test",{controller:"SliderController",templateUrl:"static/views/test.html"}).otherwise({redirectTo:"/"})}]);app.factory("InstagramFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/instagram/feed"})};return{getInstaFeed:e}}]).filter("instaLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://instagram.com/explore/tags/$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://instagram.com/$2"'+r+">@$2</a>")}}]),app.factory("RedditFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/reddit/hot"})};return{getRedditFeed:e}}]),app.factory("SliderFactory",["$http","$q",function(t,e){var n=function(){return t({method:"GET",url:"/instagram/stats"})},o=function(){return t({method:"GET",url:"/soundcloud/stats"})},r=function(){return t({method:"GET",url:"/twitter/following"}).then(function(e){return t({method:"GET",url:"/twitter/followers"}).then(function(t){return{followers:t,following:e}})})["catch"](function(t){return t})},a=function(){return n().then(function(t){return void 0===t.data.counts?null:{followers:t.data.counts.followed_by,following:t.data.counts.follows}})},i=function(){return r().then(function(t){return void 0===t.followers.data.ids?null:{followers:t.followers.data.ids.length,following:t.following.data.ids.length}})},l=function(){return o().then(function(t){return void 0===t.data.followers_count?null:{followers:t.data.followers_count,following:t.data.followings_count}})},u=function(t){return e(function(t,e){var n={};a(n).then(function(e){n.instagram=e,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})["catch"](function(e){n.instagram=null,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})}).then(function(t){var e=[];for(var n in t)e.push({media:n,counts:t[n]});return console.log(e),e})};return{getSoundcloudStats:o,getIgStats:n,getTwitterStats:r,getFollowStats:u}}]),app.factory("SoundCloudFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/soundStream"})};return{getSongs:e}}]),app.factory("TwitterFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/tweetsfeed"})},n=function(e){return t({method:"POST",url:"/favtweet",data:{id:e}})},o=function(e){return t({method:"POST",url:"/retweet",data:{id:e}})},r=function(e){return t({method:"POST",url:"/posttweet",data:{tweet:e}})};return{getTweets:e,favTweet:n,reTweet:o,postTweet:r}}]).filter("tweetLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://twitter.com/search?q=%23$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://twitter.com/$2"'+r+">@$2</a>")}}]),app.factory("UsersFactory",["$location","$http",function(t,e){return{signup:function(t){return e({method:"POST",url:"/signup",data:t})},login:function(t){return console.log("factory"),e({method:"POST",url:"/login",data:t})},logout:function(t){return e({method:"POST",url:"/logout",data:t})}}}]),app.factory("PanelFactory",[function(){return{checked:!1}}]),app.factory("PostType",function(){return{twitter:!1,instagram:!1,soundcloud:!1,reddit:!1}}),app.controller("FeedController",["$scope","PanelFactory","RedditFactory","TwitterFactory","InstagramFactory","SoundCloudFactory","PostType","$location","$sce","$timeout","UsersFactory",function(t,e,n,o,r,a,i,l,u,c,s){t.feed=[],t.checked=e,t.postType=i,t.loader=!1,angular.element(document).ready(function(e){t.loader=!0});var d=function(t,e,n){var o,r,a,i=[];return angular.forEach(t,function(t){var l=!0;"reddit"===e?t.url.endsWith(".jpg")?a={image_url:t.url.substring(5,t.length),type:"reddit",title:t.title,raw_time:t.created_utc,created_at:new Date(1e3*t.created_utc),displayTime:moment(new Date(1e3*t.created_utc)).fromNow(),url:"http://reddit.com"+t.permalink}:l=!1:"twitter"===e?a={text:t.text,created_at:new Date(t.created_at),displayTime:moment(new Date(t.created_at)).fromNow(),type:e,user:{screen_name:t.user.screen_name},id_str:t.id_str}:("instagram"===e||"soundcloud"===e)&&(t.embed?(r=u.trustAsHtml(t.embed),o=n?new Date(1e3*t.time):new Date(t.time),a={frame:r,created_at:o,displayTime:moment(o).fromNow(),type:e}):l=!1),l?i.push(a):null}),i};t.isValidUser=function(){var t=sessionStorage.getItem("at");return t?!0:void l.path("home")},t.getTweets=function(){o.getTweets().then(function(e){if(Array.isArray(e.data)){var n=d(e.data,"twitter");t.feed.push.apply(t.feed,n)}})},t.favTweet=function(t){o.favTweet(t).then(function(t){console.log(t)})},t.reTweet=function(t){o.reTweet(t).then(function(t){console.log(t)})},t.postTweet=function(t){for(var e=t.split(""),n=0;n<e.length;n++)switch(e[n]){case" ":e[n]="%20";break;case"@":e[n]="%40";break;case"#":e[n]="%23";break;case"&":e[n]="%26";break;case":":e[n]="&3A";break;case"/":e[n]="%2F";break;default:e[n]=e[n]}t=e.join(""),o.postTweet(t).then(function(t){console.log(t)})},t.getInstaFeed=function(){r.getInstaFeed().then(function(e){var n=d(e.data.data,"instagram",!0);t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getInstaFeed()})},t.getSoundFeed=function(){a.getSongs().then(function(e){var n=d(e.data.data,"soundcloud");t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getSoundFeed()})},t.getRedditFeed=function(){localStorage.redditToggle&&n.getRedditFeed().then(function(e){if(Array.isArray(e.data)){var n=d(e.data,"reddit");t.feed.push.apply(t.feed,n)}})},t.toggle=function(e){var o=!1;if("reddit"===e&&n.redditToggle===!1&&(n.redditToggle=!0),angular.forEach(t.feed,function(t){t.type===e&&(o=!0)}),o===!0)i[e]=!i[e];else switch(e){case"twitter":window.location.href="/activate";break;case"instagram":window.location.href="/igAuth";break;case"soundcloud":window.location.href="/sound";break;case"reddit":localStorage.redditToggle=!0,t.getRedditFeed()}},t.refreshFeed=function(){window.history.go(0)},t.panelToggle=function(){e.checked=!e.checked},t.logout=function(){var t=sessionStorage.getItem("at");s.logout({at:t}).then(function(t){sessionStorage.clear(),l.path("home")})["catch"](function(t){console.log(t)})}}]),app.controller("HomeController",["$scope","UsersFactory","$location","$window",function(t,e,n,o){t.getHeight=function(){return o.innerHeight},t.$watch(t.getHeight,function(e,n){t.windowHeight=e}),t.verifier={errorz:""},t.logIn=function(o,r){var a={username:o,password:r};e.login(a).then(function(e){"Incorrect username or password."===e.data?(console.log("Incorrect username or password"),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):e.data.auth_token&&(console.log("User added.",e.data),sessionStorage.setItem("at",e.data.auth_token),n.path("feed"))})["catch"](function(t){throw t})},t.signUp=function(o,r){var a={username:o,password:r};e.signup(a).then(function(e){"User already exists."===e.data?(console.log("User already exists."),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):(console.log("User added.",e.data),sessionStorage.setItem("at",e.data.auth_token),n.path("feed"))})["catch"](function(t){throw t})}}]),app.controller("SliderController",["$scope","SliderFactory",function(t,e){t.stats={},e.getIgStats().then(function(e){t.stats.instagram={followers:e.data.counts.followed_by,following:e.data.counts.follows}}),e.getSoundcloudStats().then(function(e){t.stats.soundcloud={followers:e.data.followers_count,following:e.data.followings_count}}),e.getTwitterStats().then(function(e){t.stats.twitter={followers:e.followers.data.ids.length,following:e.following.data.ids.length}}),e.getFollowStats().then(function(e){t.stats=e})}]),app.filter("typeFilter",["PostType",function(t){return function(e){var n=[];return angular.forEach(e,function(e){t[e.type]===!1&&("instagram"===e.type&&window.instgrm.Embeds.process(),n.push(e))}),n}}]),app.directive("poseidon",["SliderFactory","$window","$timeout",function(t,e,n){return{restrict:"E",scope:{},link:function(e,n,o){var r=[],a=[],i=[],l=d3.select(n[0]).append("svg").style({width:"100%",height:"100%"}),u={soundcloud:["#FF5500",0],twitter:["#54aaec",0],instagram:["#325C86",0]};t.getFollowStats().then(function(t){var e=0,n=0;angular.forEach(t,function(t){u[t.media]&&u[t.media][1]++,t.counts&&(n+=t.counts.following,e+=t.counts.followers,r.push({type:t.media,followers:t.counts.followers}),a.push({type:t.media,following:t.counts.following}))}),i.push({type:"Total Followers",count:e}),i.push({type:"Total Following",count:n})}).then(function(){nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.followers}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie svg").datum(r).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.following}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie2 svg").datum(a).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.count}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie3 svg").datum(i).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t})});var c=l.selectAll("image").data([0]);c.enter().append("svg:image").attr("xlink:href","../static/views/ONE.png").attr("x","0").attr("y","0").attr("width","100%").attr("height","150"),e.render=function(t){l.selectAll("*").remove()}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkluc3RhZ3JhbUZhY3RvcnkuanMiLCJSZWRkaXRGYWN0b3J5LmpzIiwiU2xpZGVyRmFjdG9yeS5qcyIsIlNvdW5kQ2xvdWRGYWN0b3J5LmpzIiwiVHdpdHRlckZhY3RvcnkuanMiLCJVc2Vyc0ZhY3RvcnkuanMiLCJwYW5lbEZhY3RvcnkuanMiLCJwb3N0VHlwZUZhY3RvcnkuanMiLCJmZWVkQ29udHJvbGxlci5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwic2xpZGVyQ29udHJvbGxlci5qcyIsInR5cGVGaWx0ZXIuanMiLCJwb3NlaWRvbkRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkaHR0cCIsImdldEluc3RhRmVlZCIsIm1ldGhvZCIsInVybCIsImZpbHRlciIsIiRmaWx0ZXIiLCJ0ZXh0IiwidGFyZ2V0IiwicmVwbGFjZWRUZXh0IiwidGFyZ2V0QXR0ciIsImlzRGVmaW5lZCIsInJlcGxhY2VQYXR0ZXJuMSIsInJlcGxhY2UiLCJyZXBsYWNlUGF0dGVybjIiLCJnZXRSZWRkaXRGZWVkIiwiJHEiLCJnZXRJZ1N0YXRzIiwiZ2V0U291bmRjbG91ZFN0YXRzIiwiZ2V0VHdpdHRlclN0YXRzIiwidGhlbiIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsImVyciIsIl9pbnN0YWdyYW1Gb2xsb3ciLCJyIiwidW5kZWZpbmVkIiwiX3R3aXR0ZXJGb2xsb3ciLCJsZW5ndGgiLCJfc291bmRjbG91ZEZvbGxvdyIsImdldEZvbGxvd1N0YXRzIiwibWVkaWFPYmoiLCJyZXNvbHZlIiwicmVqZWN0IiwiYmFzZSIsImlnIiwic2MiLCJ0dyIsInR3aXR0ZXJFcnIiLCJzb3VuZGNsb3VkRXJyIiwiaWdFcnJvciIsIm9iaiIsImFyciIsImtleSIsInB1c2giLCJtZWRpYSIsImNvdW50cyIsImNvbnNvbGUiLCJsb2ciLCJnZXRTb25ncyIsImdldFR3ZWV0cyIsImZhdlR3ZWV0IiwiaWQiLCJkYXRhIiwicmVUd2VldCIsInBvc3RUd2VldCIsInR3ZWV0IiwiJGxvY2F0aW9uIiwic2lnbnVwIiwidXNlciIsImxvZ2luIiwibG9nb3V0IiwidG9rZW4iLCJjaGVja2VkIiwidHdpdHRlciIsImluc3RhZ3JhbSIsInNvdW5kY2xvdWQiLCJyZWRkaXQiLCIkc2NvcGUiLCJQYW5lbEZhY3RvcnkiLCJSZWRkaXRGYWN0b3J5IiwiVHdpdHRlckZhY3RvcnkiLCJJbnN0YWdyYW1GYWN0b3J5IiwiU291bmRDbG91ZEZhY3RvcnkiLCJQb3N0VHlwZSIsIiRzY2UiLCIkdGltZW91dCIsIlVzZXJzRmFjdG9yeSIsImZlZWQiLCJwb3N0VHlwZSIsImxvYWRlciIsImVsZW1lbnQiLCJkb2N1bWVudCIsInJlYWR5IiwiYXJnIiwiYnVpbGRGZWVkIiwidHlwZSIsImRhdGUiLCJ0aGVEYXRlIiwiaHRtbEZyYW1lIiwidGhlRmVlZCIsImZvckVhY2giLCJpdGVtIiwiYXBwZW5kIiwiZW5kc1dpdGgiLCJpbWFnZV91cmwiLCJzdWJzdHJpbmciLCJ0aXRsZSIsInJhd190aW1lIiwiY3JlYXRlZF91dGMiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsImRpc3BsYXlUaW1lIiwibW9tZW50IiwiZnJvbU5vdyIsInBlcm1hbGluayIsInNjcmVlbl9uYW1lIiwiaWRfc3RyIiwiZW1iZWQiLCJ0cnVzdEFzSHRtbCIsInRpbWUiLCJmcmFtZSIsImlzVmFsaWRVc2VyIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwicGF0aCIsIkFycmF5IiwiaXNBcnJheSIsIml0ZW1zIiwiYXBwbHkiLCJyZXNwb25zZSIsImFycmF5Iiwic3BsaXQiLCJpIiwiam9pbiIsImlzX21vcmVfZGF0YSIsImdldFNvdW5kRmVlZCIsImxvY2FsU3RvcmFnZSIsInJlZGRpdFRvZ2dsZSIsInRvZ2dsZSIsImJlZW5DYWxsZWQiLCJwb3N0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicmVmcmVzaEZlZWQiLCJoaXN0b3J5IiwiZ28iLCJwYW5lbFRvZ2dsZSIsImF1dGhUb2tlbiIsImF0IiwicmVzIiwiY2xlYXIiLCJlcnJvciIsIiR3aW5kb3ciLCJnZXRIZWlnaHQiLCJpbm5lckhlaWdodCIsIiR3YXRjaCIsImN1cnJlbnQiLCJwcmV2aW91cyIsIndpbmRvd0hlaWdodCIsInZlcmlmaWVyIiwiZXJyb3J6IiwibG9nSW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9naW5Gb3JtIiwiJHNldFByaXN0aW5lIiwiYXV0aF90b2tlbiIsInNldEl0ZW0iLCJzaWduVXAiLCJTbGlkZXJGYWN0b3J5Iiwic3RhdHMiLCJkIiwiaW5wdXQiLCJvdXRwdXQiLCJpbnN0Z3JtIiwiRW1iZWRzIiwicHJvY2VzcyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJsaW5rIiwiZWxlIiwiYXR0cnMiLCJkYXRhc2V0IiwiZGF0YXNldDIiLCJkYXRhc2V0MyIsInN2ZyIsImQzIiwic2VsZWN0Iiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9yT2JqIiwicmVzcCIsInRvdHNGb2xsb3dlcnMiLCJ0b3RzRm9sbG93aW5nIiwiY291bnQiLCJudiIsImFkZEdyYXBoIiwiY2hhcnQiLCJtb2RlbHMiLCJwaWVDaGFydCIsIngiLCJ5IiwiY29sb3IiLCJzaG93TGVnZW5kIiwic2hvd0xhYmVscyIsImxhYmVsVGhyZXNob2xkIiwibGFiZWxUeXBlIiwiZG9udXQiLCJkb251dFJhdGlvIiwiZGF0dW0iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJjYWxsIiwidmFsdWVGb3JtYXQiLCJmb3JtYXQiLCJjaGFydDIiLCJjaGFydDMiLCJpbWdzIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhdHRyIiwicmVuZGVyIiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUNBQyxPQUFBLE9BQ0EsVUFDQSxhQUNBLHdCQUVB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QUEsR0FBQTdFLE9BQ0E2RyxFQUFBLFNBQUFoQyxHQUFBLE1BQUFBLEdBQUE5SSxZQUNBK0ssTUFBQSxTQUFBakMsR0FBQSxNQUFBcUIsR0FBQXJCLEVBQUE3RSxNQUFBLEtBQ0ErRyxZQUFBLEdBQ0FDLFlBQUEsR0FDQUMsZUFBQSxLQUNBQyxVQUFBLFdBQ0FDLE9BQUEsR0FDQUMsV0FBQSxJQU9BLE9BTEF2QixJQUFBQyxPQUFBLGFBQ0F1QixNQUFBM0IsR0FDQTRCLGFBQUFDLFNBQUEsS0FDQUMsS0FBQUcsR0FDQUEsRUFBQUYsWUFBQTVCLEdBQUE2QixPQUFBLE1BQ0FDLElBRUFwQixHQUFBQyxTQUFBLFdBQ0EsR0FBQW9CLEdBQUFyQixHQUFBRyxPQUFBQyxXQUNBQyxFQUFBLFNBQUEvQixHQUFBLE1BQUFBLEdBQUE3RSxPQUNBNkcsRUFBQSxTQUFBaEMsR0FBQSxNQUFBQSxHQUFBeUIsUUFFQVMsWUFBQSxHQUNBQyxZQUFBLEdBQ0FDLGVBQUEsS0FDQUMsVUFBQSxXQUNBQyxPQUFBLEdBQ0FDLFdBQUEsSUFPQSxPQUxBdkIsSUFBQUMsT0FBQSxhQUNBdUIsTUFBQTFCLEdBQ0EyQixhQUFBQyxTQUFBLEtBQ0FDLEtBQUFJLEdBQ0FBLEVBQUFILFlBQUE1QixHQUFBNkIsT0FBQSxNQUNBRSxLQUlBLElBQUFDLEdBQUFqQyxFQUFBa0MsVUFBQSxTQUFBL0osTUFBQSxHQUNBOEosR0FBQUUsUUFDQXhILE9BQUEsYUFDQXlILEtBQUEsYUFBQSwyQkFDQUEsS0FBQSxJQUFBLEtBQ0FBLEtBQUEsSUFBQSxLQUNBQSxLQUFBLFFBQUEsUUFDQUEsS0FBQSxTQUFBLE9BRUEzQyxFQUFBNEMsT0FBQSxTQUFBbEssR0FDQTZILEVBQUFrQyxVQUFBLEtBQUFJIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhclxuICAubW9kdWxlKCdhcHAnLCBbXG4gICAgJ25nUm91dGUnLFxuICAgICduZ1Nhbml0aXplJyxcbiAgICAncGFnZXNsaWRlLWRpcmVjdGl2ZSdcbiAgXSlcbiAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcblxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAud2hlbiggJy8nLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAgICdzdGF0aWMvdmlld3MvaG9tZS5odG1sJyAgICAgIFxuICAgICAgfSlcblxuICAgICAgLndoZW4oJy9mZWVkJywgeyBcbiAgICAgICAgY29udHJvbGxlcjogJ0ZlZWRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvdmlld3MvZmVlZC5odG1sJ1xuICAgICAgfSlcblxuICAgICAgLndoZW4oJy90ZXN0Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnU2xpZGVyQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL3ZpZXdzL3Rlc3QuaHRtbCdcbiAgICAgIH0pXG5cbiAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgIH0pO1xuXG4gIH1dKTtcbiIsImFwcC5mYWN0b3J5KCdJbnN0YWdyYW1GYWN0b3J5JywgWyckaHR0cCcsIGZ1bmN0aW9uICggJGh0dHAgKSB7XG5cbiAgdmFyIGdldEluc3RhRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvaW5zdGFncmFtL2ZlZWQnXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbnN0YUZlZWQ6IGdldEluc3RhRmVlZFxuICB9O1xufV0pXG4gIC5maWx0ZXIoJ2luc3RhTGlua3knLFsnJGZpbHRlcicsIGZ1bmN0aW9uKCRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0KSB7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgICB2YXIgcmVwbGFjZWRUZXh0ID0gJGZpbHRlcignbGlua3knKSh0ZXh0LCB0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldEF0dHIgPSBcIlwiO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXRBdHRyID0gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIC8vIHJlcGxhY2UgI2hhc2h0YWdzIGFuZCBzZW5kIHRoZW0gdG8gdHdpdHRlclxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMSA9IC8oXnxcXHMpIyhcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjEsICckMTxhIGhyZWY9XCJodHRwczovL2luc3RhZ3JhbS5jb20vZXhwbG9yZS90YWdzLyQyXCInICsgdGFyZ2V0QXR0ciArICc+IyQyPC9hPicpO1xuICAgICAgLy8gcmVwbGFjZSBAbWVudGlvbnMgYnV0IGtlZXAgdGhlbSB0byBvdXIgc2l0ZVxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMiA9IC8oXnxcXHMpXFxAKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4yLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly9pbnN0YWdyYW0uY29tLyQyXCInICsgdGFyZ2V0QXR0ciArICc+QCQyPC9hPicpO1xuICAgICAgcmV0dXJuIHJlcGxhY2VkVGV4dDtcbiAgICB9O1xuICB9XG5dKTtcbiAgIiwiYXBwLmZhY3RvcnkoJ1JlZGRpdEZhY3RvcnknLCBbJyRodHRwJywgZnVuY3Rpb24gKCAkaHR0cCApIHtcblxuICB2YXIgZ2V0UmVkZGl0RmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvcmVkZGl0L2hvdCdcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFJlZGRpdEZlZWQ6IGdldFJlZGRpdEZlZWRcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnU2xpZGVyRmFjdG9yeScsIFsnJGh0dHAnLCckcScsIGZ1bmN0aW9uICggJGh0dHAsICRxICkge1xuXG4gIHZhciBnZXRJZ1N0YXRzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgIHVybCA6ICcvaW5zdGFncmFtL3N0YXRzJ1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRTb3VuZGNsb3VkU3RhdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy9zb3VuZGNsb3VkL3N0YXRzJ1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRUd2l0dGVyU3RhdHMgPSBmdW5jdGlvbiAoKSB7IFxuICAgIC8vdWdseSB3aWxsIHJlZmFjdG9yIGJ1dCBub3Qgbm93IDooXG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy90d2l0dGVyL2ZvbGxvd2luZydcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uKGZvbGxvd2luZyl7XG4gICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgICAgIHVybDogJy90d2l0dGVyL2ZvbGxvd2VycydcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihmb2xsb3dlcnMpe1xuICAgICAgICAgIHJldHVybiB7Zm9sbG93ZXJzOmZvbGxvd2VycywgZm9sbG93aW5nOmZvbGxvd2luZ31cbiAgICAgICAgfSlcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgcmV0dXJuIGVycjtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX2luc3RhZ3JhbUZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0SWdTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2RhdGEnXVsnY291bnRzJ109PT11bmRlZmluZWQpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93ZWRfYnknXSxcbiAgICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dzJ11cbiAgICAgIH07XG5cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX3R3aXR0ZXJGb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFR3aXR0ZXJTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2ZvbGxvd2VycyddWydkYXRhJ11bJ2lkcyddPT09dW5kZWZpbmVkKXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAnZm9sbG93ZXJzJyA6IHJbJ2ZvbGxvd2VycyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aCxcbiAgICAgICAgJ2ZvbGxvd2luZycgOiByWydmb2xsb3dpbmcnXVsnZGF0YSddWydpZHMnXS5sZW5ndGhcbiAgICAgIH07IFxuICAgICAgXG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIF9zb3VuZGNsb3VkRm9sbG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRTb3VuZGNsb3VkU3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICBpZihyWydkYXRhJ11bJ2ZvbGxvd2Vyc19jb3VudCddPT09dW5kZWZpbmVkKXtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydmb2xsb3dlcnNfY291bnQnXSxcbiAgICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2ZvbGxvd2luZ3NfY291bnQnXVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRGb2xsb3dTdGF0cyA9IGZ1bmN0aW9uIChtZWRpYU9iaikge1xuLy9Tb3JyeSEhIHNvIGJhZC4gUHJvbWlzZSB0cmVlLiBsb3ZlIHlvdSFcbiAgICByZXR1cm4gJHEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGJhc2UgPSB7fTtcbiAgICAgIF9pbnN0YWdyYW1Gb2xsb3coYmFzZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oaWcpe1xuICAgICAgICAgICAgYmFzZVsnaW5zdGFncmFtJ10gPSBpZztcbiAgICAgICAgICBfc291bmRjbG91ZEZvbGxvdyhiYXNlKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oc2Mpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBzYztcbiAgICAgICAgICAgICAgX3R3aXR0ZXJGb2xsb3coYmFzZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih0dyl7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSB0dztcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odHdpdHRlckVycil7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihzb3VuZGNsb3VkRXJyKXtcbiAgICAgICAgICAgICAgYmFzZVsnc291bmRjbG91ZCddID0gbnVsbDtcbiAgICAgICAgICAgICAgX3R3aXR0ZXJGb2xsb3coKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR3KXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IHR3O1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0d2l0dGVyRXJyKXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24oaWdFcnJvcil7XG4gICAgICAgICAgYmFzZVsnaW5zdGFncmFtJ10gPSBudWxsO1xuICAgICAgICAgIF9zb3VuZGNsb3VkRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzYyl7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IHNjO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdyhiYXNlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR3KXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IHR3O1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0d2l0dGVyRXJyKXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHNvdW5kY2xvdWRFcnIpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBudWxsO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHZhciBhcnIgPSBbXVxuICAgICAgZm9yKHZhciBrZXkgaW4gb2JqKXtcbiAgICAgICAgYXJyLnB1c2goe21lZGlhOmtleSwgY291bnRzOiBvYmpba2V5XX0pXG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhhcnIpO1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFNvdW5kY2xvdWRTdGF0cyA6IGdldFNvdW5kY2xvdWRTdGF0cyxcbiAgICBnZXRJZ1N0YXRzIDogZ2V0SWdTdGF0cyxcbiAgICBnZXRUd2l0dGVyU3RhdHMgOiBnZXRUd2l0dGVyU3RhdHMsXG4gICAgZ2V0Rm9sbG93U3RhdHMgOiBnZXRGb2xsb3dTdGF0c1xuICB9O1xuXG59XSk7XG4iLCJhcHAuZmFjdG9yeSgnU291bmRDbG91ZEZhY3RvcnknLCBbJyRodHRwJywgZnVuY3Rpb24gICgkaHR0cCkge1xuICB2YXIgZ2V0U29uZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy9zb3VuZFN0cmVhbSdcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFNvbmdzOiBnZXRTb25nc1xuICB9O1xufV0pOyIsImFwcC5mYWN0b3J5KCdUd2l0dGVyRmFjdG9yeScsWyckaHR0cCcsIGZ1bmN0aW9uICggJGh0dHAgKSB7XG5cbiAgdmFyIGdldFR3ZWV0cyA9IGZ1bmN0aW9uICggKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvdHdlZXRzZmVlZCdcbiAgICB9KTtcbiAgfTtcbiBcbiAgdmFyIGZhdlR3ZWV0ID0gZnVuY3Rpb24gKCBpZCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6ICcvZmF2dHdlZXQnLFxuICAgICAgZGF0YTogeyBpZDogaWQgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZVR3ZWV0ID0gZnVuY3Rpb24gKCBpZCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6ICcvcmV0d2VldCcsXG4gICAgICBkYXRhOiB7IGlkOiBpZCB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHBvc3RUd2VldCA9IGZ1bmN0aW9uICggdHdlZXQgKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgdXJsOiAnL3Bvc3R0d2VldCcsXG4gICAgICBkYXRhOiB7IHR3ZWV0OiB0d2VldH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFR3ZWV0czogZ2V0VHdlZXRzLFxuICAgIGZhdlR3ZWV0OiBmYXZUd2VldCxcbiAgICByZVR3ZWV0OiByZVR3ZWV0LFxuICAgIHBvc3RUd2VldDogcG9zdFR3ZWV0XG4gIH07XG5cbn1dKVxuICAuZmlsdGVyKCd0d2VldExpbmt5JyxbJyRmaWx0ZXInLCBmdW5jdGlvbigkZmlsdGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQsIHRhcmdldCkge1xuICAgICAgaWYgKCF0ZXh0KSByZXR1cm4gdGV4dDtcblxuICAgICAgdmFyIHJlcGxhY2VkVGV4dCA9ICRmaWx0ZXIoJ2xpbmt5JykodGV4dCwgdGFyZ2V0KTtcbiAgICAgIHZhciB0YXJnZXRBdHRyID0gXCJcIjtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGFyZ2V0QXR0ciA9ICcgdGFyZ2V0PVwiJyArIHRhcmdldCArICdcIic7XG4gICAgICB9XG4gICAgICAvLyByZXBsYWNlICNoYXNodGFncyBhbmQgc2VuZCB0aGVtIHRvIHR3aXR0ZXJcbiAgICAgIHZhciByZXBsYWNlUGF0dGVybjEgPSAvKF58XFxzKSMoXFx3KlthLXpBLVpfXStcXHcqKS9naW07XG4gICAgICByZXBsYWNlZFRleHQgPSB0ZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4xLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9zZWFyY2g/cT0lMjMkMlwiJyArIHRhcmdldEF0dHIgKyAnPiMkMjwvYT4nKTtcbiAgICAgIC8vIHJlcGxhY2UgQG1lbnRpb25zIGJ1dCBrZWVwIHRoZW0gdG8gb3VyIHNpdGVcbiAgICAgIHZhciByZXBsYWNlUGF0dGVybjIgPSAvKF58XFxzKVxcQChcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHJlcGxhY2VkVGV4dC5yZXBsYWNlKHJlcGxhY2VQYXR0ZXJuMiwgJyQxPGEgaHJlZj1cImh0dHBzOi8vdHdpdHRlci5jb20vJDJcIicgKyB0YXJnZXRBdHRyICsgJz5AJDI8L2E+Jyk7XG4gICAgICByZXR1cm4gcmVwbGFjZWRUZXh0O1xuICAgIH07XG4gIH1cbl0pOyIsImFwcC5mYWN0b3J5KCdVc2Vyc0ZhY3RvcnknLCBbJyRsb2NhdGlvbicsICckaHR0cCcsICBcbiAgZnVuY3Rpb24oJGxvY2F0aW9uLCAkaHR0cCkge1xuICAgIHJldHVybiB7XG5cbiAgICAgIHNpZ251cDogZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnL3NpZ251cCcsXG4gICAgICAgICAgZGF0YTogdXNlclxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGxvZ2luOiBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgY29uc29sZS5sb2coJ2ZhY3RvcnknKTtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgIGRhdGE6IHVzZXJcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBsb2dvdXQ6IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnL2xvZ291dCcsXG4gICAgICAgICAgZGF0YTogdG9rZW5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsImFwcC5mYWN0b3J5KCdQYW5lbEZhY3RvcnknLFtmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICdjaGVja2VkJzogZmFsc2VcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnUG9zdFR5cGUnLCBmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICd0d2l0dGVyJzogZmFsc2UsXG4gICAgJ2luc3RhZ3JhbSc6IGZhbHNlLFxuICAgICdzb3VuZGNsb3VkJzogZmFsc2UsXG4gICAgJ3JlZGRpdCc6ZmFsc2VcbiAgfTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdGZWVkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1BhbmVsRmFjdG9yeScsICdSZWRkaXRGYWN0b3J5JywnVHdpdHRlckZhY3RvcnknLCAnSW5zdGFncmFtRmFjdG9yeScsICdTb3VuZENsb3VkRmFjdG9yeScsICdQb3N0VHlwZScsICckbG9jYXRpb24nLCAnJHNjZScsICckdGltZW91dCcsICdVc2Vyc0ZhY3RvcnknLCBcbiAgZnVuY3Rpb24gKCAkc2NvcGUsIFBhbmVsRmFjdG9yeSwgUmVkZGl0RmFjdG9yeSwgVHdpdHRlckZhY3RvcnksIEluc3RhZ3JhbUZhY3RvcnksIFNvdW5kQ2xvdWRGYWN0b3J5LCBQb3N0VHlwZSwgJGxvY2F0aW9uLCAkc2NlLCAkdGltZW91dCwgVXNlcnNGYWN0b3J5ICkge1xuXG4gICRzY29wZS5mZWVkID0gW107XG5cbiAgJHNjb3BlLmNoZWNrZWQgPSBQYW5lbEZhY3Rvcnk7ICAgLy8gVGhpcyB3aWxsIGJlIGJpbmRlZCB1c2luZyB0aGUgcHMtb3BlbiBhdHRyaWJ1dGVcblxuICAkc2NvcGUucG9zdFR5cGUgPSBQb3N0VHlwZTtcblxuICAkc2NvcGUubG9hZGVyID0gZmFsc2U7XG5cbiAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoYXJnKSB7XG4gICAgJHNjb3BlLmxvYWRlciA9IHRydWU7XG4gIH0pO1xuXG4gIHZhciBidWlsZEZlZWQgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZGF0ZSkgeyBcbiAgICB2YXIgdGhlRmVlZCAgPSBbXSwgXG4gICAgICAgdGhlRGF0ZSwgaHRtbEZyYW1lLCBvYmo7XG4gICAgYW5ndWxhci5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgYXBwZW5kID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlID09PSAncmVkZGl0Jykge1xuICAgICAgICBpZihpdGVtLnVybC5lbmRzV2l0aCgnLmpwZycpKXtcbiAgICAgICAgICBvYmogPSB7XG4gICAgICAgICAgICBpbWFnZV91cmwgOiBpdGVtLnVybC5zdWJzdHJpbmcoNSxpdGVtLmxlbmd0aCksXG4gICAgICAgICAgICB0eXBlOiAncmVkZGl0JyxcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLFxuICAgICAgICAgICAgcmF3X3RpbWU6IGl0ZW0uY3JlYXRlZF91dGMsXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfdXRjICogMTAwMCksXG4gICAgICAgICAgICBkaXNwbGF5VGltZTogbW9tZW50KG5ldyBEYXRlKGl0ZW0uY3JlYXRlZF91dGMqMTAwMCkpLmZyb21Ob3coKSxcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9yZWRkaXQuY29tJysgaXRlbS5wZXJtYWxpbmtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgYXBwZW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3R3aXR0ZXInKSB7XG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgIHRleHQgOiBpdGVtLnRleHQsIFxuICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KSxcbiAgICAgICAgIGRpc3BsYXlUaW1lOiBtb21lbnQobmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KSkuZnJvbU5vdygpLCBcbiAgICAgICAgIHR5cGU6IHR5cGUsIFxuICAgICAgICAgdXNlcjoge3NjcmVlbl9uYW1lIDogaXRlbS51c2VyLnNjcmVlbl9uYW1lfSwgXG4gICAgICAgICBpZF9zdHI6IGl0ZW0uaWRfc3RyIFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmKHR5cGUgPT09ICdpbnN0YWdyYW0nIHx8IHR5cGUgPT09ICdzb3VuZGNsb3VkJyl7XG4gICAgICAgIGlmKGl0ZW0uZW1iZWQpe1xuICAgICAgICAgIGh0bWxGcmFtZSA9ICRzY2UudHJ1c3RBc0h0bWwoaXRlbS5lbWJlZCk7XG4gICAgICAgICAgdGhlRGF0ZSA9IGRhdGUgPyBuZXcgRGF0ZShpdGVtLnRpbWUgKiAxMDAwKSA6IG5ldyBEYXRlKGl0ZW0udGltZSk7XG4gICAgICAgICAgb2JqID0ge1xuICAgICAgICAgICBmcmFtZTogaHRtbEZyYW1lLCBcbiAgICAgICAgICAgY3JlYXRlZF9hdDogdGhlRGF0ZSxcbiAgICAgICAgICAgZGlzcGxheVRpbWU6IG1vbWVudCh0aGVEYXRlKS5mcm9tTm93KCksIFxuICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgfTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgYXBwZW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gXG4gICAgICBhcHBlbmQgPyB0aGVGZWVkLnB1c2gob2JqKSA6IG51bGw7XG4gICAgIFxuICAgIH0pO1xuICAgIHJldHVybiB0aGVGZWVkO1xuICB9O1xuXG4gICRzY29wZS5pc1ZhbGlkVXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnaG9tZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ICAgIFxuICB9O1xuXG4gICRzY29wZS5nZXRUd2VldHMgPSBmdW5jdGlvbiAoICkge1xuICAgIFR3aXR0ZXJGYWN0b3J5LmdldFR3ZWV0cygpLnRoZW4oZnVuY3Rpb24gKCBkYXRhICkge1xuICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgdmFyIGl0ZW1zID0gYnVpbGRGZWVkKGRhdGEuZGF0YSwgJ3R3aXR0ZXInKTtcbiAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5mYXZUd2VldCA9IGZ1bmN0aW9uICggaWQgKSB7XG4gICAgVHdpdHRlckZhY3RvcnkuZmF2VHdlZXQoaWQpLnRoZW4oZnVuY3Rpb24gKCByZXNwb25zZSApIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUucmVUd2VldCA9IGZ1bmN0aW9uICggaWQgKSB7XG4gICAgVHdpdHRlckZhY3RvcnkucmVUd2VldChpZCkudGhlbihmdW5jdGlvbiAoIHJlc3BvbnNlICkge1xuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5wb3N0VHdlZXQgPSBmdW5jdGlvbiAoIHR3ZWV0ICkge1xuICAgIHZhciBhcnJheSA9IHR3ZWV0LnNwbGl0KFwiXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaChhcnJheVtpXSkge1xuICAgICAgICBjYXNlICcgJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclNDAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcjJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjMnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICc6JzpcbiAgICAgICAgICBhcnJheVtpXSA9ICcmM0EnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMkYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFycmF5W2ldID0gYXJyYXlbaV07XG4gICAgICB9XG4gICAgICAvLyBzcGFjZSBhcyAlMjBcbiAgICAgIC8vIEAgYXMgJTQwXG4gICAgICAvLyAjIGFzICUyM1xuICAgICAgLy8gJiBhcyAlMjZcbiAgICAgIC8vIGNvbG9uIGFzICUzQVxuICAgICAgLy8gZm9yd2FyZCBzbGFzaCBhcyAlMkZcbiAgICB9XG4gICAgdHdlZXQgPSBhcnJheS5qb2luKFwiXCIpO1xuICAgIFR3aXR0ZXJGYWN0b3J5LnBvc3RUd2VldCggdHdlZXQgKS50aGVuKGZ1bmN0aW9uICggcmVzcG9uc2UgKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmdldEluc3RhRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgSW5zdGFncmFtRmFjdG9yeS5nZXRJbnN0YUZlZWQoKS50aGVuKGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgIHZhciBpdGVtcyA9IGJ1aWxkRmVlZChkYXRhLmRhdGEuZGF0YSwgJ2luc3RhZ3JhbScsIHRydWUpO1xuICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgaWYoZGF0YS5kYXRhLmlzX21vcmVfZGF0YSkge1xuICAgICAgICAkc2NvcGUuZ2V0SW5zdGFGZWVkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmdldFNvdW5kRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgU291bmRDbG91ZEZhY3RvcnkuZ2V0U29uZ3MoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLmRhdGEsICdzb3VuZGNsb3VkJyk7XG4gICAgICAkc2NvcGUuZmVlZC5wdXNoLmFwcGx5KCRzY29wZS5mZWVkLCBpdGVtcyk7XG4gICAgICBpZihkYXRhLmRhdGEuaXNfbW9yZV9kYXRhKSB7XG4gICAgICAgICRzY29wZS5nZXRTb3VuZEZlZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgXG4gICRzY29wZS5nZXRSZWRkaXRGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICBpZihsb2NhbFN0b3JhZ2UucmVkZGl0VG9nZ2xlKXtcbiAgICAgIFJlZGRpdEZhY3RvcnkuZ2V0UmVkZGl0RmVlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLCAncmVkZGl0Jyk7XG4gICAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLnRvZ2dsZSA9IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgIHZhciBiZWVuQ2FsbGVkID0gZmFsc2U7XG5cbiAgICBpZih0eXBlID09PSAncmVkZGl0JyAmJiBSZWRkaXRGYWN0b3J5LnJlZGRpdFRvZ2dsZSA9PT0gZmFsc2Upe1xuICAgICAgUmVkZGl0RmFjdG9yeS5yZWRkaXRUb2dnbGUgPSB0cnVlO1xuICAgIH1cbiAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmZlZWQsIGZ1bmN0aW9uICggcG9zdCApIHtcbiAgICAgIGlmKHBvc3QudHlwZSA9PT0gdHlwZSkge1xuICAgICAgICBiZWVuQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChiZWVuQ2FsbGVkID09PSB0cnVlKSB7ICBcbiAgICAgIFBvc3RUeXBlW3R5cGVdID0gIVBvc3RUeXBlW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2godHlwZSkge1xuICAgICAgICBjYXNlICd0d2l0dGVyJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWN0aXZhdGUnO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2luc3RhZ3JhbSc6XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2lnQXV0aCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NvdW5kY2xvdWQnOlxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9zb3VuZCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlZGRpdCc6XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlZGRpdFRvZ2dsZSA9IHRydWU7XG4gICAgICAgICAgJHNjb3BlLmdldFJlZGRpdEZlZWQoKTtcbiAgICAgICAgICBicmVhazsgICAgICAgIFxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAkc2NvcGUucmVmcmVzaEZlZWQgPSBmdW5jdGlvbiAoICkge1xuICAgIHdpbmRvdy5oaXN0b3J5LmdvKDApO1xuICB9O1xuXG4gICRzY29wZS5wYW5lbFRvZ2dsZSA9IGZ1bmN0aW9uKCl7XG4gICAgUGFuZWxGYWN0b3J5LmNoZWNrZWQgPSAhUGFuZWxGYWN0b3J5LmNoZWNrZWQ7XG4gIH07XG5cbiAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhdXRoVG9rZW4gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhdCcpO1xuICAgIFVzZXJzRmFjdG9yeS5sb2dvdXQoe1wiYXRcIjogYXV0aFRva2VufSlcbiAgICAudGhlbihmdW5jdGlvbiAoIHJlcyApIHtcbiAgICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnaG9tZScpO1xuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uICggZXJyb3IgKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG4gIH07XG4gfV0pO1xuICBcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1VzZXJzRmFjdG9yeScsICckbG9jYXRpb24nLCAnJHdpbmRvdycsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJzRmFjdG9yeSwgJGxvY2F0aW9uLCAkd2luZG93KSB7XG5cbiAgJHNjb3BlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkd2luZG93LmlubmVySGVpZ2h0O1xuICB9O1xuXG4gICRzY29wZS4kd2F0Y2goJHNjb3BlLmdldEhlaWdodCwgZnVuY3Rpb24oY3VycmVudCwgcHJldmlvdXMpIHtcbiAgICAkc2NvcGUud2luZG93SGVpZ2h0ID0gY3VycmVudDtcbiAgfSk7XG5cbiAgJHNjb3BlLnZlcmlmaWVyID17XG4gICAgZXJyb3J6IDogJydcbiAgfTtcblxuICAkc2NvcGUubG9nSW4gPSBmdW5jdGlvbiggdXNlcm5hbWUsIHBhc3N3b3JkICkge1xuICAgIHZhciB1c2VyID0geyd1c2VybmFtZSc6IHVzZXJuYW1lLCAncGFzc3dvcmQnOiBwYXNzd29yZH07XG4gICAgVXNlcnNGYWN0b3J5LmxvZ2luKHVzZXIpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZihyZXMuZGF0YSA9PT0gJ0luY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZC4nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQnKTtcbiAgICAgICAgJHNjb3BlLnZlcmlmaWVyLmVycm9yeiA9IFwiSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkIVwiO1xuICAgICAgICAkc2NvcGUubG9naW5Gb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5hdXRoX3Rva2VuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGFkZGVkLicsIHJlcy5kYXRhKTtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYXQnLCByZXMuZGF0YS5hdXRoX3Rva2VuKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJ2ZlZWQnKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHRocm93KGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnNpZ25VcCA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKSB7XG4gICAgdmFyIHVzZXIgPSB7J3VzZXJuYW1lJzogdXNlcm5hbWUsICdwYXNzd29yZCc6IHBhc3N3b3JkfTtcbiAgICBVc2Vyc0ZhY3Rvcnkuc2lnbnVwKHVzZXIpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZihyZXMuZGF0YSA9PT0gJ1VzZXIgYWxyZWFkeSBleGlzdHMuJykge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICAgICAgJHNjb3BlLnZlcmlmaWVyLmVycm9yeiA9IFwiSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkIVwiO1xuICAgICAgICAkc2NvcGUubG9naW5Gb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgYWRkZWQuJywgcmVzLmRhdGEpO1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdhdCcsIHJlcy5kYXRhLmF1dGhfdG9rZW4pO1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnZmVlZCcpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgdGhyb3coZXJyKTtcbiAgICB9KTtcbiAgfTtcblxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ1NsaWRlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1NsaWRlckZhY3RvcnknLCBmdW5jdGlvbiAoJHNjb3BlLCBTbGlkZXJGYWN0b3J5KSB7XG4gICRzY29wZS5zdGF0cyA9IHt9XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRJZ1N0YXRzKCkudGhlbihmdW5jdGlvbihyKXsgXG4gICAgJHNjb3BlLnN0YXRzWydpbnN0YWdyYW0nXSA9IHtcbiAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93ZWRfYnknXSxcbiAgICAgICdmb2xsb3dpbmcnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93cyddXG4gICAgfTtcbiAgfSk7XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRTb3VuZGNsb3VkU3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpeyBcbiAgICAkc2NvcGUuc3RhdHNbJ3NvdW5kY2xvdWQnXSA9IHtcbiAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydmb2xsb3dlcnNfY291bnQnXSxcbiAgICAgICdmb2xsb3dpbmcnIDogclsnZGF0YSddWydmb2xsb3dpbmdzX2NvdW50J11cbiAgICB9O1xuICB9KTtcblxuICBTbGlkZXJGYWN0b3J5LmdldFR3aXR0ZXJTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7IFxuICAgICRzY29wZS5zdGF0c1sndHdpdHRlciddID0ge1xuICAgICAgJ2ZvbGxvd2VycycgOiByWydmb2xsb3dlcnMnXVsnZGF0YSddWydpZHMnXS5sZW5ndGgsXG4gICAgICAnZm9sbG93aW5nJyA6IHJbJ2ZvbGxvd2luZyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aFxuICAgIH07XG4gIH0pO1xuXG4gIFNsaWRlckZhY3RvcnkuZ2V0Rm9sbG93U3RhdHMoKVxuICAgIC50aGVuKGZ1bmN0aW9uIChkKSB7ICRzY29wZS5zdGF0cz1kOyB9KTtcbn1dKTsiLCJhcHAuZmlsdGVyKCd0eXBlRmlsdGVyJywgWydQb3N0VHlwZScsIGZ1bmN0aW9uIChQb3N0VHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCBpbnB1dCApIHtcbiAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgYW5ndWxhci5mb3JFYWNoKGlucHV0LCBmdW5jdGlvbiAoIHBvc3QgKSB7XG4gICAgICBpZiAoIFBvc3RUeXBlW3Bvc3QudHlwZV0gPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChwb3N0LnR5cGUgPT09ICdpbnN0YWdyYW0nKSB7XG4gICAgICAgICAgd2luZG93Lmluc3Rncm0uRW1iZWRzLnByb2Nlc3MoKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQucHVzaChwb3N0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xufV0pOyIsImFwcC5kaXJlY3RpdmUoJ3Bvc2VpZG9uJywgWydTbGlkZXJGYWN0b3J5JywnJHdpbmRvdycsICckdGltZW91dCcsXG4gIGZ1bmN0aW9uIChTbGlkZXJGYWN0b3J5LCAkd2luZG93LCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgIH0sXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlLCBhdHRycykge1xuICAgICAgICB2YXIgZGF0YXNldCA9IFtdO1xuICAgICAgICB2YXIgZGF0YXNldDIgPSBbXTtcbiAgICAgICAgdmFyIGRhdGFzZXQzID0gW107XG4gICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoZWxlWzBdKVxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgLnN0eWxlKHsnd2lkdGgnOiAnMTAwJScsICdoZWlnaHQnOiAnMTAwJSd9KTtcbiAgICAgICAgdmFyIGNvbG9yT2JqID0ge1xuICAgICAgICAgICdzb3VuZGNsb3VkJzogWycjRkY1NTAwJywgMF0sXG4gICAgICAgICAgJ3R3aXR0ZXInOiBbJyM1NGFhZWMnLCAwXSxcbiAgICAgICAgICAnaW5zdGFncmFtJzogWycjMzI1Qzg2JywgMF1cbiAgICAgICAgfTtcbiAgICAgICAgU2xpZGVyRmFjdG9yeS5nZXRGb2xsb3dTdGF0cygpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICB2YXIgdG90c0ZvbGxvd2VycyA9IDA7IFxuICAgICAgICAgICAgdmFyIHRvdHNGb2xsb3dpbmcgPSAwO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3AsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgIGlmIChjb2xvck9ialtpLm1lZGlhXSkgeyBjb2xvck9ialtpLm1lZGlhXVsxXSsrOyB9XG4gICAgICAgICAgICAgIGlmIChpLmNvdW50cykge1xuICAgICAgICAgICAgICAgIHRvdHNGb2xsb3dpbmcgKz0gaS5jb3VudHMuZm9sbG93aW5nO1xuICAgICAgICAgICAgICAgIHRvdHNGb2xsb3dlcnMgKz0gaS5jb3VudHMuZm9sbG93ZXJzO1xuICAgICAgICAgICAgICAgIGRhdGFzZXQucHVzaCh7IHR5cGU6IGkubWVkaWEsIGZvbGxvd2VycyA6IGkuY291bnRzLmZvbGxvd2VycyB9KTtcbiAgICAgICAgICAgICAgICBkYXRhc2V0Mi5wdXNoKHsgdHlwZTogaS5tZWRpYSwgZm9sbG93aW5nIDogaS5jb3VudHMuZm9sbG93aW5nIH0pO1xuICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkYXRhc2V0My5wdXNoKHt0eXBlOiAnVG90YWwgRm9sbG93ZXJzJywgY291bnQgOiB0b3RzRm9sbG93ZXJzfSk7XG4gICAgICAgICAgICBkYXRhc2V0My5wdXNoKHt0eXBlOiAnVG90YWwgRm9sbG93aW5nJywgY291bnQgOiB0b3RzRm9sbG93aW5nfSk7ICAgICAgICAgXG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG52LmFkZEdyYXBoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIGNoYXJ0ID0gbnYubW9kZWxzLnBpZUNoYXJ0KClcbiAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZTsgfSlcbiAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZm9sbG93ZXJzOyB9KVxuICAgICAgICAgICAgICAgICAgLmNvbG9yKGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAgLnNob3dMZWdlbmQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5zaG93TGFiZWxzKGZhbHNlKSAgICAgLy9EaXNwbGF5IHBpZSBsYWJlbHNcbiAgICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgLy9Db25maWd1cmUgdGhlIG1pbmltdW0gc2xpY2Ugc2l6ZSBmb3IgbGFiZWxzIHRvIHNob3cgdXBcbiAgICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIC8vQ29uZmlndXJlIHdoYXQgdHlwZSBvZiBkYXRhIHRvIHNob3cgaW4gdGhlIGxhYmVsLiBDYW4gYmUgXCJrZXlcIiwgXCJ2YWx1ZVwiIG9yIFwicGVyY2VudFwiXG4gICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgLy9UdXJuIG9uIERvbnV0IG1vZGUuIE1ha2VzIHBpZSBjaGFydCBsb29rIHRhc3R5IVxuICAgICAgICAgICAgICAgICAgLmRvbnV0UmF0aW8oMC4zNSk7ICAgICAvL0NvbmZpZ3VyZSBob3cgYmlnIHlvdSB3YW50IHRoZSBkb251dCBob2xlIHNpemUgdG8gYmUuXG5cbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjcGllIHN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YXNldClcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigzNTApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjaGFydC52YWx1ZUZvcm1hdChkMy5mb3JtYXQoJ2QnKSk7XG4gICAgICAgICAgICAgIHJldHVybiBjaGFydDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbnYuYWRkR3JhcGgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBjaGFydDIgPSBudi5tb2RlbHMucGllQ2hhcnQoKVxuICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGU7IH0pXG4gICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZm9sbG93aW5nOyB9KVxuICAgICAgICAgICAgICAgICAuY29sb3IoZnVuY3Rpb24oZCl7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAuc2hvd0xlZ2VuZCh0cnVlKVxuICAgICAgICAgICAgICAgICAuc2hvd0xhYmVscyhmYWxzZSkgICAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIFxuICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIC5kb251dFJhdGlvKDAuMzUpOyAgICBcblxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3BpZTIgc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgLmRhdHVtKGRhdGFzZXQyKVxuICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzUwKVxuICAgICAgICAgICAgICAgICAgIC5jYWxsKGNoYXJ0Mik7XG4gICAgICAgICAgICAgIGNoYXJ0Mi52YWx1ZUZvcm1hdChkMy5mb3JtYXQoJ2QnKSk7XG4gICAgICAgICAgICAgIHJldHVybiBjaGFydDI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG52LmFkZEdyYXBoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgY2hhcnQzID0gbnYubW9kZWxzLnBpZUNoYXJ0KClcbiAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlOyB9KVxuICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvdW50OyB9KVxuICAgICAgICAgICAgICAgICAvLyAuY29sb3IoZnVuY3Rpb24oZCl7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAuc2hvd0xlZ2VuZCh0cnVlKVxuICAgICAgICAgICAgICAgICAuc2hvd0xhYmVscyhmYWxzZSkgICAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIFxuICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIC5kb251dFJhdGlvKDAuMzUpOyAgICBcblxuICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjcGllMyBzdmdcIilcbiAgICAgICAgICAgICAgICAgLmRhdHVtKGRhdGFzZXQzKVxuICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDM1MClcbiAgICAgICAgICAgICAgICAgLmNhbGwoY2hhcnQzKTtcbiAgICAgICAgICAgICAgY2hhcnQzLnZhbHVlRm9ybWF0KGQzLmZvcm1hdCgnZCcpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0MztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBpbWdzID0gc3ZnLnNlbGVjdEFsbChcImltYWdlXCIpLmRhdGEoWzBdKTtcbiAgICAgICAgICAgICAgICBpbWdzLmVudGVyKClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmltYWdlXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4bGluazpocmVmXCIsIFwiLi4vc3RhdGljL3ZpZXdzL09ORS5wbmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgXCIwXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIFwiMFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgJzEwMCUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsICcxNTAnKTtcblxuICAgICAgICBzY29wZS5yZW5kZXIgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

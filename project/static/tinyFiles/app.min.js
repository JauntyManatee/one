var app=angular.module("app",["ngRoute","ngSanitize","pageslide-directive"]).config(["$routeProvider",function(t){t.when("/",{controller:"HomeController",templateUrl:"static/views/home.html"}).when("/feed",{controller:"FeedController",templateUrl:"static/views/feed.html"}).when("/test",{controller:"SliderController",templateUrl:"static/views/test.html"}).otherwise({redirectTo:"/"})}]);app.factory("InstagramFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/instagram/feed"})};return{getInstaFeed:e}}]).filter("instaLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://instagram.com/explore/tags/$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://instagram.com/$2"'+r+">@$2</a>")}}]),app.factory("RedditFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/reddit/hot"})};return{getRedditFeed:e}}]),app.factory("SliderFactory",["$http","$q",function(t,e){var n=function(){return t({method:"GET",url:"/instagram/stats"})},o=function(){return t({method:"GET",url:"/soundcloud/stats"})},r=function(){return t({method:"GET",url:"/twitter/following"}).then(function(e){return t({method:"GET",url:"/twitter/followers"}).then(function(t){return{followers:t,following:e}})})["catch"](function(t){return t})},a=function(){return n().then(function(t){return void 0===t.data.counts?null:{followers:t.data.counts.followed_by,following:t.data.counts.follows}})},i=function(){return r().then(function(t){return"Null"===t.followers.data?null:{followers:t.followers.data.ids.length,following:t.following.data.ids.length}})},l=function(){return o().then(function(t){return void 0===t.data.followers_count?null:{followers:t.data.followers_count,following:t.data.followings_count}})},u=function(t){return e(function(t,e){var n={};a(n).then(function(e){n.instagram=e,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})["catch"](function(e){n.instagram=null,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})}).then(function(t){var e=[];for(var n in t)e.push({media:n,counts:t[n]});return e})};return{getSoundcloudStats:o,getIgStats:n,getTwitterStats:r,getFollowStats:u}}]),app.factory("SoundCloudFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/soundcloud/stream"})};return{getSongs:e}}]),app.factory("TwitterFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"twitter/feed"})},n=function(e){return t({method:"POST",url:"twitter/favtweet",data:{id:e}})},o=function(e){return t({method:"POST",url:"twitter/retweet",data:{id:e}})},r=function(e){return t({method:"POST",url:"twitter/posttweet",data:{tweet:e}})};return{getTweets:e,favTweet:n,reTweet:o,postTweet:r}}]).filter("tweetLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://twitter.com/search?q=%23$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://twitter.com/$2"'+r+">@$2</a>")}}]),app.factory("UsersFactory",["$location","$http",function(t,e){return{signup:function(t){return e({method:"POST",url:"/signup",data:t})},login:function(t){return e({method:"POST",url:"/login",data:t})},logout:function(t){return e({method:"POST",url:"/logout",data:t})}}}]),app.factory("PanelFactory",[function(){return{checked:!1}}]),app.factory("PostType",function(){return{twitter:!1,instagram:!1,soundcloud:!1,reddit:!1}}),app.controller("FeedController",["$scope","PanelFactory","RedditFactory","TwitterFactory","InstagramFactory","SoundCloudFactory","PostType","$location","$sce","$timeout","UsersFactory",function(t,e,n,o,r,a,i,l,u,c,d){t.feed=[],t.checked=e,t.postType=i,t.loader=!1,angular.element(document).ready(function(e){t.loader=!0});var s=function(t,e,n){var o,r,a,i=[];return angular.forEach(t,function(t){var l=!0;"reddit"===e?t.url.endsWith(".jpg")?a={image_url:t.url.substring(5,t.length),type:"reddit",title:t.title,raw_time:t.created_utc,created_at:new Date(1e3*t.created_utc),displayTime:moment(new Date(1e3*t.created_utc)).fromNow(),url:"http://reddit.com"+t.permalink}:l=!1:"twitter"===e?a={text:t.text,created_at:new Date(t.created_at),displayTime:moment(new Date(t.created_at)).fromNow(),type:e,user:{screen_name:t.user.screen_name},id_str:t.id_str}:("instagram"===e||"soundcloud"===e)&&(t.embed?(r=u.trustAsHtml(t.embed),o=n?new Date(1e3*t.time):new Date(t.time),a={frame:r,created_at:o,displayTime:moment(o).fromNow(),type:e}):l=!1),l?i.push(a):null}),i};t.getTweets=function(){o.getTweets().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"twitter");t.feed.push.apply(t.feed,n)}})},t.favTweet=function(t){o.favTweet(t)},t.reTweet=function(t){o.reTweet(t)},t.postTweet=function(t){for(var e=t.split(""),n=0;n<e.length;n++)switch(e[n]){case" ":e[n]="%20";break;case"@":e[n]="%40";break;case"#":e[n]="%23";break;case"&":e[n]="%26";break;case":":e[n]="&3A";break;case"/":e[n]="%2F";break;default:e[n]=e[n]}t=e.join(""),o.postTweet(t)},t.getInstaFeed=function(){r.getInstaFeed().then(function(e){var n=s(e.data.data,"instagram",!0);t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getInstaFeed()})},t.getSoundFeed=function(){a.getSongs().then(function(e){var n=s(e.data.data,"soundcloud");t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getSoundFeed()})},t.getRedditFeed=function(){localStorage.redditToggle&&n.getRedditFeed().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"reddit");t.feed.push.apply(t.feed,n)}})},t.toggle=function(e){var o=!1;if("reddit"===e&&n.redditToggle===!1&&(n.redditToggle=!0),angular.forEach(t.feed,function(t){t.type===e&&(o=!0)}),o===!0)i[e]=!i[e];else{localStorage.getItem("at");switch(e){case"twitter":window.location.href="/twitter/auth";break;case"instagram":window.location.href="/instagram/auth";break;case"soundcloud":window.location.href="/soundcloud/auth";break;case"reddit":localStorage.redditToggle=!0,t.getRedditFeed()}}},t.refreshFeed=function(){window.history.go(0)},t.panelToggle=function(){e.checked=!e.checked},t.logout=function(){var t=localStorage.getItem("at");d.logout({at:t}).then(function(t){localStorage.clear(),l.path("home")})["catch"](function(t){console.log(t)})}}]),app.controller("HomeController",["$scope","UsersFactory","$location","$window",function(t,e,n,o){t.getHeight=function(){return o.innerHeight},t.$watch(t.getHeight,function(e,n){t.windowHeight=e}),t.verifier={errorz:""},t.logIn=function(o,r){var a={username:o,password:r};e.login(a).then(function(e){"Incorrect username or password."===e.data?(t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):e.data.auth_token&&n.path("feed")})["catch"](function(t){throw t})},t.signUp=function(o,r){var a={username:o,password:r};e.signup(a).then(function(e){"User already exists."===e.data?(console.log("User already exists."),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):n.path("feed")})["catch"](function(t){throw t})}}]),app.controller("SliderController",["$scope","SliderFactory",function(t,e){t.stats={},e.getIgStats().then(function(e){t.stats.instagram={followers:e.data.counts.followed_by,following:e.data.counts.follows}}),e.getSoundcloudStats().then(function(e){t.stats.soundcloud={followers:e.data.followers_count,following:e.data.followings_count}}),e.getTwitterStats().then(function(e){t.stats.twitter={followers:e.followers.data.ids.length,following:e.following.data.ids.length}}),e.getFollowStats().then(function(e){t.stats=e})}]),app.filter("typeFilter",["PostType",function(t){return function(e){var n=[];return angular.forEach(e,function(e){t[e.type]===!1&&("instagram"===e.type&&window.instgrm.Embeds.process(),n.push(e))}),n}}]),app.directive("poseidon",["SliderFactory","$window","$timeout",function(t,e,n){return{restrict:"E",scope:{},link:function(e,n,o){var r=[],a=[],i=[],l=d3.select(n[0]).append("svg").style({width:"100%",height:"100%"}),u={soundcloud:["#FF5500",0],twitter:["#54aaec",0],instagram:["#325C86",0]};t.getFollowStats().then(function(t){var e=0,n=0;angular.forEach(t,function(t){u[t.media]&&u[t.media][1]++,t.counts&&(n+=t.counts.following,e+=t.counts.followers,r.push({type:t.media,followers:t.counts.followers}),a.push({type:t.media,following:t.counts.following}))}),i.push({type:"Total Followers",count:e}),i.push({type:"Total Following",count:n})}).then(function(){nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.followers}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie svg").datum(r).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.following}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie2 svg").datum(a).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.count}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie3 svg").datum(i).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t})});var c=l.selectAll("image").data([0]);c.enter().append("svg:image").attr("xlink:href","../static/views/ONE.png").attr("x","0").attr("y","0").attr("width","100%").attr("height","150"),e.render=function(t){l.selectAll("*").remove()}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkluc3RhZ3JhbUZhY3RvcnkuanMiLCJSZWRkaXRGYWN0b3J5LmpzIiwiU2xpZGVyRmFjdG9yeS5qcyIsIlNvdW5kQ2xvdWRGYWN0b3J5LmpzIiwiVHdpdHRlckZhY3RvcnkuanMiLCJVc2Vyc0ZhY3RvcnkuanMiLCJwYW5lbEZhY3RvcnkuanMiLCJwb3N0VHlwZUZhY3RvcnkuanMiLCJmZWVkQ29udHJvbGxlci5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwic2xpZGVyQ29udHJvbGxlci5qcyIsInR5cGVGaWx0ZXIuanMiLCJwb3NlaWRvbkRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkaHR0cCIsImdldEluc3RhRmVlZCIsIm1ldGhvZCIsInVybCIsImZpbHRlciIsIiRmaWx0ZXIiLCJ0ZXh0IiwidGFyZ2V0IiwicmVwbGFjZWRUZXh0IiwidGFyZ2V0QXR0ciIsImlzRGVmaW5lZCIsInJlcGxhY2VQYXR0ZXJuMSIsInJlcGxhY2UiLCJyZXBsYWNlUGF0dGVybjIiLCJnZXRSZWRkaXRGZWVkIiwiJHEiLCJnZXRJZ1N0YXRzIiwiZ2V0U291bmRjbG91ZFN0YXRzIiwiZ2V0VHdpdHRlclN0YXRzIiwidGhlbiIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsImVyciIsIl9pbnN0YWdyYW1Gb2xsb3ciLCJyIiwidW5kZWZpbmVkIiwiX3R3aXR0ZXJGb2xsb3ciLCJsZW5ndGgiLCJfc291bmRjbG91ZEZvbGxvdyIsImdldEZvbGxvd1N0YXRzIiwibWVkaWFPYmoiLCJyZXNvbHZlIiwicmVqZWN0IiwiYmFzZSIsImlnIiwic2MiLCJ0dyIsInR3aXR0ZXJFcnIiLCJzb3VuZGNsb3VkRXJyIiwiaWdFcnJvciIsIm9iaiIsImFyciIsImtleSIsInB1c2giLCJtZWRpYSIsImNvdW50cyIsImdldFNvbmdzIiwiZ2V0VHdlZXRzIiwiZmF2VHdlZXQiLCJpZCIsImRhdGEiLCJyZVR3ZWV0IiwicG9zdFR3ZWV0IiwidHdlZXQiLCIkbG9jYXRpb24iLCJzaWdudXAiLCJ1c2VyIiwibG9naW4iLCJsb2dvdXQiLCJ0b2tlbiIsImNoZWNrZWQiLCJ0d2l0dGVyIiwiaW5zdGFncmFtIiwic291bmRjbG91ZCIsInJlZGRpdCIsIiRzY29wZSIsIlBhbmVsRmFjdG9yeSIsIlJlZGRpdEZhY3RvcnkiLCJUd2l0dGVyRmFjdG9yeSIsIkluc3RhZ3JhbUZhY3RvcnkiLCJTb3VuZENsb3VkRmFjdG9yeSIsIlBvc3RUeXBlIiwiJHNjZSIsIiR0aW1lb3V0IiwiVXNlcnNGYWN0b3J5IiwiZmVlZCIsInBvc3RUeXBlIiwibG9hZGVyIiwiZWxlbWVudCIsImRvY3VtZW50IiwicmVhZHkiLCJhcmciLCJidWlsZEZlZWQiLCJ0eXBlIiwiZGF0ZSIsInRoZURhdGUiLCJodG1sRnJhbWUiLCJ0aGVGZWVkIiwiZm9yRWFjaCIsIml0ZW0iLCJhcHBlbmQiLCJlbmRzV2l0aCIsImltYWdlX3VybCIsInN1YnN0cmluZyIsInRpdGxlIiwicmF3X3RpbWUiLCJjcmVhdGVkX3V0YyIsImNyZWF0ZWRfYXQiLCJEYXRlIiwiZGlzcGxheVRpbWUiLCJtb21lbnQiLCJmcm9tTm93IiwicGVybWFsaW5rIiwic2NyZWVuX25hbWUiLCJpZF9zdHIiLCJlbWJlZCIsInRydXN0QXNIdG1sIiwidGltZSIsImZyYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiaXRlbXMiLCJhcHBseSIsImFycmF5Iiwic3BsaXQiLCJpIiwiam9pbiIsImlzX21vcmVfZGF0YSIsImdldFNvdW5kRmVlZCIsImxvY2FsU3RvcmFnZSIsInJlZGRpdFRvZ2dsZSIsInRvZ2dsZSIsImJlZW5DYWxsZWQiLCJwb3N0IiwiZ2V0SXRlbSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInJlZnJlc2hGZWVkIiwiaGlzdG9yeSIsImdvIiwicGFuZWxUb2dnbGUiLCJhdXRoVG9rZW4iLCJhdCIsInJlcyIsImNsZWFyIiwicGF0aCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIiR3aW5kb3ciLCJnZXRIZWlnaHQiLCJpbm5lckhlaWdodCIsIiR3YXRjaCIsImN1cnJlbnQiLCJwcmV2aW91cyIsIndpbmRvd0hlaWdodCIsInZlcmlmaWVyIiwiZXJyb3J6IiwibG9nSW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9naW5Gb3JtIiwiJHNldFByaXN0aW5lIiwiYXV0aF90b2tlbiIsInNpZ25VcCIsIlNsaWRlckZhY3RvcnkiLCJzdGF0cyIsImQiLCJpbnB1dCIsIm91dHB1dCIsImluc3Rncm0iLCJFbWJlZHMiLCJwcm9jZXNzIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImxpbmsiLCJlbGUiLCJhdHRycyIsImRhdGFzZXQiLCJkYXRhc2V0MiIsImRhdGFzZXQzIiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiY29sb3JPYmoiLCJyZXNwIiwidG90c0ZvbGxvd2VycyIsInRvdHNGb2xsb3dpbmciLCJjb3VudCIsIm52IiwiYWRkR3JhcGgiLCJjaGFydCIsIm1vZGVscyIsInBpZUNoYXJ0IiwieCIsInkiLCJjb2xvciIsInNob3dMZWdlbmQiLCJzaG93TGFiZWxzIiwibGFiZWxUaHJlc2hvbGQiLCJsYWJlbFR5cGUiLCJkb251dCIsImRvbnV0UmF0aW8iLCJkYXR1bSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNhbGwiLCJ2YWx1ZUZvcm1hdCIsImZvcm1hdCIsImNoYXJ0MiIsImNoYXJ0MyIsImltZ3MiLCJzZWxlY3RBbGwiLCJlbnRlciIsImF0dHIiLCJyZW5kZXIiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQ0FDLE9BQUEsT0FDQSxVQUNBLGFBQ0Esd0JBRUFDLFFBQUEsaUJBQUEsU0FBQUMsR0FFQUEsRUFDQUMsS0FBQSxLQUNBQyxXQUFBLGlCQUNB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QSxXQUNBQyxPQUFBLEdBQ0FDLFdBQUEsSUFPQSxPQUxBdkIsSUFBQUMsT0FBQSxhQUNBdUIsTUFBQTFCLEdBQ0EyQixhQUFBQyxTQUFBLEtBQ0FDLEtBQUFJLEdBQ0FBLEVBQUFILFlBQUE1QixHQUFBNkIsT0FBQSxNQUNBRSxLQUlBLElBQUFDLEdBQUFqQyxFQUFBa0MsVUFBQSxTQUFBN0osTUFBQSxHQUNBNEosR0FBQUUsUUFDQXRILE9BQUEsYUFDQXVILEtBQUEsYUFBQSwyQkFDQUEsS0FBQSxJQUFBLEtBQ0FBLEtBQUEsSUFBQSxLQUNBQSxLQUFBLFFBQUEsUUFDQUEsS0FBQSxTQUFBLE9BRUEzQyxFQUFBNEMsT0FBQSxTQUFBaEssR0FDQTJILEVBQUFrQyxVQUFBLEtBQUFJIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhclxuICAubW9kdWxlKCdhcHAnLCBbXG4gICAgJ25nUm91dGUnLFxuICAgICduZ1Nhbml0aXplJyxcbiAgICAncGFnZXNsaWRlLWRpcmVjdGl2ZSdcbiAgXSlcbiAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcblxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAud2hlbiggJy8nLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAgICdzdGF0aWMvdmlld3MvaG9tZS5odG1sJyAgICAgIFxuICAgICAgfSlcblxuICAgICAgLndoZW4oJy9mZWVkJywgeyBcbiAgICAgICAgY29udHJvbGxlcjogJ0ZlZWRDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvdmlld3MvZmVlZC5odG1sJ1xuICAgICAgfSlcblxuICAgICAgLndoZW4oJy90ZXN0Jywge1xuICAgICAgICBjb250cm9sbGVyOiAnU2xpZGVyQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL3ZpZXdzL3Rlc3QuaHRtbCdcbiAgICAgIH0pXG5cbiAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgIH0pO1xuXG4gIH1dKTtcbiIsImFwcC5mYWN0b3J5KCdJbnN0YWdyYW1GYWN0b3J5JywgWyckaHR0cCcsIGZ1bmN0aW9uICggJGh0dHAgKSB7XG5cbiAgdmFyIGdldEluc3RhRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvaW5zdGFncmFtL2ZlZWQnXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbnN0YUZlZWQ6IGdldEluc3RhRmVlZFxuICB9O1xufV0pXG4gIC5maWx0ZXIoJ2luc3RhTGlua3knLFsnJGZpbHRlcicsIGZ1bmN0aW9uKCRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0KSB7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgICB2YXIgcmVwbGFjZWRUZXh0ID0gJGZpbHRlcignbGlua3knKSh0ZXh0LCB0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldEF0dHIgPSBcIlwiO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXRBdHRyID0gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIC8vIHJlcGxhY2UgI2hhc2h0YWdzIGFuZCBzZW5kIHRoZW0gdG8gdHdpdHRlclxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMSA9IC8oXnxcXHMpIyhcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjEsICckMTxhIGhyZWY9XCJodHRwczovL2luc3RhZ3JhbS5jb20vZXhwbG9yZS90YWdzLyQyXCInICsgdGFyZ2V0QXR0ciArICc+IyQyPC9hPicpO1xuICAgICAgLy8gcmVwbGFjZSBAbWVudGlvbnMgYnV0IGtlZXAgdGhlbSB0byBvdXIgc2l0ZVxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMiA9IC8oXnxcXHMpXFxAKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4yLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly9pbnN0YWdyYW0uY29tLyQyXCInICsgdGFyZ2V0QXR0ciArICc+QCQyPC9hPicpO1xuICAgICAgcmV0dXJuIHJlcGxhY2VkVGV4dDtcbiAgICB9O1xuICB9XG5dKTtcbiAgIiwiYXBwLmZhY3RvcnkoJ1JlZGRpdEZhY3RvcnknLCBbJyRodHRwJywgZnVuY3Rpb24gKCAkaHR0cCApIHtcblxuICB2YXIgZ2V0UmVkZGl0RmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmw6ICcvcmVkZGl0L2hvdCdcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFJlZGRpdEZlZWQ6IGdldFJlZGRpdEZlZWRcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnU2xpZGVyRmFjdG9yeScsIFsnJGh0dHAnLCckcScsIGZ1bmN0aW9uICggJGh0dHAsICRxICkge1xuXG4gIHZhciBnZXRJZ1N0YXRzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgIHVybCA6ICcvaW5zdGFncmFtL3N0YXRzJ1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRTb3VuZGNsb3VkU3RhdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy9zb3VuZGNsb3VkL3N0YXRzJ1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBnZXRUd2l0dGVyU3RhdHMgPSBmdW5jdGlvbiAoKSB7IFxuICAgIC8vdWdseSB3aWxsIHJlZmFjdG9yIGJ1dCBub3Qgbm93IDooXG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy90d2l0dGVyL2ZvbGxvd2luZydcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uKGZvbGxvd2luZyl7XG4gICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgICAgIHVybDogJy90d2l0dGVyL2ZvbGxvd2VycydcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihmb2xsb3dlcnMpe1xuICAgICAgICAgIHJldHVybiB7Zm9sbG93ZXJzOmZvbGxvd2VycywgZm9sbG93aW5nOmZvbGxvd2luZ307XG4gICAgICAgIH0pO1xuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICByZXR1cm4gZXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBfaW5zdGFncmFtRm9sbG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRJZ1N0YXRzKCkudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgaWYoclsnZGF0YSddWydjb3VudHMnXT09PXVuZGVmaW5lZCl7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ2ZvbGxvd2VycycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dlZF9ieSddLFxuICAgICAgICAnZm9sbG93aW5nJyA6IHJbJ2RhdGEnXVsnY291bnRzJ11bJ2ZvbGxvd3MnXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX3R3aXR0ZXJGb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFR3aXR0ZXJTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2ZvbGxvd2VycyddWydkYXRhJ10gPT09ICdOdWxsJyl7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ2ZvbGxvd2VycycgOiByWydmb2xsb3dlcnMnXVsnZGF0YSddWydpZHMnXS5sZW5ndGgsXG4gICAgICAgICdmb2xsb3dpbmcnIDogclsnZm9sbG93aW5nJ11bJ2RhdGEnXVsnaWRzJ10ubGVuZ3RoXG4gICAgICB9OyBcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX3NvdW5kY2xvdWRGb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFNvdW5kY2xvdWRTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2RhdGEnXVsnZm9sbG93ZXJzX2NvdW50J109PT11bmRlZmluZWQpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydmb2xsb3dlcnNfY291bnQnXSxcbiAgICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2ZvbGxvd2luZ3NfY291bnQnXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ2V0Rm9sbG93U3RhdHMgPSBmdW5jdGlvbiAobWVkaWFPYmopIHtcbi8vU29ycnkhISBzbyBiYWQuIFByb21pc2UgdHJlZS4gbG92ZSB5b3UhXG4gICAgcmV0dXJuICRxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBiYXNlID0ge307XG4gICAgICBfaW5zdGFncmFtRm9sbG93KGJhc2UpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGlnKXtcbiAgICAgICAgICAgIGJhc2VbJ2luc3RhZ3JhbSddID0gaWc7XG4gICAgICAgICAgX3NvdW5kY2xvdWRGb2xsb3coYmFzZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHNjKXtcbiAgICAgICAgICAgICAgYmFzZVsnc291bmRjbG91ZCddID0gc2M7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oc291bmRjbG91ZEVycil7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IG51bGw7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih0dyl7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSB0dztcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odHdpdHRlckVycil7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGlnRXJyb3Ipe1xuICAgICAgICAgIGJhc2VbJ2luc3RhZ3JhbSddID0gbnVsbDtcbiAgICAgICAgICBfc291bmRjbG91ZEZvbGxvdyhiYXNlKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oc2Mpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBzYztcbiAgICAgICAgICAgICAgX3R3aXR0ZXJGb2xsb3coYmFzZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih0dyl7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSB0dztcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odHdpdHRlckVycil7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oc291bmRjbG91ZEVycil7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IG51bGw7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih0dyl7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSB0dztcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odHdpdHRlckVycil7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICAgIGFyci5wdXNoKHttZWRpYTprZXksIGNvdW50czogb2JqW2tleV19KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRTb3VuZGNsb3VkU3RhdHMgOiBnZXRTb3VuZGNsb3VkU3RhdHMsXG4gICAgZ2V0SWdTdGF0cyA6IGdldElnU3RhdHMsXG4gICAgZ2V0VHdpdHRlclN0YXRzIDogZ2V0VHdpdHRlclN0YXRzLFxuICAgIGdldEZvbGxvd1N0YXRzIDogZ2V0Rm9sbG93U3RhdHNcbiAgfTtcblxufV0pO1xuIiwiYXBwLmZhY3RvcnkoJ1NvdW5kQ2xvdWRGYWN0b3J5JywgWyckaHR0cCcsIGZ1bmN0aW9uICAoJGh0dHApIHtcbiAgdmFyIGdldFNvbmdzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgIHVybCA6ICcvc291bmRjbG91ZC9zdHJlYW0nXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRTb25nczogZ2V0U29uZ3NcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnVHdpdHRlckZhY3RvcnknLFsnJGh0dHAnLCBmdW5jdGlvbiAoICRodHRwICkge1xuXG4gIHZhciBnZXRUd2VldHMgPSBmdW5jdGlvbiAoICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAndHdpdHRlci9mZWVkJ1xuICAgIH0pO1xuICB9O1xuIFxuICB2YXIgZmF2VHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJ3R3aXR0ZXIvZmF2dHdlZXQnLFxuICAgICAgZGF0YTogeyBpZDogaWQgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZVR3ZWV0ID0gZnVuY3Rpb24gKCBpZCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6ICd0d2l0dGVyL3JldHdlZXQnLFxuICAgICAgZGF0YTogeyBpZDogaWQgfVxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBwb3N0VHdlZXQgPSBmdW5jdGlvbiAoIHR3ZWV0ICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJ3R3aXR0ZXIvcG9zdHR3ZWV0JyxcbiAgICAgIGRhdGE6IHsgdHdlZXQ6IHR3ZWV0fVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0VHdlZXRzOiBnZXRUd2VldHMsXG4gICAgZmF2VHdlZXQ6IGZhdlR3ZWV0LFxuICAgIHJlVHdlZXQ6IHJlVHdlZXQsXG4gICAgcG9zdFR3ZWV0OiBwb3N0VHdlZXRcbiAgfTtcblxufV0pXG4gIC5maWx0ZXIoJ3R3ZWV0TGlua3knLFsnJGZpbHRlcicsIGZ1bmN0aW9uKCRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0KSB7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgICB2YXIgcmVwbGFjZWRUZXh0ID0gJGZpbHRlcignbGlua3knKSh0ZXh0LCB0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldEF0dHIgPSBcIlwiO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXRBdHRyID0gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIC8vIHJlcGxhY2UgI2hhc2h0YWdzIGFuZCBzZW5kIHRoZW0gdG8gdHdpdHRlclxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMSA9IC8oXnxcXHMpIyhcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjEsICckMTxhIGhyZWY9XCJodHRwczovL3R3aXR0ZXIuY29tL3NlYXJjaD9xPSUyMyQyXCInICsgdGFyZ2V0QXR0ciArICc+IyQyPC9hPicpO1xuICAgICAgLy8gcmVwbGFjZSBAbWVudGlvbnMgYnV0IGtlZXAgdGhlbSB0byBvdXIgc2l0ZVxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMiA9IC8oXnxcXHMpXFxAKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4yLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS8kMlwiJyArIHRhcmdldEF0dHIgKyAnPkAkMjwvYT4nKTtcbiAgICAgIHJldHVybiByZXBsYWNlZFRleHQ7XG4gICAgfTtcbiAgfVxuXSk7IiwiYXBwLmZhY3RvcnkoJ1VzZXJzRmFjdG9yeScsIFsnJGxvY2F0aW9uJywgJyRodHRwJywgIFxuICBmdW5jdGlvbigkbG9jYXRpb24sICRodHRwKSB7XG4gICAgcmV0dXJuIHtcblxuICAgICAgc2lnbnVwOiBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgICAgICBkYXRhOiB1c2VyXG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgbG9naW46IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgIGRhdGE6IHVzZXJcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBsb2dvdXQ6IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnL2xvZ291dCcsXG4gICAgICAgICAgZGF0YTogdG9rZW5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsImFwcC5mYWN0b3J5KCdQYW5lbEZhY3RvcnknLFtmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICdjaGVja2VkJzogZmFsc2VcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnUG9zdFR5cGUnLCBmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICd0d2l0dGVyJzogZmFsc2UsXG4gICAgJ2luc3RhZ3JhbSc6IGZhbHNlLFxuICAgICdzb3VuZGNsb3VkJzogZmFsc2UsXG4gICAgJ3JlZGRpdCc6ZmFsc2VcbiAgfTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdGZWVkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1BhbmVsRmFjdG9yeScsICdSZWRkaXRGYWN0b3J5JywnVHdpdHRlckZhY3RvcnknLCAnSW5zdGFncmFtRmFjdG9yeScsICdTb3VuZENsb3VkRmFjdG9yeScsICdQb3N0VHlwZScsICckbG9jYXRpb24nLCAnJHNjZScsICckdGltZW91dCcsICdVc2Vyc0ZhY3RvcnknLCBcbiAgZnVuY3Rpb24gKCAkc2NvcGUsIFBhbmVsRmFjdG9yeSwgUmVkZGl0RmFjdG9yeSwgVHdpdHRlckZhY3RvcnksIEluc3RhZ3JhbUZhY3RvcnksIFNvdW5kQ2xvdWRGYWN0b3J5LCBQb3N0VHlwZSwgJGxvY2F0aW9uLCAkc2NlLCAkdGltZW91dCwgVXNlcnNGYWN0b3J5ICkge1xuXG4gICRzY29wZS5mZWVkID0gW107XG5cbiAgJHNjb3BlLmNoZWNrZWQgPSBQYW5lbEZhY3Rvcnk7ICAgLy8gVGhpcyB3aWxsIGJlIGJpbmRlZCB1c2luZyB0aGUgcHMtb3BlbiBhdHRyaWJ1dGVcblxuICAkc2NvcGUucG9zdFR5cGUgPSBQb3N0VHlwZTtcblxuICAkc2NvcGUubG9hZGVyID0gZmFsc2U7XG5cbiAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoYXJnKSB7XG4gICAgJHNjb3BlLmxvYWRlciA9IHRydWU7XG4gIH0pO1xuXG4gIHZhciBidWlsZEZlZWQgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZGF0ZSkgeyBcbiAgICB2YXIgdGhlRmVlZCAgPSBbXSwgXG4gICAgICAgIHRoZURhdGUsIGh0bWxGcmFtZSwgb2JqO1xuICAgIGFuZ3VsYXIuZm9yRWFjaChkYXRhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGFwcGVuZCA9IHRydWU7XG4gICAgICBpZiAodHlwZSA9PT0gJ3JlZGRpdCcpIHtcbiAgICAgICAgaWYoaXRlbS51cmwuZW5kc1dpdGgoJy5qcGcnKSkge1xuICAgICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgIGltYWdlX3VybCA6IGl0ZW0udXJsLnN1YnN0cmluZyg1LGl0ZW0ubGVuZ3RoKSxcbiAgICAgICAgICAgIHR5cGU6ICdyZWRkaXQnLFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICByYXdfdGltZTogaXRlbS5jcmVhdGVkX3V0YyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKGl0ZW0uY3JlYXRlZF91dGMgKiAxMDAwKSxcbiAgICAgICAgICAgIGRpc3BsYXlUaW1lOiBtb21lbnQobmV3IERhdGUoaXRlbS5jcmVhdGVkX3V0YyoxMDAwKSkuZnJvbU5vdygpLFxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3JlZGRpdC5jb20nKyBpdGVtLnBlcm1hbGlua1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICBhcHBlbmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndHdpdHRlcicpIHtcbiAgICAgICAgb2JqID0ge1xuICAgICAgICAgdGV4dCA6IGl0ZW0udGV4dCwgXG4gICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpLFxuICAgICAgICAgZGlzcGxheVRpbWU6IG1vbWVudChuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpKS5mcm9tTm93KCksIFxuICAgICAgICAgdHlwZTogdHlwZSwgXG4gICAgICAgICB1c2VyOiB7c2NyZWVuX25hbWUgOiBpdGVtLnVzZXIuc2NyZWVuX25hbWV9LCBcbiAgICAgICAgIGlkX3N0cjogaXRlbS5pZF9zdHIgXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ2luc3RhZ3JhbScgfHwgdHlwZSA9PT0gJ3NvdW5kY2xvdWQnKXtcbiAgICAgICAgaWYoaXRlbS5lbWJlZCl7XG4gICAgICAgICAgaHRtbEZyYW1lID0gJHNjZS50cnVzdEFzSHRtbChpdGVtLmVtYmVkKTtcbiAgICAgICAgICB0aGVEYXRlID0gZGF0ZSA/IG5ldyBEYXRlKGl0ZW0udGltZSAqIDEwMDApIDogbmV3IERhdGUoaXRlbS50aW1lKTtcbiAgICAgICAgICBvYmogPSB7XG4gICAgICAgICAgIGZyYW1lOiBodG1sRnJhbWUsIFxuICAgICAgICAgICBjcmVhdGVkX2F0OiB0aGVEYXRlLFxuICAgICAgICAgICBkaXNwbGF5VGltZTogbW9tZW50KHRoZURhdGUpLmZyb21Ob3coKSwgXG4gICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBhcHBlbmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBcbiAgICAgIGFwcGVuZCA/IHRoZUZlZWQucHVzaChvYmopIDogbnVsbDtcbiAgICAgXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoZUZlZWQ7XG4gIH07XG5cbiAgLy8gJHNjb3BlLmlzVmFsaWRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAvLyAgIHZhciB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gIC8vICAgaWYgKCF1c2VyKSB7XG4gIC8vICAgICAkbG9jYXRpb24ucGF0aCgnaG9tZScpO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAgLy8gICB9ICAgIFxuICAvLyB9O1xuXG4gICRzY29wZS5nZXRUd2VldHMgPSBmdW5jdGlvbiAoICkge1xuICAgIFR3aXR0ZXJGYWN0b3J5LmdldFR3ZWV0cygpLnRoZW4oZnVuY3Rpb24gKCBkYXRhICkge1xuICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgdmFyIGl0ZW1zID0gYnVpbGRGZWVkKGRhdGEuZGF0YSwgJ3R3aXR0ZXInKTtcbiAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5mYXZUd2VldCA9IGZ1bmN0aW9uICggaWQgKSB7XG4gICAgVHdpdHRlckZhY3RvcnkuZmF2VHdlZXQoaWQpO1xuICB9O1xuXG4gICRzY29wZS5yZVR3ZWV0ID0gZnVuY3Rpb24gKCBpZCApIHtcbiAgICBUd2l0dGVyRmFjdG9yeS5yZVR3ZWV0KGlkKTtcbiAgfTtcblxuICAkc2NvcGUucG9zdFR3ZWV0ID0gZnVuY3Rpb24gKCB0d2VldCApIHtcbiAgICB2YXIgYXJyYXkgPSB0d2VldC5zcGxpdChcIlwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBzcGFjZSBhcyAlMjBcbiAgICAgIC8vIEAgYXMgJTQwXG4gICAgICAvLyAjIGFzICUyM1xuICAgICAgLy8gJiBhcyAlMjZcbiAgICAgIC8vIGNvbG9uIGFzICUzQVxuICAgICAgLy8gZm9yd2FyZCBzbGFzaCBhcyAlMkZcbiAgICAgIHN3aXRjaChhcnJheVtpXSkge1xuICAgICAgICBjYXNlICcgJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclNDAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcjJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjMnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICc6JzpcbiAgICAgICAgICBhcnJheVtpXSA9ICcmM0EnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMkYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFycmF5W2ldID0gYXJyYXlbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHR3ZWV0ID0gYXJyYXkuam9pbihcIlwiKTtcbiAgICBUd2l0dGVyRmFjdG9yeS5wb3N0VHdlZXQoIHR3ZWV0ICk7XG4gIH07XG5cbiAgJHNjb3BlLmdldEluc3RhRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgSW5zdGFncmFtRmFjdG9yeS5nZXRJbnN0YUZlZWQoKS50aGVuKGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgIHZhciBpdGVtcyA9IGJ1aWxkRmVlZChkYXRhLmRhdGEuZGF0YSwgJ2luc3RhZ3JhbScsIHRydWUpO1xuICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgaWYoZGF0YS5kYXRhLmlzX21vcmVfZGF0YSkge1xuICAgICAgICAkc2NvcGUuZ2V0SW5zdGFGZWVkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmdldFNvdW5kRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgU291bmRDbG91ZEZhY3RvcnkuZ2V0U29uZ3MoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLmRhdGEsICdzb3VuZGNsb3VkJyk7XG4gICAgICAkc2NvcGUuZmVlZC5wdXNoLmFwcGx5KCRzY29wZS5mZWVkLCBpdGVtcyk7XG4gICAgICBpZihkYXRhLmRhdGEuaXNfbW9yZV9kYXRhKSB7XG4gICAgICAgICRzY29wZS5nZXRTb3VuZEZlZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgXG4gICRzY29wZS5nZXRSZWRkaXRGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICBpZihsb2NhbFN0b3JhZ2UucmVkZGl0VG9nZ2xlKXtcbiAgICAgIFJlZGRpdEZhY3RvcnkuZ2V0UmVkZGl0RmVlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLCAncmVkZGl0Jyk7XG4gICAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLnRvZ2dsZSA9IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgIHZhciBiZWVuQ2FsbGVkID0gZmFsc2U7XG5cbiAgICBpZih0eXBlID09PSAncmVkZGl0JyAmJiBSZWRkaXRGYWN0b3J5LnJlZGRpdFRvZ2dsZSA9PT0gZmFsc2Upe1xuICAgICAgUmVkZGl0RmFjdG9yeS5yZWRkaXRUb2dnbGUgPSB0cnVlO1xuICAgIH1cbiAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmZlZWQsIGZ1bmN0aW9uICggcG9zdCApIHtcbiAgICAgIGlmKHBvc3QudHlwZSA9PT0gdHlwZSkge1xuICAgICAgICBiZWVuQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChiZWVuQ2FsbGVkID09PSB0cnVlKSB7ICBcbiAgICAgIFBvc3RUeXBlW3R5cGVdID0gIVBvc3RUeXBlW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2VzaFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gICAgICBzd2l0Y2godHlwZSkge1xuICAgICAgICBjYXNlICd0d2l0dGVyJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdHdpdHRlci9hdXRoJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaW5zdGFncmFtJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvaW5zdGFncmFtL2F1dGgnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzb3VuZGNsb3VkJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvc291bmRjbG91ZC9hdXRoJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVkZGl0JzpcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVkZGl0VG9nZ2xlID0gdHJ1ZTtcbiAgICAgICAgICAkc2NvcGUuZ2V0UmVkZGl0RmVlZCgpO1xuICAgICAgICAgIGJyZWFrOyAgICAgICAgXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5yZWZyZXNoRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgd2luZG93Lmhpc3RvcnkuZ28oMCk7XG4gIH07XG5cbiAgJHNjb3BlLnBhbmVsVG9nZ2xlID0gZnVuY3Rpb24oKXtcbiAgICBQYW5lbEZhY3RvcnkuY2hlY2tlZCA9ICFQYW5lbEZhY3RvcnkuY2hlY2tlZDtcbiAgfTtcblxuICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF1dGhUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdCcpO1xuICAgIFVzZXJzRmFjdG9yeS5sb2dvdXQoe1wiYXRcIjogYXV0aFRva2VufSlcbiAgICAudGhlbihmdW5jdGlvbiAoIHJlcyApIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJ2hvbWUnKTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbiAoIGVycm9yICkge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH0pO1xuICB9O1xuIH1dKTtcbiAgXG4iLCJhcHAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdVc2Vyc0ZhY3RvcnknLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2Vyc0ZhY3RvcnksICRsb2NhdGlvbiwgJHdpbmRvdykge1xuXG4gICRzY29wZS5nZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJHdpbmRvdy5pbm5lckhlaWdodDtcbiAgfTtcblxuICAkc2NvcGUuJHdhdGNoKCRzY29wZS5nZXRIZWlnaHQsIGZ1bmN0aW9uKGN1cnJlbnQsIHByZXZpb3VzKSB7XG4gICAgJHNjb3BlLndpbmRvd0hlaWdodCA9IGN1cnJlbnQ7XG4gIH0pO1xuXG4gICRzY29wZS52ZXJpZmllciA9e1xuICAgIGVycm9yeiA6ICcnXG4gIH07XG5cbiAgJHNjb3BlLmxvZ0luID0gZnVuY3Rpb24oIHVzZXJuYW1lLCBwYXNzd29yZCApIHtcbiAgICB2YXIgdXNlciA9IHsndXNlcm5hbWUnOiB1c2VybmFtZSwgJ3Bhc3N3b3JkJzogcGFzc3dvcmR9O1xuICAgIFVzZXJzRmFjdG9yeS5sb2dpbih1c2VyKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYocmVzLmRhdGEgPT09ICdJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQuJykge1xuICAgICAgICAkc2NvcGUudmVyaWZpZXIuZXJyb3J6ID0gXCJJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQhXCI7XG4gICAgICAgICRzY29wZS5sb2dpbkZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmF1dGhfdG9rZW4pIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJ2ZlZWQnKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHRocm93KGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnNpZ25VcCA9IGZ1bmN0aW9uKCB1c2VybmFtZSwgcGFzc3dvcmQgKSB7XG4gICAgdmFyIHVzZXIgPSB7J3VzZXJuYW1lJzogdXNlcm5hbWUsICdwYXNzd29yZCc6IHBhc3N3b3JkfTtcbiAgICBVc2Vyc0ZhY3Rvcnkuc2lnbnVwKHVzZXIpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZihyZXMuZGF0YSA9PT0gJ1VzZXIgYWxyZWFkeSBleGlzdHMuJykge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICAgICAgJHNjb3BlLnZlcmlmaWVyLmVycm9yeiA9IFwiSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkIVwiO1xuICAgICAgICAkc2NvcGUubG9naW5Gb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJ2ZlZWQnKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHRocm93KGVycik7XG4gICAgfSk7XG4gIH07XG5cbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdTbGlkZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCdTbGlkZXJGYWN0b3J5JywgZnVuY3Rpb24gKCRzY29wZSwgU2xpZGVyRmFjdG9yeSkge1xuICAkc2NvcGUuc3RhdHMgPSB7fVxuXG4gIFNsaWRlckZhY3RvcnkuZ2V0SWdTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7IFxuICAgICRzY29wZS5zdGF0c1snaW5zdGFncmFtJ10gPSB7XG4gICAgICAnZm9sbG93ZXJzJyA6IHJbJ2RhdGEnXVsnY291bnRzJ11bJ2ZvbGxvd2VkX2J5J10sXG4gICAgICAnZm9sbG93aW5nJyA6IHJbJ2RhdGEnXVsnY291bnRzJ11bJ2ZvbGxvd3MnXVxuICAgIH07XG4gIH0pO1xuXG4gIFNsaWRlckZhY3RvcnkuZ2V0U291bmRjbG91ZFN0YXRzKCkudGhlbihmdW5jdGlvbihyKXsgXG4gICAgJHNjb3BlLnN0YXRzWydzb3VuZGNsb3VkJ10gPSB7XG4gICAgICAnZm9sbG93ZXJzJyA6IHJbJ2RhdGEnXVsnZm9sbG93ZXJzX2NvdW50J10sXG4gICAgICAnZm9sbG93aW5nJyA6IHJbJ2RhdGEnXVsnZm9sbG93aW5nc19jb3VudCddXG4gICAgfTtcbiAgfSk7XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRUd2l0dGVyU3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpeyBcbiAgICAkc2NvcGUuc3RhdHNbJ3R3aXR0ZXInXSA9IHtcbiAgICAgICdmb2xsb3dlcnMnIDogclsnZm9sbG93ZXJzJ11bJ2RhdGEnXVsnaWRzJ10ubGVuZ3RoLFxuICAgICAgJ2ZvbGxvd2luZycgOiByWydmb2xsb3dpbmcnXVsnZGF0YSddWydpZHMnXS5sZW5ndGhcbiAgICB9O1xuICB9KTtcblxuICBTbGlkZXJGYWN0b3J5LmdldEZvbGxvd1N0YXRzKClcbiAgICAudGhlbihmdW5jdGlvbiAoZCkgeyAkc2NvcGUuc3RhdHM9ZDsgfSk7XG59XSk7IiwiYXBwLmZpbHRlcigndHlwZUZpbHRlcicsIFsnUG9zdFR5cGUnLCBmdW5jdGlvbiAoUG9zdFR5cGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICggaW5wdXQgKSB7XG4gICAgdmFyIG91dHB1dCA9IFtdO1xuICAgIGFuZ3VsYXIuZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24gKCBwb3N0ICkge1xuICAgICAgaWYgKCBQb3N0VHlwZVtwb3N0LnR5cGVdID09PSBmYWxzZSkge1xuICAgICAgICBpZiAocG9zdC50eXBlID09PSAnaW5zdGFncmFtJykge1xuICAgICAgICAgIHdpbmRvdy5pbnN0Z3JtLkVtYmVkcy5wcm9jZXNzKCk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0LnB1c2gocG9zdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcbn1dKTsiLCJhcHAuZGlyZWN0aXZlKCdwb3NlaWRvbicsIFsnU2xpZGVyRmFjdG9yeScsJyR3aW5kb3cnLCAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbiAoU2xpZGVyRmFjdG9yeSwgJHdpbmRvdywgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICB9LFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZSwgYXR0cnMpIHtcbiAgICAgICAgdmFyIGRhdGFzZXQgPSBbXTtcbiAgICAgICAgdmFyIGRhdGFzZXQyID0gW107XG4gICAgICAgIHZhciBkYXRhc2V0MyA9IFtdO1xuICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KGVsZVswXSlcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgIC5zdHlsZSh7J3dpZHRoJzogJzEwMCUnLCAnaGVpZ2h0JzogJzEwMCUnfSk7XG4gICAgICAgIHZhciBjb2xvck9iaiA9IHtcbiAgICAgICAgICAnc291bmRjbG91ZCc6IFsnI0ZGNTUwMCcsIDBdLFxuICAgICAgICAgICd0d2l0dGVyJzogWycjNTRhYWVjJywgMF0sXG4gICAgICAgICAgJ2luc3RhZ3JhbSc6IFsnIzMyNUM4NicsIDBdXG4gICAgICAgIH07XG4gICAgICAgIFNsaWRlckZhY3RvcnkuZ2V0Rm9sbG93U3RhdHMoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgdmFyIHRvdHNGb2xsb3dlcnMgPSAwOyBcbiAgICAgICAgICAgIHZhciB0b3RzRm9sbG93aW5nID0gMDtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXNwLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICBpZiAoY29sb3JPYmpbaS5tZWRpYV0pIHsgY29sb3JPYmpbaS5tZWRpYV1bMV0rKzsgfVxuICAgICAgICAgICAgICBpZiAoaS5jb3VudHMpIHtcbiAgICAgICAgICAgICAgICB0b3RzRm9sbG93aW5nICs9IGkuY291bnRzLmZvbGxvd2luZztcbiAgICAgICAgICAgICAgICB0b3RzRm9sbG93ZXJzICs9IGkuY291bnRzLmZvbGxvd2VycztcbiAgICAgICAgICAgICAgICBkYXRhc2V0LnB1c2goeyB0eXBlOiBpLm1lZGlhLCBmb2xsb3dlcnMgOiBpLmNvdW50cy5mb2xsb3dlcnMgfSk7XG4gICAgICAgICAgICAgICAgZGF0YXNldDIucHVzaCh7IHR5cGU6IGkubWVkaWEsIGZvbGxvd2luZyA6IGkuY291bnRzLmZvbGxvd2luZyB9KTtcbiAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGF0YXNldDMucHVzaCh7dHlwZTogJ1RvdGFsIEZvbGxvd2VycycsIGNvdW50IDogdG90c0ZvbGxvd2Vyc30pO1xuICAgICAgICAgICAgZGF0YXNldDMucHVzaCh7dHlwZTogJ1RvdGFsIEZvbGxvd2luZycsIGNvdW50IDogdG90c0ZvbGxvd2luZ30pOyAgICAgICAgIFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBudi5hZGRHcmFwaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBjaGFydCA9IG52Lm1vZGVscy5waWVDaGFydCgpXG4gICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGU7IH0pXG4gICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiBkLmZvbGxvd2VyczsgfSlcbiAgICAgICAgICAgICAgICAgIC5jb2xvcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gY29sb3JPYmpbZC50eXBlXVswXTsgfSlcbiAgICAgICAgICAgICAgICAgIC5zaG93TGVnZW5kKHRydWUpXG4gICAgICAgICAgICAgICAgICAuc2hvd0xhYmVscyhmYWxzZSkgICAgIC8vRGlzcGxheSBwaWUgbGFiZWxzXG4gICAgICAgICAgICAgICAgICAubGFiZWxUaHJlc2hvbGQoMC4wNSkgIC8vQ29uZmlndXJlIHRoZSBtaW5pbXVtIHNsaWNlIHNpemUgZm9yIGxhYmVscyB0byBzaG93IHVwXG4gICAgICAgICAgICAgICAgICAubGFiZWxUeXBlKFwicGVyY2VudFwiKSAvL0NvbmZpZ3VyZSB3aGF0IHR5cGUgb2YgZGF0YSB0byBzaG93IGluIHRoZSBsYWJlbC4gQ2FuIGJlIFwia2V5XCIsIFwidmFsdWVcIiBvciBcInBlcmNlbnRcIlxuICAgICAgICAgICAgICAgICAgLmRvbnV0KHRydWUpICAgICAgICAgIC8vVHVybiBvbiBEb251dCBtb2RlLiBNYWtlcyBwaWUgY2hhcnQgbG9vayB0YXN0eSFcbiAgICAgICAgICAgICAgICAgIC5kb251dFJhdGlvKDAuMzUpOyAgICAgLy9Db25maWd1cmUgaG93IGJpZyB5b3Ugd2FudCB0aGUgZG9udXQgaG9sZSBzaXplIHRvIGJlLlxuXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3BpZSBzdmdcIilcbiAgICAgICAgICAgICAgICAgICAgLmRhdHVtKGRhdGFzZXQpXG4gICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzUwKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbChjaGFydCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY2hhcnQudmFsdWVGb3JtYXQoZDMuZm9ybWF0KCdkJykpO1xuICAgICAgICAgICAgICByZXR1cm4gY2hhcnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG52LmFkZEdyYXBoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgY2hhcnQyID0gbnYubW9kZWxzLnBpZUNoYXJ0KClcbiAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlOyB9KVxuICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiBkLmZvbGxvd2luZzsgfSlcbiAgICAgICAgICAgICAgICAgLmNvbG9yKGZ1bmN0aW9uKGQpeyByZXR1cm4gY29sb3JPYmpbZC50eXBlXVswXTsgfSlcbiAgICAgICAgICAgICAgICAgLnNob3dMZWdlbmQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgLnNob3dMYWJlbHMoZmFsc2UpICAgIFxuICAgICAgICAgICAgICAgICAubGFiZWxUaHJlc2hvbGQoMC4wNSkgIFxuICAgICAgICAgICAgICAgICAubGFiZWxUeXBlKFwicGVyY2VudFwiKSBcbiAgICAgICAgICAgICAgICAgLmRvbnV0KHRydWUpICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAuZG9udXRSYXRpbygwLjM1KTsgICAgXG5cbiAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiNwaWUyIHN2Z1wiKVxuICAgICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhc2V0MilcbiAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDM1MClcbiAgICAgICAgICAgICAgICAgICAuY2FsbChjaGFydDIpO1xuICAgICAgICAgICAgICBjaGFydDIudmFsdWVGb3JtYXQoZDMuZm9ybWF0KCdkJykpO1xuICAgICAgICAgICAgICByZXR1cm4gY2hhcnQyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBudi5hZGRHcmFwaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGNoYXJ0MyA9IG52Lm1vZGVscy5waWVDaGFydCgpXG4gICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZTsgfSlcbiAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb3VudDsgfSlcbiAgICAgICAgICAgICAgICAgLy8gLmNvbG9yKGZ1bmN0aW9uKGQpeyByZXR1cm4gY29sb3JPYmpbZC50eXBlXVswXTsgfSlcbiAgICAgICAgICAgICAgICAgLnNob3dMZWdlbmQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgLnNob3dMYWJlbHMoZmFsc2UpICAgIFxuICAgICAgICAgICAgICAgICAubGFiZWxUaHJlc2hvbGQoMC4wNSkgIFxuICAgICAgICAgICAgICAgICAubGFiZWxUeXBlKFwicGVyY2VudFwiKSBcbiAgICAgICAgICAgICAgICAgLmRvbnV0KHRydWUpICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAuZG9udXRSYXRpbygwLjM1KTsgICAgXG5cbiAgICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3BpZTMgc3ZnXCIpXG4gICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhc2V0MylcbiAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigzNTApXG4gICAgICAgICAgICAgICAgIC5jYWxsKGNoYXJ0Myk7XG4gICAgICAgICAgICAgIGNoYXJ0My52YWx1ZUZvcm1hdChkMy5mb3JtYXQoJ2QnKSk7XG4gICAgICAgICAgICAgIHJldHVybiBjaGFydDM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB2YXIgaW1ncyA9IHN2Zy5zZWxlY3RBbGwoXCJpbWFnZVwiKS5kYXRhKFswXSk7XG4gICAgICAgICAgICAgICAgaW1ncy5lbnRlcigpXG4gICAgICAgICAgICAgICAgLmFwcGVuZChcInN2ZzppbWFnZVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieGxpbms6aHJlZlwiLCBcIi4uL3N0YXRpYy92aWV3cy9PTkUucG5nXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIFwiMFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCBcIjBcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsICcxMDAlJylcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCAnMTUwJyk7XG5cbiAgICAgICAgc2NvcGUucmVuZGVyID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

var app=angular.module("app",["ngRoute","ngSanitize","pageslide-directive"]).config(["$routeProvider",function(t){t.when("/",{controller:"HomeController",templateUrl:"static/views/home.html"}).when("/feed",{controller:"FeedController",templateUrl:"static/views/feed.html"}).when("/test",{controller:"SliderController",templateUrl:"static/views/test.html"}).otherwise({redirectTo:"/"})}]);app.factory("InstagramFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/instagram/feed"})};return{getInstaFeed:e}}]).filter("instaLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://instagram.com/explore/tags/$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://instagram.com/$2"'+r+">@$2</a>")}}]),app.factory("RedditFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/reddit/hot"})};return{getRedditFeed:e}}]),app.factory("SliderFactory",["$http","$q",function(t,e){var n=function(){return t({method:"GET",url:"/instagram/stats"})},o=function(){return t({method:"GET",url:"/soundcloud/stats"})},r=function(){return t({method:"GET",url:"/twitter/following"}).then(function(e){return t({method:"GET",url:"/twitter/followers"}).then(function(t){return{followers:t,following:e}})})["catch"](function(t){return t})},a=function(){return n().then(function(t){return void 0===t.data.counts?null:{followers:t.data.counts.followed_by,following:t.data.counts.follows}})},i=function(){return r().then(function(t){return"Null"===t.followers.data?null:{followers:t.followers.data.ids.length,following:t.following.data.ids.length}})},l=function(){return o().then(function(t){return void 0===t.data.followers_count?null:{followers:t.data.followers_count,following:t.data.followings_count}})},u=function(t){return e(function(t,e){var n={};a(n).then(function(e){n.instagram=e,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})["catch"](function(e){n.instagram=null,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})}).then(function(t){var e=[];for(var n in t)e.push({media:n,counts:t[n]});return e})};return{getSoundcloudStats:o,getIgStats:n,getTwitterStats:r,getFollowStats:u}}]),app.factory("SoundCloudFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/soundStream"})};return{getSongs:e}}]),app.factory("TwitterFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/tweetsfeed"})},n=function(e){return t({method:"POST",url:"/favtweet",data:{id:e}})},o=function(e){return t({method:"POST",url:"/retweet",data:{id:e}})},r=function(e){return t({method:"POST",url:"/posttweet",data:{tweet:e}})};return{getTweets:e,favTweet:n,reTweet:o,postTweet:r}}]).filter("tweetLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://twitter.com/search?q=%23$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://twitter.com/$2"'+r+">@$2</a>")}}]),app.factory("UsersFactory",["$location","$http",function(t,e){return{signup:function(t){return e({method:"POST",url:"/signup",data:t})},login:function(t){return e({method:"POST",url:"/login",data:t})},logout:function(t){return e({method:"POST",url:"/logout",data:t})}}}]),app.factory("PanelFactory",[function(){return{checked:!1}}]),app.factory("PostType",function(){return{twitter:!1,instagram:!1,soundcloud:!1,reddit:!1}}),app.controller("FeedController",["$scope","PanelFactory","RedditFactory","TwitterFactory","InstagramFactory","SoundCloudFactory","PostType","$location","$sce","$timeout","UsersFactory",function(t,e,n,o,r,a,i,l,u,c,d){t.feed=[],t.checked=e,t.postType=i,t.loader=!1,angular.element(document).ready(function(e){t.loader=!0});var s=function(t,e,n){var o,r,a,i=[];return angular.forEach(t,function(t){var l=!0;"reddit"===e?t.url.endsWith(".jpg")?a={image_url:t.url.substring(5,t.length),type:"reddit",title:t.title,raw_time:t.created_utc,created_at:new Date(1e3*t.created_utc),displayTime:moment(new Date(1e3*t.created_utc)).fromNow(),url:"http://reddit.com"+t.permalink}:l=!1:"twitter"===e?a={text:t.text,created_at:new Date(t.created_at),displayTime:moment(new Date(t.created_at)).fromNow(),type:e,user:{screen_name:t.user.screen_name},id_str:t.id_str}:("instagram"===e||"soundcloud"===e)&&(t.embed?(r=u.trustAsHtml(t.embed),o=n?new Date(1e3*t.time):new Date(t.time),a={frame:r,created_at:o,displayTime:moment(o).fromNow(),type:e}):l=!1),l?i.push(a):null}),i};t.getTweets=function(){o.getTweets().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"twitter");t.feed.push.apply(t.feed,n)}})},t.favTweet=function(t){o.favTweet(t)},t.reTweet=function(t){o.reTweet(t)},t.postTweet=function(t){for(var e=t.split(""),n=0;n<e.length;n++)switch(e[n]){case" ":e[n]="%20";break;case"@":e[n]="%40";break;case"#":e[n]="%23";break;case"&":e[n]="%26";break;case":":e[n]="&3A";break;case"/":e[n]="%2F";break;default:e[n]=e[n]}t=e.join(""),o.postTweet(t)},t.getInstaFeed=function(){r.getInstaFeed().then(function(e){var n=s(e.data.data,"instagram",!0);t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getInstaFeed()})},t.getSoundFeed=function(){a.getSongs().then(function(e){var n=s(e.data.data,"soundcloud");t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getSoundFeed()})},t.getRedditFeed=function(){localStorage.redditToggle&&n.getRedditFeed().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"reddit");t.feed.push.apply(t.feed,n)}})},t.toggle=function(e){var o=!1;if("reddit"===e&&n.redditToggle===!1&&(n.redditToggle=!0),angular.forEach(t.feed,function(t){t.type===e&&(o=!0)}),o===!0)i[e]=!i[e];else{localStorage.getItem("at");switch(e){case"twitter":window.location.href="/activate";break;case"instagram":window.location.href="/igAuth";break;case"soundcloud":window.location.href="/sound";break;case"reddit":localStorage.redditToggle=!0,t.getRedditFeed()}}},t.refreshFeed=function(){window.history.go(0)},t.panelToggle=function(){e.checked=!e.checked},t.logout=function(){var t=localStorage.getItem("at");d.logout({at:t}).then(function(t){localStorage.clear(),l.path("home")})["catch"](function(t){console.log(t)})}}]),app.controller("HomeController",["$scope","UsersFactory","$location","$window",function(t,e,n,o){t.getHeight=function(){return o.innerHeight},t.$watch(t.getHeight,function(e,n){t.windowHeight=e}),t.verifier={errorz:""},t.logIn=function(o,r){var a={username:o,password:r};e.login(a).then(function(e){"Incorrect username or password."===e.data?(t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):e.data.auth_token&&n.path("feed")})["catch"](function(t){throw t})},t.signUp=function(o,r){var a={username:o,password:r};e.signup(a).then(function(e){"User already exists."===e.data?(console.log("User already exists."),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):n.path("feed")})["catch"](function(t){throw t})}}]),app.controller("SliderController",["$scope","SliderFactory",function(t,e){t.stats={},e.getIgStats().then(function(e){t.stats.instagram={followers:e.data.counts.followed_by,following:e.data.counts.follows}}),e.getSoundcloudStats().then(function(e){t.stats.soundcloud={followers:e.data.followers_count,following:e.data.followings_count}}),e.getTwitterStats().then(function(e){t.stats.twitter={followers:e.followers.data.ids.length,following:e.following.data.ids.length}}),e.getFollowStats().then(function(e){t.stats=e})}]),app.filter("typeFilter",["PostType",function(t){return function(e){var n=[];return angular.forEach(e,function(e){t[e.type]===!1&&("instagram"===e.type&&window.instgrm.Embeds.process(),n.push(e))}),n}}]),app.directive("poseidon",["SliderFactory","$window","$timeout",function(t,e,n){return{restrict:"E",scope:{},link:function(e,n,o){var r=[],a=[],i=[],l=d3.select(n[0]).append("svg").style({width:"100%",height:"100%"}),u={soundcloud:["#FF5500",0],twitter:["#54aaec",0],instagram:["#325C86",0]};t.getFollowStats().then(function(t){var e=0,n=0;angular.forEach(t,function(t){u[t.media]&&u[t.media][1]++,t.counts&&(n+=t.counts.following,e+=t.counts.followers,r.push({type:t.media,followers:t.counts.followers}),a.push({type:t.media,following:t.counts.following}))}),i.push({type:"Total Followers",count:e}),i.push({type:"Total Following",count:n})}).then(function(){nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.followers}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie svg").datum(r).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.following}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie2 svg").datum(a).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.count}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie3 svg").datum(i).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t})});var c=l.selectAll("image").data([0]);c.enter().append("svg:image").attr("xlink:href","../static/views/ONE.png").attr("x","0").attr("y","0").attr("width","100%").attr("height","150"),e.render=function(t){l.selectAll("*").remove()}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkluc3RhZ3JhbUZhY3RvcnkuanMiLCJSZWRkaXRGYWN0b3J5LmpzIiwiU2xpZGVyRmFjdG9yeS5qcyIsIlNvdW5kQ2xvdWRGYWN0b3J5LmpzIiwiVHdpdHRlckZhY3RvcnkuanMiLCJVc2Vyc0ZhY3RvcnkuanMiLCJwYW5lbEZhY3RvcnkuanMiLCJwb3N0VHlwZUZhY3RvcnkuanMiLCJmZWVkQ29udHJvbGxlci5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwic2xpZGVyQ29udHJvbGxlci5qcyIsInR5cGVGaWx0ZXIuanMiLCJwb3NlaWRvbkRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkaHR0cCIsImdldEluc3RhRmVlZCIsIm1ldGhvZCIsInVybCIsImZpbHRlciIsIiRmaWx0ZXIiLCJ0ZXh0IiwidGFyZ2V0IiwicmVwbGFjZWRUZXh0IiwidGFyZ2V0QXR0ciIsImlzRGVmaW5lZCIsInJlcGxhY2VQYXR0ZXJuMSIsInJlcGxhY2UiLCJyZXBsYWNlUGF0dGVybjIiLCJnZXRSZWRkaXRGZWVkIiwiJHEiLCJnZXRJZ1N0YXRzIiwiZ2V0U291bmRjbG91ZFN0YXRzIiwiZ2V0VHdpdHRlclN0YXRzIiwidGhlbiIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsImVyciIsIl9pbnN0YWdyYW1Gb2xsb3ciLCJyIiwidW5kZWZpbmVkIiwiX3R3aXR0ZXJGb2xsb3ciLCJsZW5ndGgiLCJfc291bmRjbG91ZEZvbGxvdyIsImdldEZvbGxvd1N0YXRzIiwibWVkaWFPYmoiLCJyZXNvbHZlIiwicmVqZWN0IiwiYmFzZSIsImlnIiwic2MiLCJ0dyIsInR3aXR0ZXJFcnIiLCJzb3VuZGNsb3VkRXJyIiwiaWdFcnJvciIsIm9iaiIsImFyciIsImtleSIsInB1c2giLCJtZWRpYSIsImNvdW50cyIsImdldFNvbmdzIiwiZ2V0VHdlZXRzIiwiZmF2VHdlZXQiLCJpZCIsImRhdGEiLCJyZVR3ZWV0IiwicG9zdFR3ZWV0IiwidHdlZXQiLCIkbG9jYXRpb24iLCJzaWdudXAiLCJ1c2VyIiwibG9naW4iLCJsb2dvdXQiLCJ0b2tlbiIsImNoZWNrZWQiLCJ0d2l0dGVyIiwiaW5zdGFncmFtIiwic291bmRjbG91ZCIsInJlZGRpdCIsIiRzY29wZSIsIlBhbmVsRmFjdG9yeSIsIlJlZGRpdEZhY3RvcnkiLCJUd2l0dGVyRmFjdG9yeSIsIkluc3RhZ3JhbUZhY3RvcnkiLCJTb3VuZENsb3VkRmFjdG9yeSIsIlBvc3RUeXBlIiwiJHNjZSIsIiR0aW1lb3V0IiwiVXNlcnNGYWN0b3J5IiwiZmVlZCIsInBvc3RUeXBlIiwibG9hZGVyIiwiZWxlbWVudCIsImRvY3VtZW50IiwicmVhZHkiLCJhcmciLCJidWlsZEZlZWQiLCJ0eXBlIiwiZGF0ZSIsInRoZURhdGUiLCJodG1sRnJhbWUiLCJ0aGVGZWVkIiwiZm9yRWFjaCIsIml0ZW0iLCJhcHBlbmQiLCJlbmRzV2l0aCIsImltYWdlX3VybCIsInN1YnN0cmluZyIsInRpdGxlIiwicmF3X3RpbWUiLCJjcmVhdGVkX3V0YyIsImNyZWF0ZWRfYXQiLCJEYXRlIiwiZGlzcGxheVRpbWUiLCJtb21lbnQiLCJmcm9tTm93IiwicGVybWFsaW5rIiwic2NyZWVuX25hbWUiLCJpZF9zdHIiLCJlbWJlZCIsInRydXN0QXNIdG1sIiwidGltZSIsImZyYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiaXRlbXMiLCJhcHBseSIsImFycmF5Iiwic3BsaXQiLCJpIiwiam9pbiIsImlzX21vcmVfZGF0YSIsImdldFNvdW5kRmVlZCIsImxvY2FsU3RvcmFnZSIsInJlZGRpdFRvZ2dsZSIsInRvZ2dsZSIsImJlZW5DYWxsZWQiLCJwb3N0IiwiZ2V0SXRlbSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInJlZnJlc2hGZWVkIiwiaGlzdG9yeSIsImdvIiwicGFuZWxUb2dnbGUiLCJhdXRoVG9rZW4iLCJhdCIsInJlcyIsImNsZWFyIiwicGF0aCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIiR3aW5kb3ciLCJnZXRIZWlnaHQiLCJpbm5lckhlaWdodCIsIiR3YXRjaCIsImN1cnJlbnQiLCJwcmV2aW91cyIsIndpbmRvd0hlaWdodCIsInZlcmlmaWVyIiwiZXJyb3J6IiwibG9nSW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9naW5Gb3JtIiwiJHNldFByaXN0aW5lIiwiYXV0aF90b2tlbiIsInNpZ25VcCIsIlNsaWRlckZhY3RvcnkiLCJzdGF0cyIsImQiLCJpbnB1dCIsIm91dHB1dCIsImluc3Rncm0iLCJFbWJlZHMiLCJwcm9jZXNzIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImxpbmsiLCJlbGUiLCJhdHRycyIsImRhdGFzZXQiLCJkYXRhc2V0MiIsImRhdGFzZXQzIiwic3ZnIiwiZDMiLCJzZWxlY3QiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiY29sb3JPYmoiLCJyZXNwIiwidG90c0ZvbGxvd2VycyIsInRvdHNGb2xsb3dpbmciLCJjb3VudCIsIm52IiwiYWRkR3JhcGgiLCJjaGFydCIsIm1vZGVscyIsInBpZUNoYXJ0IiwieCIsInkiLCJjb2xvciIsInNob3dMZWdlbmQiLCJzaG93TGFiZWxzIiwibGFiZWxUaHJlc2hvbGQiLCJsYWJlbFR5cGUiLCJkb251dCIsImRvbnV0UmF0aW8iLCJkYXR1bSIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNhbGwiLCJ2YWx1ZUZvcm1hdCIsImZvcm1hdCIsImNoYXJ0MiIsImNoYXJ0MyIsImltZ3MiLCJzZWxlY3RBbGwiLCJlbnRlciIsImF0dHIiLCJyZW5kZXIiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUFBLEtBQUFDLFFBQ0FDLE9BQUEsT0FDQSxVQUNBLGFBQ0Esd0JBRUFDLFFBQUEsaUJBQUEsU0FBQUMsR0FFQUEsRUFDQUMsS0FBQSxLQUNBQyxXQUFBLGlCQUNB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QUMsT0FBQSxHQUNBQyxXQUFBLElBT0EsT0FMQXZCLElBQUFDLE9BQUEsYUFDQXVCLE1BQUExQixHQUNBMkIsYUFBQUMsU0FBQSxLQUNBQyxLQUFBSSxHQUNBQSxFQUFBSCxZQUFBNUIsR0FBQTZCLE9BQUEsTUFDQUUsS0FJQSxJQUFBQyxHQUFBakMsRUFBQWtDLFVBQUEsU0FBQTdKLE1BQUEsR0FDQTRKLEdBQUFFLFFBQ0F0SCxPQUFBLGFBQ0F1SCxLQUFBLGFBQUEsMkJBQ0FBLEtBQUEsSUFBQSxLQUNBQSxLQUFBLElBQUEsS0FDQUEsS0FBQSxRQUFBLFFBQ0FBLEtBQUEsU0FBQSxPQUVBM0MsRUFBQTRDLE9BQUEsU0FBQWhLLEdBQ0EySCxFQUFBa0MsVUFBQSxLQUFBSSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXJcbiAgLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ1JvdXRlJyxcbiAgICAnbmdTYW5pdGl6ZScsXG4gICAgJ3BhZ2VzbGlkZS1kaXJlY3RpdmUnXG4gIF0pXG4gIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKSB7XG5cbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgLndoZW4oICcvJywge1xuICAgICAgICBjb250cm9sbGVyOiAnSG9tZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogICAnc3RhdGljL3ZpZXdzL2hvbWUuaHRtbCcgICAgICBcbiAgICAgIH0pXG5cbiAgICAgIC53aGVuKCcvZmVlZCcsIHsgXG4gICAgICAgIGNvbnRyb2xsZXI6ICdGZWVkQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL3ZpZXdzL2ZlZWQuaHRtbCdcbiAgICAgIH0pXG5cbiAgICAgIC53aGVuKCcvdGVzdCcsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ1NsaWRlckNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy92aWV3cy90ZXN0Lmh0bWwnXG4gICAgICB9KVxuXG4gICAgIC5vdGhlcndpc2Uoe1xuICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICB9KTtcblxuICB9XSk7XG4iLCJhcHAuZmFjdG9yeSgnSW5zdGFncmFtRmFjdG9yeScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoICRodHRwICkge1xuXG4gIHZhciBnZXRJbnN0YUZlZWQgPSBmdW5jdGlvbiAoICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAnL2luc3RhZ3JhbS9mZWVkJ1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0SW5zdGFGZWVkOiBnZXRJbnN0YUZlZWRcbiAgfTtcbn1dKVxuICAuZmlsdGVyKCdpbnN0YUxpbmt5JyxbJyRmaWx0ZXInLCBmdW5jdGlvbigkZmlsdGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQsIHRhcmdldCkge1xuICAgICAgaWYgKCF0ZXh0KSByZXR1cm4gdGV4dDtcblxuICAgICAgdmFyIHJlcGxhY2VkVGV4dCA9ICRmaWx0ZXIoJ2xpbmt5JykodGV4dCwgdGFyZ2V0KTtcbiAgICAgIHZhciB0YXJnZXRBdHRyID0gXCJcIjtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGFyZ2V0QXR0ciA9ICcgdGFyZ2V0PVwiJyArIHRhcmdldCArICdcIic7XG4gICAgICB9XG4gICAgICAvLyByZXBsYWNlICNoYXNodGFncyBhbmQgc2VuZCB0aGVtIHRvIHR3aXR0ZXJcbiAgICAgIHZhciByZXBsYWNlUGF0dGVybjEgPSAvKF58XFxzKSMoXFx3KlthLXpBLVpfXStcXHcqKS9naW07XG4gICAgICByZXBsYWNlZFRleHQgPSB0ZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4xLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly9pbnN0YWdyYW0uY29tL2V4cGxvcmUvdGFncy8kMlwiJyArIHRhcmdldEF0dHIgKyAnPiMkMjwvYT4nKTtcbiAgICAgIC8vIHJlcGxhY2UgQG1lbnRpb25zIGJ1dCBrZWVwIHRoZW0gdG8gb3VyIHNpdGVcbiAgICAgIHZhciByZXBsYWNlUGF0dGVybjIgPSAvKF58XFxzKVxcQChcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHJlcGxhY2VkVGV4dC5yZXBsYWNlKHJlcGxhY2VQYXR0ZXJuMiwgJyQxPGEgaHJlZj1cImh0dHBzOi8vaW5zdGFncmFtLmNvbS8kMlwiJyArIHRhcmdldEF0dHIgKyAnPkAkMjwvYT4nKTtcbiAgICAgIHJldHVybiByZXBsYWNlZFRleHQ7XG4gICAgfTtcbiAgfVxuXSk7XG4gICIsImFwcC5mYWN0b3J5KCdSZWRkaXRGYWN0b3J5JywgWyckaHR0cCcsIGZ1bmN0aW9uICggJGh0dHAgKSB7XG5cbiAgdmFyIGdldFJlZGRpdEZlZWQgPSBmdW5jdGlvbiAoICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAnL3JlZGRpdC9ob3QnXG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRSZWRkaXRGZWVkOiBnZXRSZWRkaXRGZWVkXG4gIH07XG59XSk7IiwiYXBwLmZhY3RvcnkoJ1NsaWRlckZhY3RvcnknLCBbJyRodHRwJywnJHEnLCBmdW5jdGlvbiAoICRodHRwLCAkcSApIHtcblxuICB2YXIgZ2V0SWdTdGF0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICB1cmwgOiAnL2luc3RhZ3JhbS9zdGF0cydcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ2V0U291bmRjbG91ZFN0YXRzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgIHVybCA6ICcvc291bmRjbG91ZC9zdGF0cydcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ2V0VHdpdHRlclN0YXRzID0gZnVuY3Rpb24gKCkgeyBcbiAgICAvL3VnbHkgd2lsbCByZWZhY3RvciBidXQgbm90IG5vdyA6KFxuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgIHVybCA6ICcvdHdpdHRlci9mb2xsb3dpbmcnXG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbihmb2xsb3dpbmcpe1xuICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgICAgICB1cmw6ICcvdHdpdHRlci9mb2xsb3dlcnMnXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZm9sbG93ZXJzKXtcbiAgICAgICAgICByZXR1cm4ge2ZvbGxvd2Vyczpmb2xsb3dlcnMsIGZvbGxvd2luZzpmb2xsb3dpbmd9O1xuICAgICAgICB9KTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgcmV0dXJuIGVycjtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX2luc3RhZ3JhbUZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0SWdTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2RhdGEnXVsnY291bnRzJ109PT11bmRlZmluZWQpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93ZWRfYnknXSxcbiAgICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dzJ11cbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIF90d2l0dGVyRm9sbG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRUd2l0dGVyU3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICBpZihyWydmb2xsb3dlcnMnXVsnZGF0YSddID09PSAnTnVsbCcpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZm9sbG93ZXJzJ11bJ2RhdGEnXVsnaWRzJ10ubGVuZ3RoLFxuICAgICAgICAnZm9sbG93aW5nJyA6IHJbJ2ZvbGxvd2luZyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aFxuICAgICAgfTsgXG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIF9zb3VuZGNsb3VkRm9sbG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRTb3VuZGNsb3VkU3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICBpZihyWydkYXRhJ11bJ2ZvbGxvd2Vyc19jb3VudCddPT09dW5kZWZpbmVkKXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAnZm9sbG93ZXJzJyA6IHJbJ2RhdGEnXVsnZm9sbG93ZXJzX2NvdW50J10sXG4gICAgICAgICdmb2xsb3dpbmcnIDogclsnZGF0YSddWydmb2xsb3dpbmdzX2NvdW50J11cbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldEZvbGxvd1N0YXRzID0gZnVuY3Rpb24gKG1lZGlhT2JqKSB7XG4vL1NvcnJ5ISEgc28gYmFkLiBQcm9taXNlIHRyZWUuIGxvdmUgeW91IVxuICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgYmFzZSA9IHt9O1xuICAgICAgX2luc3RhZ3JhbUZvbGxvdyhiYXNlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihpZyl7XG4gICAgICAgICAgICBiYXNlWydpbnN0YWdyYW0nXSA9IGlnO1xuICAgICAgICAgIF9zb3VuZGNsb3VkRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzYyl7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IHNjO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdyhiYXNlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR3KXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IHR3O1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0d2l0dGVyRXJyKXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHNvdW5kY2xvdWRFcnIpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBudWxsO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihpZ0Vycm9yKXtcbiAgICAgICAgICBiYXNlWydpbnN0YWdyYW0nXSA9IG51bGw7XG4gICAgICAgICAgX3NvdW5kY2xvdWRGb2xsb3coYmFzZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHNjKXtcbiAgICAgICAgICAgICAgYmFzZVsnc291bmRjbG91ZCddID0gc2M7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHNvdW5kY2xvdWRFcnIpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBudWxsO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbiAob2JqKSB7XG4gICAgICB2YXIgYXJyID0gW107XG4gICAgICBmb3IodmFyIGtleSBpbiBvYmope1xuICAgICAgICBhcnIucHVzaCh7bWVkaWE6a2V5LCBjb3VudHM6IG9ialtrZXldfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0U291bmRjbG91ZFN0YXRzIDogZ2V0U291bmRjbG91ZFN0YXRzLFxuICAgIGdldElnU3RhdHMgOiBnZXRJZ1N0YXRzLFxuICAgIGdldFR3aXR0ZXJTdGF0cyA6IGdldFR3aXR0ZXJTdGF0cyxcbiAgICBnZXRGb2xsb3dTdGF0cyA6IGdldEZvbGxvd1N0YXRzXG4gIH07XG5cbn1dKTtcbiIsImFwcC5mYWN0b3J5KCdTb3VuZENsb3VkRmFjdG9yeScsIFsnJGh0dHAnLCBmdW5jdGlvbiAgKCRodHRwKSB7XG4gIHZhciBnZXRTb25ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICB1cmwgOiAnL3NvdW5kU3RyZWFtJ1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0U29uZ3M6IGdldFNvbmdzXG4gIH07XG59XSk7IiwiYXBwLmZhY3RvcnkoJ1R3aXR0ZXJGYWN0b3J5JyxbJyRodHRwJywgZnVuY3Rpb24gKCAkaHR0cCApIHtcblxuICB2YXIgZ2V0VHdlZXRzID0gZnVuY3Rpb24gKCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy90d2VldHNmZWVkJ1xuICAgIH0pO1xuICB9O1xuIFxuICB2YXIgZmF2VHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJy9mYXZ0d2VldCcsXG4gICAgICBkYXRhOiB7IGlkOiBpZCB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlVHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJy9yZXR3ZWV0JyxcbiAgICAgIGRhdGE6IHsgaWQ6IGlkIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcG9zdFR3ZWV0ID0gZnVuY3Rpb24gKCB0d2VldCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6ICcvcG9zdHR3ZWV0JyxcbiAgICAgIGRhdGE6IHsgdHdlZXQ6IHR3ZWV0fVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0VHdlZXRzOiBnZXRUd2VldHMsXG4gICAgZmF2VHdlZXQ6IGZhdlR3ZWV0LFxuICAgIHJlVHdlZXQ6IHJlVHdlZXQsXG4gICAgcG9zdFR3ZWV0OiBwb3N0VHdlZXRcbiAgfTtcblxufV0pXG4gIC5maWx0ZXIoJ3R3ZWV0TGlua3knLFsnJGZpbHRlcicsIGZ1bmN0aW9uKCRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0KSB7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgICB2YXIgcmVwbGFjZWRUZXh0ID0gJGZpbHRlcignbGlua3knKSh0ZXh0LCB0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldEF0dHIgPSBcIlwiO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXRBdHRyID0gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIC8vIHJlcGxhY2UgI2hhc2h0YWdzIGFuZCBzZW5kIHRoZW0gdG8gdHdpdHRlclxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMSA9IC8oXnxcXHMpIyhcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjEsICckMTxhIGhyZWY9XCJodHRwczovL3R3aXR0ZXIuY29tL3NlYXJjaD9xPSUyMyQyXCInICsgdGFyZ2V0QXR0ciArICc+IyQyPC9hPicpO1xuICAgICAgLy8gcmVwbGFjZSBAbWVudGlvbnMgYnV0IGtlZXAgdGhlbSB0byBvdXIgc2l0ZVxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMiA9IC8oXnxcXHMpXFxAKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4yLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS8kMlwiJyArIHRhcmdldEF0dHIgKyAnPkAkMjwvYT4nKTtcbiAgICAgIHJldHVybiByZXBsYWNlZFRleHQ7XG4gICAgfTtcbiAgfVxuXSk7IiwiYXBwLmZhY3RvcnkoJ1VzZXJzRmFjdG9yeScsIFsnJGxvY2F0aW9uJywgJyRodHRwJywgIFxuICBmdW5jdGlvbigkbG9jYXRpb24sICRodHRwKSB7XG4gICAgcmV0dXJuIHtcblxuICAgICAgc2lnbnVwOiBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgICAgICBkYXRhOiB1c2VyXG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgbG9naW46IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgIGRhdGE6IHVzZXJcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBsb2dvdXQ6IGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnL2xvZ291dCcsXG4gICAgICAgICAgZGF0YTogdG9rZW5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbn1dKTtcbiIsImFwcC5mYWN0b3J5KCdQYW5lbEZhY3RvcnknLFtmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICdjaGVja2VkJzogZmFsc2VcbiAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnUG9zdFR5cGUnLCBmdW5jdGlvbiAoICkge1xuICByZXR1cm4ge1xuICAgICd0d2l0dGVyJzogZmFsc2UsXG4gICAgJ2luc3RhZ3JhbSc6IGZhbHNlLFxuICAgICdzb3VuZGNsb3VkJzogZmFsc2UsXG4gICAgJ3JlZGRpdCc6ZmFsc2VcbiAgfTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdGZWVkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1BhbmVsRmFjdG9yeScsICdSZWRkaXRGYWN0b3J5JywnVHdpdHRlckZhY3RvcnknLCAnSW5zdGFncmFtRmFjdG9yeScsICdTb3VuZENsb3VkRmFjdG9yeScsICdQb3N0VHlwZScsICckbG9jYXRpb24nLCAnJHNjZScsICckdGltZW91dCcsICdVc2Vyc0ZhY3RvcnknLCBcbiAgZnVuY3Rpb24gKCAkc2NvcGUsIFBhbmVsRmFjdG9yeSwgUmVkZGl0RmFjdG9yeSwgVHdpdHRlckZhY3RvcnksIEluc3RhZ3JhbUZhY3RvcnksIFNvdW5kQ2xvdWRGYWN0b3J5LCBQb3N0VHlwZSwgJGxvY2F0aW9uLCAkc2NlLCAkdGltZW91dCwgVXNlcnNGYWN0b3J5ICkge1xuXG4gICRzY29wZS5mZWVkID0gW107XG5cbiAgJHNjb3BlLmNoZWNrZWQgPSBQYW5lbEZhY3Rvcnk7ICAgLy8gVGhpcyB3aWxsIGJlIGJpbmRlZCB1c2luZyB0aGUgcHMtb3BlbiBhdHRyaWJ1dGVcblxuICAkc2NvcGUucG9zdFR5cGUgPSBQb3N0VHlwZTtcblxuICAkc2NvcGUubG9hZGVyID0gZmFsc2U7XG5cbiAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoYXJnKSB7XG4gICAgJHNjb3BlLmxvYWRlciA9IHRydWU7XG4gIH0pO1xuXG4gIHZhciBidWlsZEZlZWQgPSBmdW5jdGlvbiAoZGF0YSwgdHlwZSwgZGF0ZSkgeyBcbiAgICB2YXIgdGhlRmVlZCAgPSBbXSwgXG4gICAgICAgIHRoZURhdGUsIGh0bWxGcmFtZSwgb2JqO1xuICAgIGFuZ3VsYXIuZm9yRWFjaChkYXRhLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGFwcGVuZCA9IHRydWU7XG4gICAgICBpZiAodHlwZSA9PT0gJ3JlZGRpdCcpIHtcbiAgICAgICAgaWYoaXRlbS51cmwuZW5kc1dpdGgoJy5qcGcnKSkge1xuICAgICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgIGltYWdlX3VybCA6IGl0ZW0udXJsLnN1YnN0cmluZyg1LGl0ZW0ubGVuZ3RoKSxcbiAgICAgICAgICAgIHR5cGU6ICdyZWRkaXQnLFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICByYXdfdGltZTogaXRlbS5jcmVhdGVkX3V0YyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKGl0ZW0uY3JlYXRlZF91dGMgKiAxMDAwKSxcbiAgICAgICAgICAgIGRpc3BsYXlUaW1lOiBtb21lbnQobmV3IERhdGUoaXRlbS5jcmVhdGVkX3V0YyoxMDAwKSkuZnJvbU5vdygpLFxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3JlZGRpdC5jb20nKyBpdGVtLnBlcm1hbGlua1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICBhcHBlbmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndHdpdHRlcicpIHtcbiAgICAgICAgb2JqID0ge1xuICAgICAgICAgdGV4dCA6IGl0ZW0udGV4dCwgXG4gICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpLFxuICAgICAgICAgZGlzcGxheVRpbWU6IG1vbWVudChuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpKS5mcm9tTm93KCksIFxuICAgICAgICAgdHlwZTogdHlwZSwgXG4gICAgICAgICB1c2VyOiB7c2NyZWVuX25hbWUgOiBpdGVtLnVzZXIuc2NyZWVuX25hbWV9LCBcbiAgICAgICAgIGlkX3N0cjogaXRlbS5pZF9zdHIgXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ2luc3RhZ3JhbScgfHwgdHlwZSA9PT0gJ3NvdW5kY2xvdWQnKXtcbiAgICAgICAgaWYoaXRlbS5lbWJlZCl7XG4gICAgICAgICAgaHRtbEZyYW1lID0gJHNjZS50cnVzdEFzSHRtbChpdGVtLmVtYmVkKTtcbiAgICAgICAgICB0aGVEYXRlID0gZGF0ZSA/IG5ldyBEYXRlKGl0ZW0udGltZSAqIDEwMDApIDogbmV3IERhdGUoaXRlbS50aW1lKTtcbiAgICAgICAgICBvYmogPSB7XG4gICAgICAgICAgIGZyYW1lOiBodG1sRnJhbWUsIFxuICAgICAgICAgICBjcmVhdGVkX2F0OiB0aGVEYXRlLFxuICAgICAgICAgICBkaXNwbGF5VGltZTogbW9tZW50KHRoZURhdGUpLmZyb21Ob3coKSwgXG4gICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBhcHBlbmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBcbiAgICAgIGFwcGVuZCA/IHRoZUZlZWQucHVzaChvYmopIDogbnVsbDtcbiAgICAgXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoZUZlZWQ7XG4gIH07XG5cbiAgLy8gJHNjb3BlLmlzVmFsaWRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAvLyAgIHZhciB1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gIC8vICAgaWYgKCF1c2VyKSB7XG4gIC8vICAgICAkbG9jYXRpb24ucGF0aCgnaG9tZScpO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICByZXR1cm4gdHJ1ZTtcbiAgLy8gICB9ICAgIFxuICAvLyB9O1xuXG4gICRzY29wZS5nZXRUd2VldHMgPSBmdW5jdGlvbiAoICkge1xuICAgIFR3aXR0ZXJGYWN0b3J5LmdldFR3ZWV0cygpLnRoZW4oZnVuY3Rpb24gKCBkYXRhICkge1xuICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgdmFyIGl0ZW1zID0gYnVpbGRGZWVkKGRhdGEuZGF0YSwgJ3R3aXR0ZXInKTtcbiAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5mYXZUd2VldCA9IGZ1bmN0aW9uICggaWQgKSB7XG4gICAgVHdpdHRlckZhY3RvcnkuZmF2VHdlZXQoaWQpO1xuICB9O1xuXG4gICRzY29wZS5yZVR3ZWV0ID0gZnVuY3Rpb24gKCBpZCApIHtcbiAgICBUd2l0dGVyRmFjdG9yeS5yZVR3ZWV0KGlkKTtcbiAgfTtcblxuICAkc2NvcGUucG9zdFR3ZWV0ID0gZnVuY3Rpb24gKCB0d2VldCApIHtcbiAgICB2YXIgYXJyYXkgPSB0d2VldC5zcGxpdChcIlwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBzcGFjZSBhcyAlMjBcbiAgICAgIC8vIEAgYXMgJTQwXG4gICAgICAvLyAjIGFzICUyM1xuICAgICAgLy8gJiBhcyAlMjZcbiAgICAgIC8vIGNvbG9uIGFzICUzQVxuICAgICAgLy8gZm9yd2FyZCBzbGFzaCBhcyAlMkZcbiAgICAgIHN3aXRjaChhcnJheVtpXSkge1xuICAgICAgICBjYXNlICcgJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclNDAnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcjJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjMnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMjYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICc6JzpcbiAgICAgICAgICBhcnJheVtpXSA9ICcmM0EnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICcvJzpcbiAgICAgICAgICBhcnJheVtpXSA9ICclMkYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFycmF5W2ldID0gYXJyYXlbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHR3ZWV0ID0gYXJyYXkuam9pbihcIlwiKTtcbiAgICBUd2l0dGVyRmFjdG9yeS5wb3N0VHdlZXQoIHR3ZWV0ICk7XG4gIH07XG5cbiAgJHNjb3BlLmdldEluc3RhRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgSW5zdGFncmFtRmFjdG9yeS5nZXRJbnN0YUZlZWQoKS50aGVuKGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgIHZhciBpdGVtcyA9IGJ1aWxkRmVlZChkYXRhLmRhdGEuZGF0YSwgJ2luc3RhZ3JhbScsIHRydWUpO1xuICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgaWYoZGF0YS5kYXRhLmlzX21vcmVfZGF0YSkge1xuICAgICAgICAkc2NvcGUuZ2V0SW5zdGFGZWVkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmdldFNvdW5kRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgU291bmRDbG91ZEZhY3RvcnkuZ2V0U29uZ3MoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLmRhdGEsICdzb3VuZGNsb3VkJyk7XG4gICAgICAkc2NvcGUuZmVlZC5wdXNoLmFwcGx5KCRzY29wZS5mZWVkLCBpdGVtcyk7XG4gICAgICBpZihkYXRhLmRhdGEuaXNfbW9yZV9kYXRhKSB7XG4gICAgICAgICRzY29wZS5nZXRTb3VuZEZlZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgXG4gICRzY29wZS5nZXRSZWRkaXRGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICBpZihsb2NhbFN0b3JhZ2UucmVkZGl0VG9nZ2xlKXtcbiAgICAgIFJlZGRpdEZhY3RvcnkuZ2V0UmVkZGl0RmVlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKXtcbiAgICAgICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLCAncmVkZGl0Jyk7XG4gICAgICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLnRvZ2dsZSA9IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgIHZhciBiZWVuQ2FsbGVkID0gZmFsc2U7XG5cbiAgICBpZih0eXBlID09PSAncmVkZGl0JyAmJiBSZWRkaXRGYWN0b3J5LnJlZGRpdFRvZ2dsZSA9PT0gZmFsc2Upe1xuICAgICAgUmVkZGl0RmFjdG9yeS5yZWRkaXRUb2dnbGUgPSB0cnVlO1xuICAgIH1cbiAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmZlZWQsIGZ1bmN0aW9uICggcG9zdCApIHtcbiAgICAgIGlmKHBvc3QudHlwZSA9PT0gdHlwZSkge1xuICAgICAgICBiZWVuQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChiZWVuQ2FsbGVkID09PSB0cnVlKSB7ICBcbiAgICAgIFBvc3RUeXBlW3R5cGVdID0gIVBvc3RUeXBlW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2VzaFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gICAgICBzd2l0Y2godHlwZSkge1xuICAgICAgICBjYXNlICd0d2l0dGVyJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWN0aXZhdGUnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdpbnN0YWdyYW0nOlxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9pZ0F1dGgnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzb3VuZGNsb3VkJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvc291bmQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZWRkaXQnOlxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZWRkaXRUb2dnbGUgPSB0cnVlO1xuICAgICAgICAgICRzY29wZS5nZXRSZWRkaXRGZWVkKCk7XG4gICAgICAgICAgYnJlYWs7ICAgICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLnJlZnJlc2hGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5nbygwKTtcbiAgfTtcblxuICAkc2NvcGUucGFuZWxUb2dnbGUgPSBmdW5jdGlvbigpe1xuICAgIFBhbmVsRmFjdG9yeS5jaGVja2VkID0gIVBhbmVsRmFjdG9yeS5jaGVja2VkO1xuICB9O1xuXG4gICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXV0aFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F0Jyk7XG4gICAgVXNlcnNGYWN0b3J5LmxvZ291dCh7XCJhdFwiOiBhdXRoVG9rZW59KVxuICAgIC50aGVuKGZ1bmN0aW9uICggcmVzICkge1xuICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnaG9tZScpO1xuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uICggZXJyb3IgKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG4gIH07XG4gfV0pO1xuICBcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ1VzZXJzRmFjdG9yeScsICckbG9jYXRpb24nLCAnJHdpbmRvdycsIGZ1bmN0aW9uICgkc2NvcGUsIFVzZXJzRmFjdG9yeSwgJGxvY2F0aW9uLCAkd2luZG93KSB7XG5cbiAgJHNjb3BlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkd2luZG93LmlubmVySGVpZ2h0O1xuICB9O1xuXG4gICRzY29wZS4kd2F0Y2goJHNjb3BlLmdldEhlaWdodCwgZnVuY3Rpb24oY3VycmVudCwgcHJldmlvdXMpIHtcbiAgICAkc2NvcGUud2luZG93SGVpZ2h0ID0gY3VycmVudDtcbiAgfSk7XG5cbiAgJHNjb3BlLnZlcmlmaWVyID17XG4gICAgZXJyb3J6IDogJydcbiAgfTtcblxuICAkc2NvcGUubG9nSW4gPSBmdW5jdGlvbiggdXNlcm5hbWUsIHBhc3N3b3JkICkge1xuICAgIHZhciB1c2VyID0geyd1c2VybmFtZSc6IHVzZXJuYW1lLCAncGFzc3dvcmQnOiBwYXNzd29yZH07XG4gICAgVXNlcnNGYWN0b3J5LmxvZ2luKHVzZXIpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZihyZXMuZGF0YSA9PT0gJ0luY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZC4nKSB7XG4gICAgICAgICRzY29wZS52ZXJpZmllci5lcnJvcnogPSBcIkluY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZCFcIjtcbiAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuYXV0aF90b2tlbikge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnZmVlZCcpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgdGhyb3coZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuc2lnblVwID0gZnVuY3Rpb24oIHVzZXJuYW1lLCBwYXNzd29yZCApIHtcbiAgICB2YXIgdXNlciA9IHsndXNlcm5hbWUnOiB1c2VybmFtZSwgJ3Bhc3N3b3JkJzogcGFzc3dvcmR9O1xuICAgIFVzZXJzRmFjdG9yeS5zaWdudXAodXNlcilcbiAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIGlmKHJlcy5kYXRhID09PSAnVXNlciBhbHJlYWR5IGV4aXN0cy4nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGFscmVhZHkgZXhpc3RzLicpO1xuICAgICAgICAkc2NvcGUudmVyaWZpZXIuZXJyb3J6ID0gXCJJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQhXCI7XG4gICAgICAgICRzY29wZS5sb2dpbkZvcm0uJHNldFByaXN0aW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnZmVlZCcpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgdGhyb3coZXJyKTtcbiAgICB9KTtcbiAgfTtcblxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ1NsaWRlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1NsaWRlckZhY3RvcnknLCBmdW5jdGlvbiAoJHNjb3BlLCBTbGlkZXJGYWN0b3J5KSB7XG4gICRzY29wZS5zdGF0cyA9IHt9XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRJZ1N0YXRzKCkudGhlbihmdW5jdGlvbihyKXsgXG4gICAgJHNjb3BlLnN0YXRzWydpbnN0YWdyYW0nXSA9IHtcbiAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93ZWRfYnknXSxcbiAgICAgICdmb2xsb3dpbmcnIDogclsnZGF0YSddWydjb3VudHMnXVsnZm9sbG93cyddXG4gICAgfTtcbiAgfSk7XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRTb3VuZGNsb3VkU3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpeyBcbiAgICAkc2NvcGUuc3RhdHNbJ3NvdW5kY2xvdWQnXSA9IHtcbiAgICAgICdmb2xsb3dlcnMnIDogclsnZGF0YSddWydmb2xsb3dlcnNfY291bnQnXSxcbiAgICAgICdmb2xsb3dpbmcnIDogclsnZGF0YSddWydmb2xsb3dpbmdzX2NvdW50J11cbiAgICB9O1xuICB9KTtcblxuICBTbGlkZXJGYWN0b3J5LmdldFR3aXR0ZXJTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7IFxuICAgICRzY29wZS5zdGF0c1sndHdpdHRlciddID0ge1xuICAgICAgJ2ZvbGxvd2VycycgOiByWydmb2xsb3dlcnMnXVsnZGF0YSddWydpZHMnXS5sZW5ndGgsXG4gICAgICAnZm9sbG93aW5nJyA6IHJbJ2ZvbGxvd2luZyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aFxuICAgIH07XG4gIH0pO1xuXG4gIFNsaWRlckZhY3RvcnkuZ2V0Rm9sbG93U3RhdHMoKVxuICAgIC50aGVuKGZ1bmN0aW9uIChkKSB7ICRzY29wZS5zdGF0cz1kOyB9KTtcbn1dKTsiLCJhcHAuZmlsdGVyKCd0eXBlRmlsdGVyJywgWydQb3N0VHlwZScsIGZ1bmN0aW9uIChQb3N0VHlwZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCBpbnB1dCApIHtcbiAgICB2YXIgb3V0cHV0ID0gW107XG4gICAgYW5ndWxhci5mb3JFYWNoKGlucHV0LCBmdW5jdGlvbiAoIHBvc3QgKSB7XG4gICAgICBpZiAoIFBvc3RUeXBlW3Bvc3QudHlwZV0gPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChwb3N0LnR5cGUgPT09ICdpbnN0YWdyYW0nKSB7XG4gICAgICAgICAgd2luZG93Lmluc3Rncm0uRW1iZWRzLnByb2Nlc3MoKTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQucHVzaChwb3N0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xufV0pOyIsImFwcC5kaXJlY3RpdmUoJ3Bvc2VpZG9uJywgWydTbGlkZXJGYWN0b3J5JywnJHdpbmRvdycsICckdGltZW91dCcsXG4gIGZ1bmN0aW9uIChTbGlkZXJGYWN0b3J5LCAkd2luZG93LCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgIH0sXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlLCBhdHRycykge1xuICAgICAgICB2YXIgZGF0YXNldCA9IFtdO1xuICAgICAgICB2YXIgZGF0YXNldDIgPSBbXTtcbiAgICAgICAgdmFyIGRhdGFzZXQzID0gW107XG4gICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoZWxlWzBdKVxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgLnN0eWxlKHsnd2lkdGgnOiAnMTAwJScsICdoZWlnaHQnOiAnMTAwJSd9KTtcbiAgICAgICAgdmFyIGNvbG9yT2JqID0ge1xuICAgICAgICAgICdzb3VuZGNsb3VkJzogWycjRkY1NTAwJywgMF0sXG4gICAgICAgICAgJ3R3aXR0ZXInOiBbJyM1NGFhZWMnLCAwXSxcbiAgICAgICAgICAnaW5zdGFncmFtJzogWycjMzI1Qzg2JywgMF1cbiAgICAgICAgfTtcbiAgICAgICAgU2xpZGVyRmFjdG9yeS5nZXRGb2xsb3dTdGF0cygpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICB2YXIgdG90c0ZvbGxvd2VycyA9IDA7IFxuICAgICAgICAgICAgdmFyIHRvdHNGb2xsb3dpbmcgPSAwO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3AsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgIGlmIChjb2xvck9ialtpLm1lZGlhXSkgeyBjb2xvck9ialtpLm1lZGlhXVsxXSsrOyB9XG4gICAgICAgICAgICAgIGlmIChpLmNvdW50cykge1xuICAgICAgICAgICAgICAgIHRvdHNGb2xsb3dpbmcgKz0gaS5jb3VudHMuZm9sbG93aW5nO1xuICAgICAgICAgICAgICAgIHRvdHNGb2xsb3dlcnMgKz0gaS5jb3VudHMuZm9sbG93ZXJzO1xuICAgICAgICAgICAgICAgIGRhdGFzZXQucHVzaCh7IHR5cGU6IGkubWVkaWEsIGZvbGxvd2VycyA6IGkuY291bnRzLmZvbGxvd2VycyB9KTtcbiAgICAgICAgICAgICAgICBkYXRhc2V0Mi5wdXNoKHsgdHlwZTogaS5tZWRpYSwgZm9sbG93aW5nIDogaS5jb3VudHMuZm9sbG93aW5nIH0pO1xuICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkYXRhc2V0My5wdXNoKHt0eXBlOiAnVG90YWwgRm9sbG93ZXJzJywgY291bnQgOiB0b3RzRm9sbG93ZXJzfSk7XG4gICAgICAgICAgICBkYXRhc2V0My5wdXNoKHt0eXBlOiAnVG90YWwgRm9sbG93aW5nJywgY291bnQgOiB0b3RzRm9sbG93aW5nfSk7ICAgICAgICAgXG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG52LmFkZEdyYXBoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIGNoYXJ0ID0gbnYubW9kZWxzLnBpZUNoYXJ0KClcbiAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZTsgfSlcbiAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZm9sbG93ZXJzOyB9KVxuICAgICAgICAgICAgICAgICAgLmNvbG9yKGZ1bmN0aW9uIChkKSB7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAgLnNob3dMZWdlbmQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgIC5zaG93TGFiZWxzKGZhbHNlKSAgICAgLy9EaXNwbGF5IHBpZSBsYWJlbHNcbiAgICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgLy9Db25maWd1cmUgdGhlIG1pbmltdW0gc2xpY2Ugc2l6ZSBmb3IgbGFiZWxzIHRvIHNob3cgdXBcbiAgICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIC8vQ29uZmlndXJlIHdoYXQgdHlwZSBvZiBkYXRhIHRvIHNob3cgaW4gdGhlIGxhYmVsLiBDYW4gYmUgXCJrZXlcIiwgXCJ2YWx1ZVwiIG9yIFwicGVyY2VudFwiXG4gICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgLy9UdXJuIG9uIERvbnV0IG1vZGUuIE1ha2VzIHBpZSBjaGFydCBsb29rIHRhc3R5IVxuICAgICAgICAgICAgICAgICAgLmRvbnV0UmF0aW8oMC4zNSk7ICAgICAvL0NvbmZpZ3VyZSBob3cgYmlnIHlvdSB3YW50IHRoZSBkb251dCBob2xlIHNpemUgdG8gYmUuXG5cbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjcGllIHN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YXNldClcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigzNTApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjaGFydC52YWx1ZUZvcm1hdChkMy5mb3JtYXQoJ2QnKSk7XG4gICAgICAgICAgICAgIHJldHVybiBjaGFydDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbnYuYWRkR3JhcGgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBjaGFydDIgPSBudi5tb2RlbHMucGllQ2hhcnQoKVxuICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGU7IH0pXG4gICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZm9sbG93aW5nOyB9KVxuICAgICAgICAgICAgICAgICAuY29sb3IoZnVuY3Rpb24oZCl7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAuc2hvd0xlZ2VuZCh0cnVlKVxuICAgICAgICAgICAgICAgICAuc2hvd0xhYmVscyhmYWxzZSkgICAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIFxuICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIC5kb251dFJhdGlvKDAuMzUpOyAgICBcblxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KFwiI3BpZTIgc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgLmRhdHVtKGRhdGFzZXQyKVxuICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzUwKVxuICAgICAgICAgICAgICAgICAgIC5jYWxsKGNoYXJ0Mik7XG4gICAgICAgICAgICAgIGNoYXJ0Mi52YWx1ZUZvcm1hdChkMy5mb3JtYXQoJ2QnKSk7XG4gICAgICAgICAgICAgIHJldHVybiBjaGFydDI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG52LmFkZEdyYXBoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgY2hhcnQzID0gbnYubW9kZWxzLnBpZUNoYXJ0KClcbiAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlOyB9KVxuICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvdW50OyB9KVxuICAgICAgICAgICAgICAgICAvLyAuY29sb3IoZnVuY3Rpb24oZCl7IHJldHVybiBjb2xvck9ialtkLnR5cGVdWzBdOyB9KVxuICAgICAgICAgICAgICAgICAuc2hvd0xlZ2VuZCh0cnVlKVxuICAgICAgICAgICAgICAgICAuc2hvd0xhYmVscyhmYWxzZSkgICAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFRocmVzaG9sZCgwLjA1KSAgXG4gICAgICAgICAgICAgICAgIC5sYWJlbFR5cGUoXCJwZXJjZW50XCIpIFxuICAgICAgICAgICAgICAgICAuZG9udXQodHJ1ZSkgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIC5kb251dFJhdGlvKDAuMzUpOyAgICBcblxuICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjcGllMyBzdmdcIilcbiAgICAgICAgICAgICAgICAgLmRhdHVtKGRhdGFzZXQzKVxuICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDM1MClcbiAgICAgICAgICAgICAgICAgLmNhbGwoY2hhcnQzKTtcbiAgICAgICAgICAgICAgY2hhcnQzLnZhbHVlRm9ybWF0KGQzLmZvcm1hdCgnZCcpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0MztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBpbWdzID0gc3ZnLnNlbGVjdEFsbChcImltYWdlXCIpLmRhdGEoWzBdKTtcbiAgICAgICAgICAgICAgICBpbWdzLmVudGVyKClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKFwic3ZnOmltYWdlXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4bGluazpocmVmXCIsIFwiLi4vc3RhdGljL3ZpZXdzL09ORS5wbmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgXCIwXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIFwiMFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgJzEwMCUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsICcxNTAnKTtcblxuICAgICAgICBzY29wZS5yZW5kZXIgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

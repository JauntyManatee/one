var app=angular.module("app",["ngRoute","ngSanitize","pageslide-directive"]).config(["$routeProvider",function(t){t.when("/",{controller:"HomeController",templateUrl:"static/views/home.html"}).when("/feed",{controller:"FeedController",templateUrl:"static/views/feed.html"}).when("/test",{controller:"SliderController",templateUrl:"static/views/test.html"}).otherwise({redirectTo:"/"})}]);app.factory("InstagramFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/instagram/feed"})};return{getInstaFeed:e}}]).filter("instaLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://instagram.com/explore/tags/$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://instagram.com/$2"'+r+">@$2</a>")}}]),app.factory("RedditFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/reddit/hot"})};return{getRedditFeed:e}}]),app.factory("SliderFactory",["$http","$q",function(t,e){var n=function(){return t({method:"GET",url:"/instagram/stats"})},o=function(){return t({method:"GET",url:"/soundcloud/stats"})},r=function(){return t({method:"GET",url:"/twitter/following"}).then(function(e){return t({method:"GET",url:"/twitter/followers"}).then(function(t){return{followers:t,following:e}})})["catch"](function(t){return t})},a=function(){return n().then(function(t){return void 0===t.data.counts?null:{followers:t.data.counts.followed_by,following:t.data.counts.follows}})},i=function(){return r().then(function(t){return void 0===t.followers.data.ids?null:{followers:t.followers.data.ids.length,following:t.following.data.ids.length}})},l=function(){return o().then(function(t){return void 0===t.data.followers_count?null:{followers:t.data.followers_count,following:t.data.followings_count}})},u=function(t){return e(function(t,e){var n={};a(n).then(function(e){n.instagram=e,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})["catch"](function(e){n.instagram=null,l(n).then(function(e){n.soundcloud=e,i(n).then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})["catch"](function(e){n.soundcloud=null,i().then(function(e){n.twitter=e,t(n)})["catch"](function(e){n.twitter=null,t(n)})})})}).then(function(t){var e=[];for(var n in t)e.push({media:n,counts:t[n]});return console.log(e),e})};return{getSoundcloudStats:o,getIgStats:n,getTwitterStats:r,getFollowStats:u}}]),app.factory("SoundCloudFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/soundStream"})};return{getSongs:e}}]),app.factory("TwitterFactory",["$http",function(t){var e=function(){return t({method:"GET",url:"/tweetsfeed"})},n=function(e){return t({method:"POST",url:"/favtweet",data:{id:e}})},o=function(e){return t({method:"POST",url:"/retweet",data:{id:e}})},r=function(e){return t({method:"POST",url:"/posttweet",data:{tweet:e}})};return{getTweets:e,favTweet:n,reTweet:o,postTweet:r}}]).filter("tweetLinky",["$filter",function(t){return function(e,n){if(!e)return e;var o=t("linky")(e,n),r="";angular.isDefined(n)&&(r=' target="'+n+'"');var a=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=e.replace(a,'$1<a href="https://twitter.com/search?q=%23$2"'+r+">#$2</a>");var i=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(i,'$1<a href="https://twitter.com/$2"'+r+">@$2</a>")}}]),app.factory("UsersFactory",["$location","$http",function(t,e){return{signup:function(t){return e({method:"POST",url:"/signup",data:t})},login:function(t){return console.log("factory"),e({method:"POST",url:"/login",data:t})},logout:function(t){return e({method:"POST",url:"/logout",data:t})}}}]),app.factory("PanelFactory",[function(){return{checked:!1}}]),app.factory("PostType",function(){return{twitter:!1,instagram:!1,soundcloud:!1,reddit:!1}}),app.controller("FeedController",["$scope","PanelFactory","RedditFactory","TwitterFactory","InstagramFactory","SoundCloudFactory","PostType","$location","$sce","$timeout","UsersFactory",function(t,e,n,o,r,a,i,l,u,c,d){t.feed=[],t.checked=e,t.postType=i,t.loader=!1,angular.element(document).ready(function(e){t.loader=!0});var s=function(t,e,n){var o,r,a,i=[];return angular.forEach(t,function(t){var l=!0;"reddit"===e?t.url.endsWith(".jpg")?a={image_url:t.url.substring(5,t.length),type:"reddit",title:t.title,raw_time:t.created_utc,created_at:new Date(1e3*t.created_utc),displayTime:moment(new Date(1e3*t.created_utc)).fromNow(),url:"http://reddit.com"+t.permalink}:l=!1:"twitter"===e?a={text:t.text,created_at:new Date(t.created_at),displayTime:moment(new Date(t.created_at)).fromNow(),type:e,user:{screen_name:t.user.screen_name},id_str:t.id_str}:("instagram"===e||"soundcloud"===e)&&(t.embed?(r=u.trustAsHtml(t.embed),o=n?new Date(1e3*t.time):new Date(t.time),a={frame:r,created_at:o,displayTime:moment(o).fromNow(),type:e}):l=!1),l?i.push(a):null}),i};t.isValidUser=function(){var t=localStorage.getItem("at");return t?!0:void l.path("home")},t.getTweets=function(){o.getTweets().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"twitter");t.feed.push.apply(t.feed,n)}})},t.favTweet=function(t){o.favTweet(t).then(function(t){console.log(t)})},t.reTweet=function(t){o.reTweet(t).then(function(t){console.log(t)})},t.postTweet=function(t){for(var e=t.split(""),n=0;n<e.length;n++)switch(e[n]){case" ":e[n]="%20";break;case"@":e[n]="%40";break;case"#":e[n]="%23";break;case"&":e[n]="%26";break;case":":e[n]="&3A";break;case"/":e[n]="%2F";break;default:e[n]=e[n]}t=e.join(""),o.postTweet(t).then(function(t){console.log(t)})},t.getInstaFeed=function(){r.getInstaFeed().then(function(e){var n=s(e.data.data,"instagram",!0);t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getInstaFeed()})},t.getSoundFeed=function(){a.getSongs().then(function(e){var n=s(e.data.data,"soundcloud");t.feed.push.apply(t.feed,n),e.data.is_more_data&&t.getSoundFeed()})},t.getRedditFeed=function(){localStorage.redditToggle&&n.getRedditFeed().then(function(e){if(Array.isArray(e.data)){var n=s(e.data,"reddit");t.feed.push.apply(t.feed,n)}})},t.toggle=function(e){var o=!1;if("reddit"===e&&n.redditToggle===!1&&(n.redditToggle=!0),angular.forEach(t.feed,function(t){t.type===e&&(o=!0)}),o===!0)i[e]=!i[e];else{localStorage.getItem("at");switch(e){case"twitter":window.location.href="/activate";break;case"instagram":window.location.href="/igAuth";break;case"soundcloud":window.location.href="/sound";break;case"reddit":localStorage.redditToggle=!0,t.getRedditFeed()}}},t.refreshFeed=function(){window.history.go(0)},t.panelToggle=function(){e.checked=!e.checked},t.logout=function(){var t=localStorage.getItem("at");d.logout({at:t}).then(function(t){localStorage.clear(),l.path("home")})["catch"](function(t){console.log(t)})}}]),app.controller("HomeController",["$scope","UsersFactory","$location","$window",function(t,e,n,o){t.getHeight=function(){return o.innerHeight},t.$watch(t.getHeight,function(e,n){t.windowHeight=e}),t.verifier={errorz:""},t.logIn=function(o,r){var a={username:o,password:r};e.login(a).then(function(e){"Incorrect username or password."===e.data?(console.log("Incorrect username or password"),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):e.data.auth_token&&(console.log("Logged in.",e.data),localStorage.setItem("at",e.data.auth_token),n.path("feed"))})["catch"](function(t){throw t})},t.signUp=function(o,r){var a={username:o,password:r};e.signup(a).then(function(e){"User already exists."===e.data?(console.log("User already exists."),t.verifier.errorz="Incorrect username or password!",t.loginForm.$setPristine()):(console.log("User added.",e.data),localStorage.setItem("at",e.data.auth_token),n.path("feed"))})["catch"](function(t){throw t})}}]),app.controller("SliderController",["$scope","SliderFactory",function(t,e){t.stats={},e.getIgStats().then(function(e){t.stats.instagram={followers:e.data.counts.followed_by,following:e.data.counts.follows}}),e.getSoundcloudStats().then(function(e){t.stats.soundcloud={followers:e.data.followers_count,following:e.data.followings_count}}),e.getTwitterStats().then(function(e){t.stats.twitter={followers:e.followers.data.ids.length,following:e.following.data.ids.length}}),e.getFollowStats().then(function(e){t.stats=e})}]),app.filter("typeFilter",["PostType",function(t){return function(e){var n=[];return angular.forEach(e,function(e){t[e.type]===!1&&("instagram"===e.type&&window.instgrm.Embeds.process(),n.push(e))}),n}}]),app.directive("poseidon",["SliderFactory","$window","$timeout",function(t,e,n){return{restrict:"E",scope:{},link:function(e,n,o){var r=[],a=[],i=[],l=d3.select(n[0]).append("svg").style({width:"100%",height:"100%"}),u={soundcloud:["#FF5500",0],twitter:["#54aaec",0],instagram:["#325C86",0]};t.getFollowStats().then(function(t){var e=0,n=0;angular.forEach(t,function(t){u[t.media]&&u[t.media][1]++,t.counts&&(n+=t.counts.following,e+=t.counts.followers,r.push({type:t.media,followers:t.counts.followers}),a.push({type:t.media,following:t.counts.following}))}),i.push({type:"Total Followers",count:e}),i.push({type:"Total Following",count:n})}).then(function(){nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.followers}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie svg").datum(r).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.following}).color(function(t){return u[t.type][0]}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie2 svg").datum(a).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t}),nv.addGraph(function(){var t=nv.models.pieChart().x(function(t){return t.type}).y(function(t){return t.count}).showLegend(!0).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.35);return d3.select("#pie3 svg").datum(i).transition().duration(350).call(t),t.valueFormat(d3.format("d")),t})});var c=l.selectAll("image").data([0]);c.enter().append("svg:image").attr("xlink:href","../static/views/ONE.png").attr("x","0").attr("y","0").attr("width","100%").attr("height","150"),e.render=function(t){l.selectAll("*").remove()}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkluc3RhZ3JhbUZhY3RvcnkuanMiLCJSZWRkaXRGYWN0b3J5LmpzIiwiU2xpZGVyRmFjdG9yeS5qcyIsIlNvdW5kQ2xvdWRGYWN0b3J5LmpzIiwiVHdpdHRlckZhY3RvcnkuanMiLCJVc2Vyc0ZhY3RvcnkuanMiLCJwYW5lbEZhY3RvcnkuanMiLCJwb3N0VHlwZUZhY3RvcnkuanMiLCJmZWVkQ29udHJvbGxlci5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwic2xpZGVyQ29udHJvbGxlci5qcyIsInR5cGVGaWx0ZXIuanMiLCJwb3NlaWRvbkRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkaHR0cCIsImdldEluc3RhRmVlZCIsIm1ldGhvZCIsInVybCIsImZpbHRlciIsIiRmaWx0ZXIiLCJ0ZXh0IiwidGFyZ2V0IiwicmVwbGFjZWRUZXh0IiwidGFyZ2V0QXR0ciIsImlzRGVmaW5lZCIsInJlcGxhY2VQYXR0ZXJuMSIsInJlcGxhY2UiLCJyZXBsYWNlUGF0dGVybjIiLCJnZXRSZWRkaXRGZWVkIiwiJHEiLCJnZXRJZ1N0YXRzIiwiZ2V0U291bmRjbG91ZFN0YXRzIiwiZ2V0VHdpdHRlclN0YXRzIiwidGhlbiIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsImVyciIsIl9pbnN0YWdyYW1Gb2xsb3ciLCJyIiwidW5kZWZpbmVkIiwiX3R3aXR0ZXJGb2xsb3ciLCJsZW5ndGgiLCJfc291bmRjbG91ZEZvbGxvdyIsImdldEZvbGxvd1N0YXRzIiwibWVkaWFPYmoiLCJyZXNvbHZlIiwicmVqZWN0IiwiYmFzZSIsImlnIiwic2MiLCJ0dyIsInR3aXR0ZXJFcnIiLCJzb3VuZGNsb3VkRXJyIiwiaWdFcnJvciIsIm9iaiIsImFyciIsImtleSIsInB1c2giLCJtZWRpYSIsImNvdW50cyIsImNvbnNvbGUiLCJsb2ciLCJnZXRTb25ncyIsImdldFR3ZWV0cyIsImZhdlR3ZWV0IiwiaWQiLCJkYXRhIiwicmVUd2VldCIsInBvc3RUd2VldCIsInR3ZWV0IiwiJGxvY2F0aW9uIiwic2lnbnVwIiwidXNlciIsImxvZ2luIiwibG9nb3V0IiwidG9rZW4iLCJjaGVja2VkIiwidHdpdHRlciIsImluc3RhZ3JhbSIsInNvdW5kY2xvdWQiLCJyZWRkaXQiLCIkc2NvcGUiLCJQYW5lbEZhY3RvcnkiLCJSZWRkaXRGYWN0b3J5IiwiVHdpdHRlckZhY3RvcnkiLCJJbnN0YWdyYW1GYWN0b3J5IiwiU291bmRDbG91ZEZhY3RvcnkiLCJQb3N0VHlwZSIsIiRzY2UiLCIkdGltZW91dCIsIlVzZXJzRmFjdG9yeSIsImZlZWQiLCJwb3N0VHlwZSIsImxvYWRlciIsImVsZW1lbnQiLCJkb2N1bWVudCIsInJlYWR5IiwiYXJnIiwiYnVpbGRGZWVkIiwidHlwZSIsImRhdGUiLCJ0aGVEYXRlIiwiaHRtbEZyYW1lIiwidGhlRmVlZCIsImZvckVhY2giLCJpdGVtIiwiYXBwZW5kIiwiZW5kc1dpdGgiLCJpbWFnZV91cmwiLCJzdWJzdHJpbmciLCJ0aXRsZSIsInJhd190aW1lIiwiY3JlYXRlZF91dGMiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsImRpc3BsYXlUaW1lIiwibW9tZW50IiwiZnJvbU5vdyIsInBlcm1hbGluayIsInNjcmVlbl9uYW1lIiwiaWRfc3RyIiwiZW1iZWQiLCJ0cnVzdEFzSHRtbCIsInRpbWUiLCJmcmFtZSIsImlzVmFsaWRVc2VyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBhdGgiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVtcyIsImFwcGx5IiwicmVzcG9uc2UiLCJhcnJheSIsInNwbGl0IiwiaSIsImpvaW4iLCJpc19tb3JlX2RhdGEiLCJnZXRTb3VuZEZlZWQiLCJyZWRkaXRUb2dnbGUiLCJ0b2dnbGUiLCJiZWVuQ2FsbGVkIiwicG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInJlZnJlc2hGZWVkIiwiaGlzdG9yeSIsImdvIiwicGFuZWxUb2dnbGUiLCJhdXRoVG9rZW4iLCJhdCIsInJlcyIsImNsZWFyIiwiZXJyb3IiLCIkd2luZG93IiwiZ2V0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCIkd2F0Y2giLCJjdXJyZW50IiwicHJldmlvdXMiLCJ3aW5kb3dIZWlnaHQiLCJ2ZXJpZmllciIsImVycm9yeiIsImxvZ0luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImxvZ2luRm9ybSIsIiRzZXRQcmlzdGluZSIsImF1dGhfdG9rZW4iLCJzZXRJdGVtIiwic2lnblVwIiwiU2xpZGVyRmFjdG9yeSIsInN0YXRzIiwiZCIsImlucHV0Iiwib3V0cHV0IiwiaW5zdGdybSIsIkVtYmVkcyIsInByb2Nlc3MiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwibGluayIsImVsZSIsImF0dHJzIiwiZGF0YXNldCIsImRhdGFzZXQyIiwiZGF0YXNldDMiLCJzdmciLCJkMyIsInNlbGVjdCIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJjb2xvck9iaiIsInJlc3AiLCJ0b3RzRm9sbG93ZXJzIiwidG90c0ZvbGxvd2luZyIsImNvdW50IiwibnYiLCJhZGRHcmFwaCIsImNoYXJ0IiwibW9kZWxzIiwicGllQ2hhcnQiLCJ4IiwieSIsImNvbG9yIiwic2hvd0xlZ2VuZCIsInNob3dMYWJlbHMiLCJsYWJlbFRocmVzaG9sZCIsImxhYmVsVHlwZSIsImRvbnV0IiwiZG9udXRSYXRpbyIsImRhdHVtIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiY2FsbCIsInZhbHVlRm9ybWF0IiwiZm9ybWF0IiwiY2hhcnQyIiwiY2hhcnQzIiwiaW1ncyIsInNlbGVjdEFsbCIsImVudGVyIiwiYXR0ciIsInJlbmRlciIsInJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFDQUMsT0FBQSxPQUNBLFVBQ0EsYUFDQSx3QkFFQUMsUUFBQSxpQkFBQSxTQUFBQyxHQUVBQSxFQUNBQyxLQUFBLEtBQ0FDLFdBQUEsaUJBQ0FDLFlBQUEsMkJBR0FGLEtBQUEsU0FDQUMsV0FBQSxpQkFDQUMsWUFBQSwyQkFHQUYsS0FBQSxTQUNBQyxXQUFBLG1CQUNBQyxZQUFBLDJCQUdBQyxXQUNBQyxXQUFBLFFDekJBVCxLQUFBVSxRQUFBLG9CQUFBLFFBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBLFdBQ0EsTUFBQUQsSUFDQUUsT0FBQSxNQUNBQyxJQUFBLG9CQUlBLFFBQ0FGLGFBQUFBLE1BR0FHLE9BQUEsY0FBQSxVQUFBLFNBQUFDLEdBQ0EsTUFBQSxVQUFBQyxFQUFBQyxHQUNBLElBQUFELEVBQUEsTUFBQUEsRUFFQSxJQUFBRSxHQUFBSCxFQUFBLFNBQUFDLEVBQUFDLEdBQ0FFLEVBQUEsRUFDQW5CLFNBQUFvQixVQUFBSCxLQUNBRSxFQUFBLFlBQUFGLEVBQUEsSUFHQSxJQUFBSSxHQUFBLDhCQUNBSCxHQUFBRixFQUFBTSxRQUFBRCxFQUFBLG9EQUFBRixFQUFBLFdBRUEsSUFBQUksR0FBQSwrQkFFQSxPQURBTCxHQUFBQSxFQUFBSSxRQUFBQyxFQUFBLHVDQUFBSixFQUFBLGdCQzNCQXBCLElBQUFVLFFBQUEsaUJBQUEsUUFBQSxTQUFBQyxHQUVBLEdBQUFjLEdBQUEsV0FDQSxNQUFBZCxJQUNBRSxPQUFBLE1BQ0FDLElBQUEsZ0JBSUEsUUFDQVcsY0FBQUEsTUNWQXpCLElBQUFVLFFBQUEsaUJBQUEsUUFBQSxLQUFBLFNBQUFDLEVBQUFlLEdBRUEsR0FBQUMsR0FBQSxXQUNBLE1BQUFoQixJQUNBRSxPQUFBLE1BQ0FDLElBQUEsc0JBSUFjLEVBQUEsV0FDQSxNQUFBakIsSUFDQUUsT0FBQSxNQUNBQyxJQUFBLHVCQUlBZSxFQUFBLFdBRUEsTUFBQWxCLElBQ0FFLE9BQUEsTUFDQUMsSUFBQSx1QkFFQWdCLEtBQUEsU0FBQUMsR0FDQSxNQUFBcEIsSUFDQUUsT0FBQSxNQUNBQyxJQUFBLHVCQUNBZ0IsS0FBQSxTQUFBRSxHQUNBLE9BQUFBLFVBQUFBLEVBQUFELFVBQUFBLE9BVEFwQixTQVlBLFNBQUFzQixHQUNBLE1BQUFBLE1BSUFDLEVBQUEsV0FDQSxNQUFBUCxLQUFBRyxLQUFBLFNBQUFLLEdBQ0EsTUFBQUMsVUFBQUQsRUFBQSxLQUFBLE9BQ0EsTUFHQUgsVUFBQUcsRUFBQSxLQUFBLE9BQUEsWUFDQUosVUFBQUksRUFBQSxLQUFBLE9BQUEsWUFNQUUsRUFBQSxXQUNBLE1BQUFSLEtBQUFDLEtBQUEsU0FBQUssR0FDQSxNQUFBQyxVQUFBRCxFQUFBLFVBQUEsS0FBQSxJQUNBLE1BR0FILFVBQUFHLEVBQUEsVUFBQSxLQUFBLElBQUFHLE9BQ0FQLFVBQUFJLEVBQUEsVUFBQSxLQUFBLElBQUFHLFdBTUFDLEVBQUEsV0FDQSxNQUFBWCxLQUFBRSxLQUFBLFNBQUFLLEdBQ0EsTUFBQUMsVUFBQUQsRUFBQSxLQUFBLGdCQUNBLE1BR0FILFVBQUFHLEVBQUEsS0FBQSxnQkFDQUosVUFBQUksRUFBQSxLQUFBLHFCQUtBSyxFQUFBLFNBQUFDLEdBRUEsTUFBQWYsR0FBQSxTQUFBZ0IsRUFBQUMsR0FDQSxHQUFBQyxLQUNBVixHQUFBVSxHQUNBZCxLQUFBLFNBQUFlLEdBQ0FELEVBQUEsVUFBQUMsRUFDQU4sRUFBQUssR0FDQWQsS0FBQSxTQUFBZ0IsR0FDQUYsRUFBQSxXQUFBRSxFQUNBVCxFQUFBTyxHQUNBZCxLQUFBLFNBQUFpQixHQUNBSCxFQUFBLFFBQUFHLEVBQ0FMLEVBQUFFLEtBSEFQLFNBS0EsU0FBQVcsR0FDQUosRUFBQSxRQUFBLEtBQ0FGLEVBQUFFLE9BVkFMLFNBYUEsU0FBQVUsR0FDQUwsRUFBQSxXQUFBLEtBQ0FQLElBQ0FQLEtBQUEsU0FBQWlCLEdBQ0FILEVBQUEsUUFBQUcsRUFDQUwsRUFBQUUsS0FIQVAsU0FLQSxTQUFBVyxHQUNBSixFQUFBLFFBQUEsS0FDQUYsRUFBQUUsU0F6QkFWLFNBNkJBLFNBQUFnQixHQUNBTixFQUFBLFVBQUEsS0FDQUwsRUFBQUssR0FDQWQsS0FBQSxTQUFBZ0IsR0FDQUYsRUFBQSxXQUFBRSxFQUNBVCxFQUFBTyxHQUNBZCxLQUFBLFNBQUFpQixHQUNBSCxFQUFBLFFBQUFHLEVBQ0FMLEVBQUFFLEtBSEFQLFNBS0EsU0FBQVcsR0FDQUosRUFBQSxRQUFBLEtBQ0FGLEVBQUFFLE9BVkFMLFNBYUEsU0FBQVUsR0FDQUwsRUFBQSxXQUFBLEtBQ0FQLElBQ0FQLEtBQUEsU0FBQWlCLEdBQ0FILEVBQUEsUUFBQUcsRUFDQUwsRUFBQUUsS0FIQVAsU0FLQSxTQUFBVyxHQUNBSixFQUFBLFFBQUEsS0FDQUYsRUFBQUUsV0FNQWQsS0FBQSxTQUFBcUIsR0FDQSxHQUFBQyxLQUNBLEtBQUEsR0FBQUMsS0FBQUYsR0FDQUMsRUFBQUUsTUFBQUMsTUFBQUYsRUFBQUcsT0FBQUwsRUFBQUUsSUFHQSxPQURBSSxTQUFBQyxJQUFBTixHQUNBQSxJQUlBLFFBQ0F4QixtQkFBQUEsRUFDQUQsV0FBQUEsRUFDQUUsZ0JBQUFBLEVBQ0FXLGVBQUFBLE1DdEpBeEMsSUFBQVUsUUFBQSxxQkFBQSxRQUFBLFNBQUFDLEdBQ0EsR0FBQWdELEdBQUEsV0FDQSxNQUFBaEQsSUFDQUUsT0FBQSxNQUNBQyxJQUFBLGlCQUlBLFFBQ0E2QyxTQUFBQSxNQ1RBM0QsSUFBQVUsUUFBQSxrQkFBQSxRQUFBLFNBQUFDLEdBRUEsR0FBQWlELEdBQUEsV0FDQSxNQUFBakQsSUFDQUUsT0FBQSxNQUNBQyxJQUFBLGlCQUlBK0MsRUFBQSxTQUFBQyxHQUNBLE1BQUFuRCxJQUNBRSxPQUFBLE9BQ0FDLElBQUEsWUFDQWlELE1BQUFELEdBQUFBLE1BSUFFLEVBQUEsU0FBQUYsR0FDQSxNQUFBbkQsSUFDQUUsT0FBQSxPQUNBQyxJQUFBLFdBQ0FpRCxNQUFBRCxHQUFBQSxNQUlBRyxFQUFBLFNBQUFDLEdBQ0EsTUFBQXZELElBQ0FFLE9BQUEsT0FDQUMsSUFBQSxhQUNBaUQsTUFBQUcsTUFBQUEsS0FJQSxRQUNBTixVQUFBQSxFQUNBQyxTQUFBQSxFQUNBRyxRQUFBQSxFQUNBQyxVQUFBQSxNQUlBbEQsT0FBQSxjQUFBLFVBQUEsU0FBQUMsR0FDQSxNQUFBLFVBQUFDLEVBQUFDLEdBQ0EsSUFBQUQsRUFBQSxNQUFBQSxFQUVBLElBQUFFLEdBQUFILEVBQUEsU0FBQUMsRUFBQUMsR0FDQUUsRUFBQSxFQUNBbkIsU0FBQW9CLFVBQUFILEtBQ0FFLEVBQUEsWUFBQUYsRUFBQSxJQUdBLElBQUFJLEdBQUEsOEJBQ0FILEdBQUFGLEVBQUFNLFFBQUFELEVBQUEsaURBQUFGLEVBQUEsV0FFQSxJQUFBSSxHQUFBLCtCQUVBLE9BREFMLEdBQUFBLEVBQUFJLFFBQUFDLEVBQUEscUNBQUFKLEVBQUEsZ0JDdkRBcEIsSUFBQVUsUUFBQSxnQkFBQSxZQUFBLFFBQ0EsU0FBQXlELEVBQUF4RCxHQUNBLE9BRUF5RCxPQUFBLFNBQUFDLEdBQ0EsTUFBQTFELElBQ0FFLE9BQUEsT0FDQUMsSUFBQSxVQUNBaUQsS0FBQU0sS0FJQUMsTUFBQSxTQUFBRCxHQUVBLE1BREFaLFNBQUFDLElBQUEsV0FDQS9DLEdBQ0FFLE9BQUEsT0FDQUMsSUFBQSxTQUNBaUQsS0FBQU0sS0FJQUUsT0FBQSxTQUFBQyxHQUNBLE1BQUE3RCxJQUNBRSxPQUFBLE9BQ0FDLElBQUEsVUFDQWlELEtBQUFTLFNDekJBeEUsSUFBQVUsUUFBQSxnQkFBQSxXQUNBLE9BQ0ErRCxTQUFBLE1DRkF6RSxJQUFBVSxRQUFBLFdBQUEsV0FDQSxPQUNBZ0UsU0FBQSxFQUNBQyxXQUFBLEVBQ0FDLFlBQUEsRUFDQUMsUUFBQSxLQ0xBN0UsSUFBQU0sV0FBQSxrQkFBQSxTQUFBLGVBQUEsZ0JBQUEsaUJBQUEsbUJBQUEsb0JBQUEsV0FBQSxZQUFBLE9BQUEsV0FBQSxlQUNBLFNBQUF3RSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBakIsRUFBQWtCLEVBQUFDLEVBQUFDLEdBRUFULEVBQUFVLFFBRUFWLEVBQUFMLFFBQUFNLEVBRUFELEVBQUFXLFNBQUFMLEVBRUFOLEVBQUFZLFFBQUEsRUFFQXpGLFFBQUEwRixRQUFBQyxVQUFBQyxNQUFBLFNBQUFDLEdBQ0FoQixFQUFBWSxRQUFBLEdBR0EsSUFBQUssR0FBQSxTQUFBaEMsRUFBQWlDLEVBQUFDLEdBQ0EsR0FDQUMsR0FBQUMsRUFBQWhELEVBREFpRCxJQTZDQSxPQTNDQW5HLFNBQUFvRyxRQUFBdEMsRUFBQSxTQUFBdUMsR0FDQSxHQUFBQyxJQUFBLENBQ0EsWUFBQVAsRUFDQU0sRUFBQXhGLElBQUEwRixTQUFBLFFBQ0FyRCxHQUNBc0QsVUFBQUgsRUFBQXhGLElBQUE0RixVQUFBLEVBQUFKLEVBQUFoRSxRQUNBMEQsS0FBQSxTQUNBVyxNQUFBTCxFQUFBSyxNQUNBQyxTQUFBTixFQUFBTyxZQUNBQyxXQUFBLEdBQUFDLE1BQUEsSUFBQVQsRUFBQU8sYUFDQUcsWUFBQUMsT0FBQSxHQUFBRixNQUFBLElBQUFULEVBQUFPLGNBQUFLLFVBQ0FwRyxJQUFBLG9CQUFBd0YsRUFBQWEsV0FJQVosR0FBQSxFQUVBLFlBQUFQLEVBQ0E3QyxHQUNBbEMsS0FBQXFGLEVBQUFyRixLQUNBNkYsV0FBQSxHQUFBQyxNQUFBVCxFQUFBUSxZQUNBRSxZQUFBQyxPQUFBLEdBQUFGLE1BQUFULEVBQUFRLGFBQUFJLFVBQ0FsQixLQUFBQSxFQUNBM0IsTUFBQStDLFlBQUFkLEVBQUFqQyxLQUFBK0MsYUFDQUMsT0FBQWYsRUFBQWUsU0FFQSxjQUFBckIsR0FBQSxlQUFBQSxLQUNBTSxFQUFBZ0IsT0FDQW5CLEVBQUFkLEVBQUFrQyxZQUFBakIsRUFBQWdCLE9BQ0FwQixFQUFBRCxFQUFBLEdBQUFjLE1BQUEsSUFBQVQsRUFBQWtCLE1BQUEsR0FBQVQsTUFBQVQsRUFBQWtCLE1BQ0FyRSxHQUNBc0UsTUFBQXRCLEVBQ0FXLFdBQUFaLEVBQ0FjLFlBQUFDLE9BQUFmLEdBQUFnQixVQUNBbEIsS0FBQUEsSUFHQU8sR0FBQSxHQUdBQSxFQUFBSCxFQUFBOUMsS0FBQUgsR0FBQSxPQUdBaUQsRUFHQXRCLEdBQUE0QyxZQUFBLFdBQ0EsR0FBQXJELEdBQUFzRCxhQUFBQyxRQUFBLEtBQ0EsT0FBQXZELElBR0EsTUFGQUYsR0FBQTBELEtBQUEsU0FNQS9DLEVBQUFsQixVQUFBLFdBQ0FxQixFQUFBckIsWUFBQTlCLEtBQUEsU0FBQWlDLEdBQ0EsR0FBQStELE1BQUFDLFFBQUFoRSxFQUFBQSxNQUFBLENBQ0EsR0FBQWlFLEdBQUFqQyxFQUFBaEMsRUFBQUEsS0FBQSxVQUNBZSxHQUFBVSxLQUFBbEMsS0FBQTJFLE1BQUFuRCxFQUFBVSxLQUFBd0MsT0FLQWxELEVBQUFqQixTQUFBLFNBQUFDLEdBQ0FtQixFQUFBcEIsU0FBQUMsR0FBQWhDLEtBQUEsU0FBQW9HLEdBQ0F6RSxRQUFBQyxJQUFBd0UsTUFJQXBELEVBQUFkLFFBQUEsU0FBQUYsR0FDQW1CLEVBQUFqQixRQUFBRixHQUFBaEMsS0FBQSxTQUFBb0csR0FDQXpFLFFBQUFDLElBQUF3RSxNQUlBcEQsRUFBQWIsVUFBQSxTQUFBQyxHQUVBLElBQUEsR0FEQWlFLEdBQUFqRSxFQUFBa0UsTUFBQSxJQUNBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUE3RixPQUFBK0YsSUFDQSxPQUFBRixFQUFBRSxJQUNBLElBQUEsSUFDQUYsRUFBQUUsR0FBQSxLQUNBLE1BQ0EsS0FBQSxJQUNBRixFQUFBRSxHQUFBLEtBQ0EsTUFDQSxLQUFBLElBQ0FGLEVBQUFFLEdBQUEsS0FDQSxNQUNBLEtBQUEsSUFDQUYsRUFBQUUsR0FBQSxLQUNBLE1BQ0EsS0FBQSxJQUNBRixFQUFBRSxHQUFBLEtBQ0EsTUFDQSxLQUFBLElBQ0FGLEVBQUFFLEdBQUEsS0FDQSxNQUNBLFNBQ0FGLEVBQUFFLEdBQUFGLEVBQUFFLEdBU0FuRSxFQUFBaUUsRUFBQUcsS0FBQSxJQUNBckQsRUFBQWhCLFVBQUFDLEdBQUFwQyxLQUFBLFNBQUFvRyxHQUNBekUsUUFBQUMsSUFBQXdFLE1BSUFwRCxFQUFBbEUsYUFBQSxXQUNBc0UsRUFBQXRFLGVBQUFrQixLQUFBLFNBQUFpQyxHQUNBLEdBQUFpRSxHQUFBakMsRUFBQWhDLEVBQUFBLEtBQUFBLEtBQUEsYUFBQSxFQUNBZSxHQUFBVSxLQUFBbEMsS0FBQTJFLE1BQUFuRCxFQUFBVSxLQUFBd0MsR0FDQWpFLEVBQUFBLEtBQUF3RSxjQUNBekQsRUFBQWxFLGtCQUtBa0UsRUFBQTBELGFBQUEsV0FDQXJELEVBQUF4QixXQUFBN0IsS0FBQSxTQUFBaUMsR0FDQSxHQUFBaUUsR0FBQWpDLEVBQUFoQyxFQUFBQSxLQUFBQSxLQUFBLGFBQ0FlLEdBQUFVLEtBQUFsQyxLQUFBMkUsTUFBQW5ELEVBQUFVLEtBQUF3QyxHQUNBakUsRUFBQUEsS0FBQXdFLGNBQ0F6RCxFQUFBMEQsa0JBS0ExRCxFQUFBckQsY0FBQSxXQUNBa0csYUFBQWMsY0FDQXpELEVBQUF2RCxnQkFBQUssS0FBQSxTQUFBaUMsR0FDQSxHQUFBK0QsTUFBQUMsUUFBQWhFLEVBQUFBLE1BQUEsQ0FDQSxHQUFBaUUsR0FBQWpDLEVBQUFoQyxFQUFBQSxLQUFBLFNBQ0FlLEdBQUFVLEtBQUFsQyxLQUFBMkUsTUFBQW5ELEVBQUFVLEtBQUF3QyxPQU1BbEQsRUFBQTRELE9BQUEsU0FBQTFDLEdBQ0EsR0FBQTJDLElBQUEsQ0FXQSxJQVRBLFdBQUEzQyxHQUFBaEIsRUFBQXlELGdCQUFBLElBQ0F6RCxFQUFBeUQsY0FBQSxHQUVBeEksUUFBQW9HLFFBQUF2QixFQUFBVSxLQUFBLFNBQUFvRCxHQUNBQSxFQUFBNUMsT0FBQUEsSUFDQTJDLEdBQUEsS0FJQUEsS0FBQSxFQUNBdkQsRUFBQVksSUFBQVosRUFBQVksT0FDQSxDQUNBMkIsYUFBQUMsUUFBQSxLQUNBLFFBQUE1QixHQUNBLElBQUEsVUFDQTZDLE9BQUFDLFNBQUFDLEtBQUEsV0FDQSxNQUNBLEtBQUEsWUFDQUYsT0FBQUMsU0FBQUMsS0FBQSxTQUNBLE1BQ0EsS0FBQSxhQUNBRixPQUFBQyxTQUFBQyxLQUFBLFFBQ0EsTUFDQSxLQUFBLFNBQ0FwQixhQUFBYyxjQUFBLEVBQ0EzRCxFQUFBckQsbUJBTUFxRCxFQUFBa0UsWUFBQSxXQUNBSCxPQUFBSSxRQUFBQyxHQUFBLElBR0FwRSxFQUFBcUUsWUFBQSxXQUNBcEUsRUFBQU4sU0FBQU0sRUFBQU4sU0FHQUssRUFBQVAsT0FBQSxXQUNBLEdBQUE2RSxHQUFBekIsYUFBQUMsUUFBQSxLQUNBckMsR0FBQWhCLFFBQUE4RSxHQUFBRCxJQUNBdEgsS0FBQSxTQUFBd0gsR0FDQTNCLGFBQUE0QixRQUNBcEYsRUFBQTBELEtBQUEsVUFIQXRDLFNBS0EsU0FBQWlFLEdBQ0EvRixRQUFBQyxJQUFBOEYsU0NyTkF4SixJQUFBTSxXQUFBLGtCQUFBLFNBQUEsZUFBQSxZQUFBLFVBQUEsU0FBQXdFLEVBQUFTLEVBQUFwQixFQUFBc0YsR0FFQTNFLEVBQUE0RSxVQUFBLFdBQ0EsTUFBQUQsR0FBQUUsYUFHQTdFLEVBQUE4RSxPQUFBOUUsRUFBQTRFLFVBQUEsU0FBQUcsRUFBQUMsR0FDQWhGLEVBQUFpRixhQUFBRixJQUdBL0UsRUFBQWtGLFVBQ0FDLE9BQUEsSUFHQW5GLEVBQUFvRixNQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQS9GLElBQUE4RixTQUFBQSxFQUFBQyxTQUFBQSxFQUNBN0UsR0FBQWpCLE1BQUFELEdBQ0F2QyxLQUFBLFNBQUF3SCxHQUNBLG9DQUFBQSxFQUFBdkYsTUFDQU4sUUFBQUMsSUFBQSxrQ0FDQW9CLEVBQUFrRixTQUFBQyxPQUFBLGtDQUNBbkYsRUFBQXVGLFVBQUFDLGdCQUNBaEIsRUFBQXZGLEtBQUF3RyxhQUNBOUcsUUFBQUMsSUFBQSxhQUFBNEYsRUFBQXZGLE1BQ0E0RCxhQUFBNkMsUUFBQSxLQUFBbEIsRUFBQXZGLEtBQUF3RyxZQUNBcEcsRUFBQTBELEtBQUEsV0FUQXRDLFNBWUEsU0FBQXRELEdBQ0EsS0FBQSxNQUlBNkMsRUFBQTJGLE9BQUEsU0FBQU4sRUFBQUMsR0FDQSxHQUFBL0YsSUFBQThGLFNBQUFBLEVBQUFDLFNBQUFBLEVBQ0E3RSxHQUFBbkIsT0FBQUMsR0FDQXZDLEtBQUEsU0FBQXdILEdBQ0EseUJBQUFBLEVBQUF2RixNQUNBTixRQUFBQyxJQUFBLHdCQUNBb0IsRUFBQWtGLFNBQUFDLE9BQUEsa0NBQ0FuRixFQUFBdUYsVUFBQUMsaUJBRUE3RyxRQUFBQyxJQUFBLGNBQUE0RixFQUFBdkYsTUFDQTRELGFBQUE2QyxRQUFBLEtBQUFsQixFQUFBdkYsS0FBQXdHLFlBQ0FwRyxFQUFBMEQsS0FBQSxXQVRBdEMsU0FZQSxTQUFBdEQsR0FDQSxLQUFBLFNDaERBakMsSUFBQU0sV0FBQSxvQkFBQSxTQUFBLGdCQUFBLFNBQUF3RSxFQUFBNEYsR0FDQTVGLEVBQUE2RixTQUVBRCxFQUFBL0ksYUFBQUcsS0FBQSxTQUFBSyxHQUNBMkMsRUFBQTZGLE1BQUEsV0FDQTNJLFVBQUFHLEVBQUEsS0FBQSxPQUFBLFlBQ0FKLFVBQUFJLEVBQUEsS0FBQSxPQUFBLFdBSUF1SSxFQUFBOUkscUJBQUFFLEtBQUEsU0FBQUssR0FDQTJDLEVBQUE2RixNQUFBLFlBQ0EzSSxVQUFBRyxFQUFBLEtBQUEsZ0JBQ0FKLFVBQUFJLEVBQUEsS0FBQSxvQkFJQXVJLEVBQUE3SSxrQkFBQUMsS0FBQSxTQUFBSyxHQUNBMkMsRUFBQTZGLE1BQUEsU0FDQTNJLFVBQUFHLEVBQUEsVUFBQSxLQUFBLElBQUFHLE9BQ0FQLFVBQUFJLEVBQUEsVUFBQSxLQUFBLElBQUFHLFVBSUFvSSxFQUFBbEksaUJBQ0FWLEtBQUEsU0FBQThJLEdBQUE5RixFQUFBNkYsTUFBQUMsT0N6QkE1SyxJQUFBZSxPQUFBLGNBQUEsV0FBQSxTQUFBcUUsR0FDQSxNQUFBLFVBQUF5RixHQUNBLEdBQUFDLEtBU0EsT0FSQTdLLFNBQUFvRyxRQUFBd0UsRUFBQSxTQUFBakMsR0FDQXhELEVBQUF3RCxFQUFBNUMsU0FBQSxJQUNBLGNBQUE0QyxFQUFBNUMsTUFDQTZDLE9BQUFrQyxRQUFBQyxPQUFBQyxVQUVBSCxFQUFBeEgsS0FBQXNGLE1BR0FrQyxNQ1hBOUssSUFBQWtMLFVBQUEsWUFBQSxnQkFBQSxVQUFBLFdBQ0EsU0FBQVIsRUFBQWpCLEVBQUFuRSxHQUNBLE9BQ0E2RixTQUFBLElBQ0FDLFNBRUFDLEtBQUEsU0FBQUQsRUFBQUUsRUFBQUMsR0FDQSxHQUFBQyxNQUNBQyxLQUNBQyxLQUNBQyxFQUFBQyxHQUFBQyxPQUFBUCxFQUFBLElBQ0EvRSxPQUFBLE9BQ0F1RixPQUFBQyxNQUFBLE9BQUFDLE9BQUEsU0FDQUMsR0FDQXJILFlBQUEsVUFBQSxHQUNBRixTQUFBLFVBQUEsR0FDQUMsV0FBQSxVQUFBLEdBRUErRixHQUFBbEksaUJBQ0FWLEtBQUEsU0FBQW9LLEdBQ0EsR0FBQUMsR0FBQSxFQUNBQyxFQUFBLENBQ0FuTSxTQUFBb0csUUFBQTZGLEVBQUEsU0FBQTdELEdBQ0E0RCxFQUFBNUQsRUFBQTlFLFFBQUEwSSxFQUFBNUQsRUFBQTlFLE9BQUEsS0FDQThFLEVBQUE3RSxTQUNBNEksR0FBQS9ELEVBQUE3RSxPQUFBekIsVUFDQW9LLEdBQUE5RCxFQUFBN0UsT0FBQXhCLFVBQ0F3SixFQUFBbEksTUFBQTBDLEtBQUFxQyxFQUFBOUUsTUFBQXZCLFVBQUFxRyxFQUFBN0UsT0FBQXhCLFlBQ0F5SixFQUFBbkksTUFBQTBDLEtBQUFxQyxFQUFBOUUsTUFBQXhCLFVBQUFzRyxFQUFBN0UsT0FBQXpCLGVBR0EySixFQUFBcEksTUFBQTBDLEtBQUEsa0JBQUFxRyxNQUFBRixJQUNBVCxFQUFBcEksTUFBQTBDLEtBQUEsa0JBQUFxRyxNQUFBRCxNQUVBdEssS0FBQSxXQUVBd0ssR0FBQUMsU0FBQSxXQUVBLEdBQUFDLEdBQUFGLEdBQUFHLE9BQUFDLFdBQ0FDLEVBQUEsU0FBQS9CLEdBQUEsTUFBQUEsR0FBQTVFLE9BQ0E0RyxFQUFBLFNBQUFoQyxHQUFBLE1BQUFBLEdBQUE1SSxZQUNBNkssTUFBQSxTQUFBakMsR0FBQSxNQUFBcUIsR0FBQXJCLEVBQUE1RSxNQUFBLEtBQ0E4RyxZQUFBLEdBQ0FDLFlBQUEsR0FDQUMsZUFBQSxLQUNBQyxVQUFBLFdBQ0FDLE9BQUEsR0FDQUMsV0FBQSxJQVFBLE9BTkF2QixJQUFBQyxPQUFBLFlBQ0F1QixNQUFBNUIsR0FDQTZCLGFBQUFDLFNBQUEsS0FDQUMsS0FBQWYsR0FFQUEsRUFBQWdCLFlBQUE1QixHQUFBNkIsT0FBQSxNQUNBakIsSUFFQUYsR0FBQUMsU0FBQSxXQUNBLEdBQUFtQixHQUFBcEIsR0FBQUcsT0FBQUMsV0FDQUMsRUFBQSxTQUFBL0IsR0FBQSxNQUFBQSxHQUFBNUUsT0FDQTRHLEVBQUEsU0FBQWhDLEdBQUEsTUFBQUEsR0FBQTdJLFlBQ0E4SyxNQUFBLFNBQUFqQyxHQUFBLE1BQUFxQixHQUFBckIsRUFBQTVFLE1BQUEsS0FDQThHLFlBQUEsR0FDQUMsWUFBQSxHQUNBQyxlQUFBLEtBQ0FDLFVBQUEsV0FDQUMsT0FBQSxHQUNBQyxXQUFBLElBT0EsT0FMQXZCLElBQUFDLE9BQUEsYUFDQXVCLE1BQUEzQixHQUNBNEIsYUFBQUMsU0FBQSxLQUNBQyxLQUFBRyxHQUNBQSxFQUFBRixZQUFBNUIsR0FBQTZCLE9BQUEsTUFDQUMsSUFFQXBCLEdBQUFDLFNBQUEsV0FDQSxHQUFBb0IsR0FBQXJCLEdBQUFHLE9BQUFDLFdBQ0FDLEVBQUEsU0FBQS9CLEdBQUEsTUFBQUEsR0FBQTVFLE9BQ0E0RyxFQUFBLFNBQUFoQyxHQUFBLE1BQUFBLEdBQUF5QixRQUVBUyxZQUFBLEdBQ0FDLFlBQUEsR0FDQUMsZUFBQSxLQUNBQyxVQUFBLFdBQ0FDLE9BQUEsR0FDQUMsV0FBQSxJQU9BLE9BTEF2QixJQUFBQyxPQUFBLGFBQ0F1QixNQUFBMUIsR0FDQTJCLGFBQUFDLFNBQUEsS0FDQUMsS0FBQUksR0FDQUEsRUFBQUgsWUFBQTVCLEdBQUE2QixPQUFBLE1BQ0FFLEtBSUEsSUFBQUMsR0FBQWpDLEVBQUFrQyxVQUFBLFNBQUE5SixNQUFBLEdBQ0E2SixHQUFBRSxRQUNBdkgsT0FBQSxhQUNBd0gsS0FBQSxhQUFBLDJCQUNBQSxLQUFBLElBQUEsS0FDQUEsS0FBQSxJQUFBLEtBQ0FBLEtBQUEsUUFBQSxRQUNBQSxLQUFBLFNBQUEsT0FFQTNDLEVBQUE0QyxPQUFBLFNBQUFqSyxHQUNBNEgsRUFBQWtDLFVBQUEsS0FBQUkiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyXG4gIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdSb3V0ZScsXG4gICAgJ25nU2FuaXRpemUnLFxuICAgICdwYWdlc2xpZGUtZGlyZWN0aXZlJ1xuICBdKVxuICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgIC53aGVuKCAnLycsIHtcbiAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICAgJ3N0YXRpYy92aWV3cy9ob21lLmh0bWwnICAgICAgXG4gICAgICB9KVxuXG4gICAgICAud2hlbignL2ZlZWQnLCB7IFxuICAgICAgICBjb250cm9sbGVyOiAnRmVlZENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy92aWV3cy9mZWVkLmh0bWwnXG4gICAgICB9KVxuXG4gICAgICAud2hlbignL3Rlc3QnLCB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdTbGlkZXJDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvdmlld3MvdGVzdC5odG1sJ1xuICAgICAgfSlcblxuICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgfSk7XG5cbiAgfV0pO1xuIiwiYXBwLmZhY3RvcnkoJ0luc3RhZ3JhbUZhY3RvcnknLCBbJyRodHRwJywgZnVuY3Rpb24gKCAkaHR0cCApIHtcblxuICB2YXIgZ2V0SW5zdGFGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy9pbnN0YWdyYW0vZmVlZCdcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldEluc3RhRmVlZDogZ2V0SW5zdGFGZWVkXG4gIH07XG59XSlcbiAgLmZpbHRlcignaW5zdGFMaW5reScsWyckZmlsdGVyJywgZnVuY3Rpb24oJGZpbHRlcikge1xuICAgIHJldHVybiBmdW5jdGlvbih0ZXh0LCB0YXJnZXQpIHtcbiAgICAgIGlmICghdGV4dCkgcmV0dXJuIHRleHQ7XG5cbiAgICAgIHZhciByZXBsYWNlZFRleHQgPSAkZmlsdGVyKCdsaW5reScpKHRleHQsIHRhcmdldCk7XG4gICAgICB2YXIgdGFyZ2V0QXR0ciA9IFwiXCI7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGFyZ2V0KSkge1xuICAgICAgICAgIHRhcmdldEF0dHIgPSAnIHRhcmdldD1cIicgKyB0YXJnZXQgKyAnXCInO1xuICAgICAgfVxuICAgICAgLy8gcmVwbGFjZSAjaGFzaHRhZ3MgYW5kIHNlbmQgdGhlbSB0byB0d2l0dGVyXG4gICAgICB2YXIgcmVwbGFjZVBhdHRlcm4xID0gLyhefFxccykjKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gdGV4dC5yZXBsYWNlKHJlcGxhY2VQYXR0ZXJuMSwgJyQxPGEgaHJlZj1cImh0dHBzOi8vaW5zdGFncmFtLmNvbS9leHBsb3JlL3RhZ3MvJDJcIicgKyB0YXJnZXRBdHRyICsgJz4jJDI8L2E+Jyk7XG4gICAgICAvLyByZXBsYWNlIEBtZW50aW9ucyBidXQga2VlcCB0aGVtIHRvIG91ciBzaXRlXG4gICAgICB2YXIgcmVwbGFjZVBhdHRlcm4yID0gLyhefFxccylcXEAoXFx3KlthLXpBLVpfXStcXHcqKS9naW07XG4gICAgICByZXBsYWNlZFRleHQgPSByZXBsYWNlZFRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjIsICckMTxhIGhyZWY9XCJodHRwczovL2luc3RhZ3JhbS5jb20vJDJcIicgKyB0YXJnZXRBdHRyICsgJz5AJDI8L2E+Jyk7XG4gICAgICByZXR1cm4gcmVwbGFjZWRUZXh0O1xuICAgIH07XG4gIH1cbl0pO1xuICAiLCJhcHAuZmFjdG9yeSgnUmVkZGl0RmFjdG9yeScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoICRodHRwICkge1xuXG4gIHZhciBnZXRSZWRkaXRGZWVkID0gZnVuY3Rpb24gKCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy9yZWRkaXQvaG90J1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0UmVkZGl0RmVlZDogZ2V0UmVkZGl0RmVlZFxuICB9O1xufV0pOyIsImFwcC5mYWN0b3J5KCdTbGlkZXJGYWN0b3J5JywgWyckaHR0cCcsJyRxJywgZnVuY3Rpb24gKCAkaHR0cCwgJHEgKSB7XG5cbiAgdmFyIGdldElnU3RhdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICRodHRwKHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgdXJsIDogJy9pbnN0YWdyYW0vc3RhdHMnXG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldFNvdW5kY2xvdWRTdGF0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICB1cmwgOiAnL3NvdW5kY2xvdWQvc3RhdHMnXG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldFR3aXR0ZXJTdGF0cyA9IGZ1bmN0aW9uICgpIHsgXG4gICAgLy91Z2x5IHdpbGwgcmVmYWN0b3IgYnV0IG5vdCBub3cgOihcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICB1cmwgOiAnL3R3aXR0ZXIvZm9sbG93aW5nJ1xuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24oZm9sbG93aW5nKXtcbiAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICAgICAgdXJsOiAnL3R3aXR0ZXIvZm9sbG93ZXJzJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGZvbGxvd2Vycyl7XG4gICAgICAgICAgcmV0dXJuIHtmb2xsb3dlcnM6Zm9sbG93ZXJzLCBmb2xsb3dpbmc6Zm9sbG93aW5nfVxuICAgICAgICB9KVxuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICByZXR1cm4gZXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBfaW5zdGFncmFtRm9sbG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRJZ1N0YXRzKCkudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgaWYoclsnZGF0YSddWydjb3VudHMnXT09PXVuZGVmaW5lZCl7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ2ZvbGxvd2VycycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dlZF9ieSddLFxuICAgICAgICAnZm9sbG93aW5nJyA6IHJbJ2RhdGEnXVsnY291bnRzJ11bJ2ZvbGxvd3MnXVxuICAgICAgfTtcblxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBfdHdpdHRlckZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0VHdpdHRlclN0YXRzKCkudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgaWYoclsnZm9sbG93ZXJzJ11bJ2RhdGEnXVsnaWRzJ109PT11bmRlZmluZWQpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgICdmb2xsb3dlcnMnIDogclsnZm9sbG93ZXJzJ11bJ2RhdGEnXVsnaWRzJ10ubGVuZ3RoLFxuICAgICAgICAnZm9sbG93aW5nJyA6IHJbJ2ZvbGxvd2luZyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aFxuICAgICAgfTsgXG4gICAgICBcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgX3NvdW5kY2xvdWRGb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFNvdW5kY2xvdWRTdGF0cygpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIGlmKHJbJ2RhdGEnXVsnZm9sbG93ZXJzX2NvdW50J109PT11bmRlZmluZWQpe1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ2ZvbGxvd2VycycgOiByWydkYXRhJ11bJ2ZvbGxvd2Vyc19jb3VudCddLFxuICAgICAgICAnZm9sbG93aW5nJyA6IHJbJ2RhdGEnXVsnZm9sbG93aW5nc19jb3VudCddXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldEZvbGxvd1N0YXRzID0gZnVuY3Rpb24gKG1lZGlhT2JqKSB7XG4vL1NvcnJ5ISEgc28gYmFkLiBQcm9taXNlIHRyZWUuIGxvdmUgeW91IVxuICAgIHJldHVybiAkcShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgYmFzZSA9IHt9O1xuICAgICAgX2luc3RhZ3JhbUZvbGxvdyhiYXNlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihpZyl7XG4gICAgICAgICAgICBiYXNlWydpbnN0YWdyYW0nXSA9IGlnO1xuICAgICAgICAgIF9zb3VuZGNsb3VkRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzYyl7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IHNjO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdyhiYXNlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHR3KXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IHR3O1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0d2l0dGVyRXJyKXtcbiAgICAgICAgICAgICAgICAgIGJhc2VbJ3R3aXR0ZXInXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHNvdW5kY2xvdWRFcnIpe1xuICAgICAgICAgICAgICBiYXNlWydzb3VuZGNsb3VkJ10gPSBudWxsO1xuICAgICAgICAgICAgICBfdHdpdHRlckZvbGxvdygpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihpZ0Vycm9yKXtcbiAgICAgICAgICBiYXNlWydpbnN0YWdyYW0nXSA9IG51bGw7XG4gICAgICAgICAgX3NvdW5kY2xvdWRGb2xsb3coYmFzZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHNjKXtcbiAgICAgICAgICAgICAgYmFzZVsnc291bmRjbG91ZCddID0gc2M7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KGJhc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHcpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gdHc7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHR3aXR0ZXJFcnIpe1xuICAgICAgICAgICAgICAgICAgYmFzZVsndHdpdHRlciddID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oc291bmRjbG91ZEVycil7XG4gICAgICAgICAgICAgIGJhc2VbJ3NvdW5kY2xvdWQnXSA9IG51bGw7XG4gICAgICAgICAgICAgIF90d2l0dGVyRm9sbG93KClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih0dyl7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSB0dztcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmFzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odHdpdHRlckVycil7XG4gICAgICAgICAgICAgICAgICBiYXNlWyd0d2l0dGVyJ10gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShiYXNlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24gKG9iaikge1xuICAgICAgdmFyIGFyciA9IFtdXG4gICAgICBmb3IodmFyIGtleSBpbiBvYmope1xuICAgICAgICBhcnIucHVzaCh7bWVkaWE6a2V5LCBjb3VudHM6IG9ialtrZXldfSlcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGFycik7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0U291bmRjbG91ZFN0YXRzIDogZ2V0U291bmRjbG91ZFN0YXRzLFxuICAgIGdldElnU3RhdHMgOiBnZXRJZ1N0YXRzLFxuICAgIGdldFR3aXR0ZXJTdGF0cyA6IGdldFR3aXR0ZXJTdGF0cyxcbiAgICBnZXRGb2xsb3dTdGF0cyA6IGdldEZvbGxvd1N0YXRzXG4gIH07XG5cbn1dKTtcbiIsImFwcC5mYWN0b3J5KCdTb3VuZENsb3VkRmFjdG9yeScsIFsnJGh0dHAnLCBmdW5jdGlvbiAgKCRodHRwKSB7XG4gIHZhciBnZXRTb25ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICB1cmwgOiAnL3NvdW5kU3RyZWFtJ1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0U29uZ3M6IGdldFNvbmdzXG4gIH07XG59XSk7IiwiYXBwLmZhY3RvcnkoJ1R3aXR0ZXJGYWN0b3J5JyxbJyRodHRwJywgZnVuY3Rpb24gKCAkaHR0cCApIHtcblxuICB2YXIgZ2V0VHdlZXRzID0gZnVuY3Rpb24gKCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy90d2VldHNmZWVkJ1xuICAgIH0pO1xuICB9O1xuIFxuICB2YXIgZmF2VHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJy9mYXZ0d2VldCcsXG4gICAgICBkYXRhOiB7IGlkOiBpZCB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlVHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIHJldHVybiAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogJy9yZXR3ZWV0JyxcbiAgICAgIGRhdGE6IHsgaWQ6IGlkIH1cbiAgICB9KTtcbiAgfTtcblxuICB2YXIgcG9zdFR3ZWV0ID0gZnVuY3Rpb24gKCB0d2VldCApIHtcbiAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmw6ICcvcG9zdHR3ZWV0JyxcbiAgICAgIGRhdGE6IHsgdHdlZXQ6IHR3ZWV0fVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0VHdlZXRzOiBnZXRUd2VldHMsXG4gICAgZmF2VHdlZXQ6IGZhdlR3ZWV0LFxuICAgIHJlVHdlZXQ6IHJlVHdlZXQsXG4gICAgcG9zdFR3ZWV0OiBwb3N0VHdlZXRcbiAgfTtcblxufV0pXG4gIC5maWx0ZXIoJ3R3ZWV0TGlua3knLFsnJGZpbHRlcicsIGZ1bmN0aW9uKCRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0KSB7XG4gICAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuXG4gICAgICB2YXIgcmVwbGFjZWRUZXh0ID0gJGZpbHRlcignbGlua3knKSh0ZXh0LCB0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldEF0dHIgPSBcIlwiO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICB0YXJnZXRBdHRyID0gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIC8vIHJlcGxhY2UgI2hhc2h0YWdzIGFuZCBzZW5kIHRoZW0gdG8gdHdpdHRlclxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMSA9IC8oXnxcXHMpIyhcXHcqW2EtekEtWl9dK1xcdyopL2dpbTtcbiAgICAgIHJlcGxhY2VkVGV4dCA9IHRleHQucmVwbGFjZShyZXBsYWNlUGF0dGVybjEsICckMTxhIGhyZWY9XCJodHRwczovL3R3aXR0ZXIuY29tL3NlYXJjaD9xPSUyMyQyXCInICsgdGFyZ2V0QXR0ciArICc+IyQyPC9hPicpO1xuICAgICAgLy8gcmVwbGFjZSBAbWVudGlvbnMgYnV0IGtlZXAgdGhlbSB0byBvdXIgc2l0ZVxuICAgICAgdmFyIHJlcGxhY2VQYXR0ZXJuMiA9IC8oXnxcXHMpXFxAKFxcdypbYS16QS1aX10rXFx3KikvZ2ltO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UocmVwbGFjZVBhdHRlcm4yLCAnJDE8YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS8kMlwiJyArIHRhcmdldEF0dHIgKyAnPkAkMjwvYT4nKTtcbiAgICAgIHJldHVybiByZXBsYWNlZFRleHQ7XG4gICAgfTtcbiAgfVxuXSk7IiwiYXBwLmZhY3RvcnkoJ1VzZXJzRmFjdG9yeScsIFsnJGxvY2F0aW9uJywgJyRodHRwJywgIFxuICBmdW5jdGlvbigkbG9jYXRpb24sICRodHRwKSB7XG4gICAgcmV0dXJuIHtcblxuICAgICAgc2lnbnVwOiBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvc2lnbnVwJyxcbiAgICAgICAgICBkYXRhOiB1c2VyXG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgbG9naW46IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICBjb25zb2xlLmxvZygnZmFjdG9yeScpO1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgZGF0YTogdXNlclxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGxvZ291dDogZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICcvbG9nb3V0JyxcbiAgICAgICAgICBkYXRhOiB0b2tlblxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiYXBwLmZhY3RvcnkoJ1BhbmVsRmFjdG9yeScsW2Z1bmN0aW9uICggKSB7XG4gIHJldHVybiB7XG4gICAgJ2NoZWNrZWQnOiBmYWxzZVxuICB9O1xufV0pOyIsImFwcC5mYWN0b3J5KCdQb3N0VHlwZScsIGZ1bmN0aW9uICggKSB7XG4gIHJldHVybiB7XG4gICAgJ3R3aXR0ZXInOiBmYWxzZSxcbiAgICAnaW5zdGFncmFtJzogZmFsc2UsXG4gICAgJ3NvdW5kY2xvdWQnOiBmYWxzZSxcbiAgICAncmVkZGl0JzpmYWxzZVxuICB9O1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0ZlZWRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnUGFuZWxGYWN0b3J5JywgJ1JlZGRpdEZhY3RvcnknLCdUd2l0dGVyRmFjdG9yeScsICdJbnN0YWdyYW1GYWN0b3J5JywgJ1NvdW5kQ2xvdWRGYWN0b3J5JywgJ1Bvc3RUeXBlJywgJyRsb2NhdGlvbicsICckc2NlJywgJyR0aW1lb3V0JywgJ1VzZXJzRmFjdG9yeScsIFxuICBmdW5jdGlvbiAoICRzY29wZSwgUGFuZWxGYWN0b3J5LCBSZWRkaXRGYWN0b3J5LCBUd2l0dGVyRmFjdG9yeSwgSW5zdGFncmFtRmFjdG9yeSwgU291bmRDbG91ZEZhY3RvcnksIFBvc3RUeXBlLCAkbG9jYXRpb24sICRzY2UsICR0aW1lb3V0LCBVc2Vyc0ZhY3RvcnkgKSB7XG5cbiAgJHNjb3BlLmZlZWQgPSBbXTtcblxuICAkc2NvcGUuY2hlY2tlZCA9IFBhbmVsRmFjdG9yeTsgICAvLyBUaGlzIHdpbGwgYmUgYmluZGVkIHVzaW5nIHRoZSBwcy1vcGVuIGF0dHJpYnV0ZVxuXG4gICRzY29wZS5wb3N0VHlwZSA9IFBvc3RUeXBlO1xuXG4gICRzY29wZS5sb2FkZXIgPSBmYWxzZTtcblxuICBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uIChhcmcpIHtcbiAgICAkc2NvcGUubG9hZGVyID0gdHJ1ZTtcbiAgfSk7XG5cbiAgdmFyIGJ1aWxkRmVlZCA9IGZ1bmN0aW9uIChkYXRhLCB0eXBlLCBkYXRlKSB7IFxuICAgIHZhciB0aGVGZWVkICA9IFtdLCBcbiAgICAgICB0aGVEYXRlLCBodG1sRnJhbWUsIG9iajtcbiAgICBhbmd1bGFyLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBhcHBlbmQgPSB0cnVlO1xuICAgICAgaWYgKHR5cGUgPT09ICdyZWRkaXQnKSB7XG4gICAgICAgIGlmKGl0ZW0udXJsLmVuZHNXaXRoKCcuanBnJykpIHtcbiAgICAgICAgICBvYmogPSB7XG4gICAgICAgICAgICBpbWFnZV91cmwgOiBpdGVtLnVybC5zdWJzdHJpbmcoNSxpdGVtLmxlbmd0aCksXG4gICAgICAgICAgICB0eXBlOiAncmVkZGl0JyxcbiAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLFxuICAgICAgICAgICAgcmF3X3RpbWU6IGl0ZW0uY3JlYXRlZF91dGMsXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfdXRjICogMTAwMCksXG4gICAgICAgICAgICBkaXNwbGF5VGltZTogbW9tZW50KG5ldyBEYXRlKGl0ZW0uY3JlYXRlZF91dGMqMTAwMCkpLmZyb21Ob3coKSxcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9yZWRkaXQuY29tJysgaXRlbS5wZXJtYWxpbmtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgYXBwZW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3R3aXR0ZXInKSB7XG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgIHRleHQgOiBpdGVtLnRleHQsIFxuICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KSxcbiAgICAgICAgIGRpc3BsYXlUaW1lOiBtb21lbnQobmV3IERhdGUoaXRlbS5jcmVhdGVkX2F0KSkuZnJvbU5vdygpLCBcbiAgICAgICAgIHR5cGU6IHR5cGUsIFxuICAgICAgICAgdXNlcjoge3NjcmVlbl9uYW1lIDogaXRlbS51c2VyLnNjcmVlbl9uYW1lfSwgXG4gICAgICAgICBpZF9zdHI6IGl0ZW0uaWRfc3RyIFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmKHR5cGUgPT09ICdpbnN0YWdyYW0nIHx8IHR5cGUgPT09ICdzb3VuZGNsb3VkJyl7XG4gICAgICAgIGlmKGl0ZW0uZW1iZWQpe1xuICAgICAgICAgIGh0bWxGcmFtZSA9ICRzY2UudHJ1c3RBc0h0bWwoaXRlbS5lbWJlZCk7XG4gICAgICAgICAgdGhlRGF0ZSA9IGRhdGUgPyBuZXcgRGF0ZShpdGVtLnRpbWUgKiAxMDAwKSA6IG5ldyBEYXRlKGl0ZW0udGltZSk7XG4gICAgICAgICAgb2JqID0ge1xuICAgICAgICAgICBmcmFtZTogaHRtbEZyYW1lLCBcbiAgICAgICAgICAgY3JlYXRlZF9hdDogdGhlRGF0ZSxcbiAgICAgICAgICAgZGlzcGxheVRpbWU6IG1vbWVudCh0aGVEYXRlKS5mcm9tTm93KCksIFxuICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgfTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgYXBwZW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gXG4gICAgICBhcHBlbmQgPyB0aGVGZWVkLnB1c2gob2JqKSA6IG51bGw7XG4gICAgIFxuICAgIH0pO1xuICAgIHJldHVybiB0aGVGZWVkO1xuICB9O1xuXG4gICRzY29wZS5pc1ZhbGlkVXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdCcpO1xuICAgIGlmICghdXNlcikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJ2hvbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSAgICBcbiAgfTtcblxuICAkc2NvcGUuZ2V0VHdlZXRzID0gZnVuY3Rpb24gKCApIHtcbiAgICBUd2l0dGVyRmFjdG9yeS5nZXRUd2VldHMoKS50aGVuKGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YS5kYXRhKSl7XG4gICAgICAgIHZhciBpdGVtcyA9IGJ1aWxkRmVlZChkYXRhLmRhdGEsICd0d2l0dGVyJyk7XG4gICAgICAgICRzY29wZS5mZWVkLnB1c2guYXBwbHkoJHNjb3BlLmZlZWQsIGl0ZW1zKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuZmF2VHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIFR3aXR0ZXJGYWN0b3J5LmZhdlR3ZWV0KGlkKS50aGVuKGZ1bmN0aW9uICggcmVzcG9uc2UgKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnJlVHdlZXQgPSBmdW5jdGlvbiAoIGlkICkge1xuICAgIFR3aXR0ZXJGYWN0b3J5LnJlVHdlZXQoaWQpLnRoZW4oZnVuY3Rpb24gKCByZXNwb25zZSApIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUucG9zdFR3ZWV0ID0gZnVuY3Rpb24gKCB0d2VldCApIHtcbiAgICB2YXIgYXJyYXkgPSB0d2VldC5zcGxpdChcIlwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2goYXJyYXlbaV0pIHtcbiAgICAgICAgY2FzZSAnICc6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJTIwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQCc6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJTQwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnIyc6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJTIzJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnJic6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJTI2JztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnOic6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJjNBJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnLyc6XG4gICAgICAgICAgYXJyYXlbaV0gPSAnJTJGJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBhcnJheVtpXSA9IGFycmF5W2ldO1xuICAgICAgfVxuICAgICAgLy8gc3BhY2UgYXMgJTIwXG4gICAgICAvLyBAIGFzICU0MFxuICAgICAgLy8gIyBhcyAlMjNcbiAgICAgIC8vICYgYXMgJTI2XG4gICAgICAvLyBjb2xvbiBhcyAlM0FcbiAgICAgIC8vIGZvcndhcmQgc2xhc2ggYXMgJTJGXG4gICAgfVxuICAgIHR3ZWV0ID0gYXJyYXkuam9pbihcIlwiKTtcbiAgICBUd2l0dGVyRmFjdG9yeS5wb3N0VHdlZXQoIHR3ZWV0ICkudGhlbihmdW5jdGlvbiAoIHJlc3BvbnNlICkge1xuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5nZXRJbnN0YUZlZWQgPSBmdW5jdGlvbiAoICkge1xuICAgIEluc3RhZ3JhbUZhY3RvcnkuZ2V0SW5zdGFGZWVkKCkudGhlbihmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgICB2YXIgaXRlbXMgPSBidWlsZEZlZWQoZGF0YS5kYXRhLmRhdGEsICdpbnN0YWdyYW0nLCB0cnVlKTtcbiAgICAgICRzY29wZS5mZWVkLnB1c2guYXBwbHkoJHNjb3BlLmZlZWQsIGl0ZW1zKTtcbiAgICAgIGlmKGRhdGEuZGF0YS5pc19tb3JlX2RhdGEpIHtcbiAgICAgICAgJHNjb3BlLmdldEluc3RhRmVlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5nZXRTb3VuZEZlZWQgPSBmdW5jdGlvbiAoICkge1xuICAgIFNvdW5kQ2xvdWRGYWN0b3J5LmdldFNvbmdzKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGl0ZW1zID0gYnVpbGRGZWVkKGRhdGEuZGF0YS5kYXRhLCAnc291bmRjbG91ZCcpO1xuICAgICAgJHNjb3BlLmZlZWQucHVzaC5hcHBseSgkc2NvcGUuZmVlZCwgaXRlbXMpO1xuICAgICAgaWYoZGF0YS5kYXRhLmlzX21vcmVfZGF0YSkge1xuICAgICAgICAkc2NvcGUuZ2V0U291bmRGZWVkKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIFxuICAkc2NvcGUuZ2V0UmVkZGl0RmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgaWYobG9jYWxTdG9yYWdlLnJlZGRpdFRvZ2dsZSl7XG4gICAgICBSZWRkaXRGYWN0b3J5LmdldFJlZGRpdEZlZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YS5kYXRhKSl7XG4gICAgICAgICAgdmFyIGl0ZW1zID0gYnVpbGRGZWVkKGRhdGEuZGF0YSwgJ3JlZGRpdCcpO1xuICAgICAgICAgICRzY29wZS5mZWVkLnB1c2guYXBwbHkoJHNjb3BlLmZlZWQsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS50b2dnbGUgPSBmdW5jdGlvbiggdHlwZSApIHtcbiAgICB2YXIgYmVlbkNhbGxlZCA9IGZhbHNlO1xuXG4gICAgaWYodHlwZSA9PT0gJ3JlZGRpdCcgJiYgUmVkZGl0RmFjdG9yeS5yZWRkaXRUb2dnbGUgPT09IGZhbHNlKXtcbiAgICAgIFJlZGRpdEZhY3RvcnkucmVkZGl0VG9nZ2xlID0gdHJ1ZTtcbiAgICB9XG4gICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5mZWVkLCBmdW5jdGlvbiAoIHBvc3QgKSB7XG4gICAgICBpZihwb3N0LnR5cGUgPT09IHR5cGUpIHtcbiAgICAgICAgYmVlbkNhbGxlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoYmVlbkNhbGxlZCA9PT0gdHJ1ZSkgeyAgXG4gICAgICBQb3N0VHlwZVt0eXBlXSA9ICFQb3N0VHlwZVt0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlc2hUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdCcpO1xuICAgICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgICAgY2FzZSAndHdpdHRlcic6XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FjdGl2YXRlJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaW5zdGFncmFtJzpcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvaWdBdXRoJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc291bmRjbG91ZCc6XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3NvdW5kJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVkZGl0JzpcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVkZGl0VG9nZ2xlID0gdHJ1ZTtcbiAgICAgICAgICAkc2NvcGUuZ2V0UmVkZGl0RmVlZCgpO1xuICAgICAgICAgIGJyZWFrOyAgICAgICAgXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5yZWZyZXNoRmVlZCA9IGZ1bmN0aW9uICggKSB7XG4gICAgd2luZG93Lmhpc3RvcnkuZ28oMCk7XG4gIH07XG5cbiAgJHNjb3BlLnBhbmVsVG9nZ2xlID0gZnVuY3Rpb24oKXtcbiAgICBQYW5lbEZhY3RvcnkuY2hlY2tlZCA9ICFQYW5lbEZhY3RvcnkuY2hlY2tlZDtcbiAgfTtcblxuICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF1dGhUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdCcpO1xuICAgIFVzZXJzRmFjdG9yeS5sb2dvdXQoe1wiYXRcIjogYXV0aFRva2VufSlcbiAgICAudGhlbihmdW5jdGlvbiAoIHJlcyApIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJ2hvbWUnKTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbiAoIGVycm9yICkge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH0pO1xuICB9O1xuIH1dKTtcbiAgXG4iLCJhcHAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdVc2Vyc0ZhY3RvcnknLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2Vyc0ZhY3RvcnksICRsb2NhdGlvbiwgJHdpbmRvdykge1xuXG4gICRzY29wZS5nZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJHdpbmRvdy5pbm5lckhlaWdodDtcbiAgfTtcblxuICAkc2NvcGUuJHdhdGNoKCRzY29wZS5nZXRIZWlnaHQsIGZ1bmN0aW9uKGN1cnJlbnQsIHByZXZpb3VzKSB7XG4gICAgJHNjb3BlLndpbmRvd0hlaWdodCA9IGN1cnJlbnQ7XG4gIH0pO1xuXG4gICRzY29wZS52ZXJpZmllciA9e1xuICAgIGVycm9yeiA6ICcnXG4gIH07XG5cbiAgJHNjb3BlLmxvZ0luID0gZnVuY3Rpb24oIHVzZXJuYW1lLCBwYXNzd29yZCApIHtcbiAgICB2YXIgdXNlciA9IHsndXNlcm5hbWUnOiB1c2VybmFtZSwgJ3Bhc3N3b3JkJzogcGFzc3dvcmR9O1xuICAgIFVzZXJzRmFjdG9yeS5sb2dpbih1c2VyKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYocmVzLmRhdGEgPT09ICdJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQuJykge1xuICAgICAgICBjb25zb2xlLmxvZygnSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkJyk7XG4gICAgICAgICRzY29wZS52ZXJpZmllci5lcnJvcnogPSBcIkluY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZCFcIjtcbiAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuYXV0aF90b2tlbikge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9nZ2VkIGluLicsIHJlcy5kYXRhKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F0JywgcmVzLmRhdGEuYXV0aF90b2tlbik7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCdmZWVkJyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICB0aHJvdyhlcnIpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5zaWduVXAgPSBmdW5jdGlvbiggdXNlcm5hbWUsIHBhc3N3b3JkICkge1xuICAgIHZhciB1c2VyID0geyd1c2VybmFtZSc6IHVzZXJuYW1lLCAncGFzc3dvcmQnOiBwYXNzd29yZH07XG4gICAgVXNlcnNGYWN0b3J5LnNpZ251cCh1c2VyKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYocmVzLmRhdGEgPT09ICdVc2VyIGFscmVhZHkgZXhpc3RzLicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgYWxyZWFkeSBleGlzdHMuJyk7XG4gICAgICAgICRzY29wZS52ZXJpZmllci5lcnJvcnogPSBcIkluY29ycmVjdCB1c2VybmFtZSBvciBwYXNzd29yZCFcIjtcbiAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGFkZGVkLicsIHJlcy5kYXRhKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F0JywgcmVzLmRhdGEuYXV0aF90b2tlbik7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCdmZWVkJyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICB0aHJvdyhlcnIpO1xuICAgIH0pO1xuICB9O1xuXG59XSk7XG4iLCJhcHAuY29udHJvbGxlcignU2xpZGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywnU2xpZGVyRmFjdG9yeScsIGZ1bmN0aW9uICgkc2NvcGUsIFNsaWRlckZhY3RvcnkpIHtcbiAgJHNjb3BlLnN0YXRzID0ge31cblxuICBTbGlkZXJGYWN0b3J5LmdldElnU3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpeyBcbiAgICAkc2NvcGUuc3RhdHNbJ2luc3RhZ3JhbSddID0ge1xuICAgICAgJ2ZvbGxvd2VycycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dlZF9ieSddLFxuICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2NvdW50cyddWydmb2xsb3dzJ11cbiAgICB9O1xuICB9KTtcblxuICBTbGlkZXJGYWN0b3J5LmdldFNvdW5kY2xvdWRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7IFxuICAgICRzY29wZS5zdGF0c1snc291bmRjbG91ZCddID0ge1xuICAgICAgJ2ZvbGxvd2VycycgOiByWydkYXRhJ11bJ2ZvbGxvd2Vyc19jb3VudCddLFxuICAgICAgJ2ZvbGxvd2luZycgOiByWydkYXRhJ11bJ2ZvbGxvd2luZ3NfY291bnQnXVxuICAgIH07XG4gIH0pO1xuXG4gIFNsaWRlckZhY3RvcnkuZ2V0VHdpdHRlclN0YXRzKCkudGhlbihmdW5jdGlvbihyKXsgXG4gICAgJHNjb3BlLnN0YXRzWyd0d2l0dGVyJ10gPSB7XG4gICAgICAnZm9sbG93ZXJzJyA6IHJbJ2ZvbGxvd2VycyddWydkYXRhJ11bJ2lkcyddLmxlbmd0aCxcbiAgICAgICdmb2xsb3dpbmcnIDogclsnZm9sbG93aW5nJ11bJ2RhdGEnXVsnaWRzJ10ubGVuZ3RoXG4gICAgfTtcbiAgfSk7XG5cbiAgU2xpZGVyRmFjdG9yeS5nZXRGb2xsb3dTdGF0cygpXG4gICAgLnRoZW4oZnVuY3Rpb24gKGQpIHsgJHNjb3BlLnN0YXRzPWQ7IH0pO1xufV0pOyIsImFwcC5maWx0ZXIoJ3R5cGVGaWx0ZXInLCBbJ1Bvc3RUeXBlJywgZnVuY3Rpb24gKFBvc3RUeXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoIGlucHV0ICkge1xuICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICBhbmd1bGFyLmZvckVhY2goaW5wdXQsIGZ1bmN0aW9uICggcG9zdCApIHtcbiAgICAgIGlmICggUG9zdFR5cGVbcG9zdC50eXBlXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHBvc3QudHlwZSA9PT0gJ2luc3RhZ3JhbScpIHtcbiAgICAgICAgICB3aW5kb3cuaW5zdGdybS5FbWJlZHMucHJvY2VzcygpO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dC5wdXNoKHBvc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG59XSk7IiwiYXBwLmRpcmVjdGl2ZSgncG9zZWlkb24nLCBbJ1NsaWRlckZhY3RvcnknLCckd2luZG93JywgJyR0aW1lb3V0JyxcbiAgZnVuY3Rpb24gKFNsaWRlckZhY3RvcnksICR3aW5kb3csICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgfSxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGUsIGF0dHJzKSB7XG4gICAgICAgIHZhciBkYXRhc2V0ID0gW107XG4gICAgICAgIHZhciBkYXRhc2V0MiA9IFtdO1xuICAgICAgICB2YXIgZGF0YXNldDMgPSBbXTtcbiAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdChlbGVbMF0pXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAuc3R5bGUoeyd3aWR0aCc6ICcxMDAlJywgJ2hlaWdodCc6ICcxMDAlJ30pO1xuICAgICAgICB2YXIgY29sb3JPYmogPSB7XG4gICAgICAgICAgJ3NvdW5kY2xvdWQnOiBbJyNGRjU1MDAnLCAwXSxcbiAgICAgICAgICAndHdpdHRlcic6IFsnIzU0YWFlYycsIDBdLFxuICAgICAgICAgICdpbnN0YWdyYW0nOiBbJyMzMjVDODYnLCAwXVxuICAgICAgICB9O1xuICAgICAgICBTbGlkZXJGYWN0b3J5LmdldEZvbGxvd1N0YXRzKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIHZhciB0b3RzRm9sbG93ZXJzID0gMDsgXG4gICAgICAgICAgICB2YXIgdG90c0ZvbGxvd2luZyA9IDA7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzcCwgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgaWYgKGNvbG9yT2JqW2kubWVkaWFdKSB7IGNvbG9yT2JqW2kubWVkaWFdWzFdKys7IH1cbiAgICAgICAgICAgICAgaWYgKGkuY291bnRzKSB7XG4gICAgICAgICAgICAgICAgdG90c0ZvbGxvd2luZyArPSBpLmNvdW50cy5mb2xsb3dpbmc7XG4gICAgICAgICAgICAgICAgdG90c0ZvbGxvd2VycyArPSBpLmNvdW50cy5mb2xsb3dlcnM7XG4gICAgICAgICAgICAgICAgZGF0YXNldC5wdXNoKHsgdHlwZTogaS5tZWRpYSwgZm9sbG93ZXJzIDogaS5jb3VudHMuZm9sbG93ZXJzIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFzZXQyLnB1c2goeyB0eXBlOiBpLm1lZGlhLCBmb2xsb3dpbmcgOiBpLmNvdW50cy5mb2xsb3dpbmcgfSk7XG4gICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRhdGFzZXQzLnB1c2goe3R5cGU6ICdUb3RhbCBGb2xsb3dlcnMnLCBjb3VudCA6IHRvdHNGb2xsb3dlcnN9KTtcbiAgICAgICAgICAgIGRhdGFzZXQzLnB1c2goe3R5cGU6ICdUb3RhbCBGb2xsb3dpbmcnLCBjb3VudCA6IHRvdHNGb2xsb3dpbmd9KTsgICAgICAgICBcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbnYuYWRkR3JhcGgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgY2hhcnQgPSBudi5tb2RlbHMucGllQ2hhcnQoKVxuICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlOyB9KVxuICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5mb2xsb3dlcnM7IH0pXG4gICAgICAgICAgICAgICAgICAuY29sb3IoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGNvbG9yT2JqW2QudHlwZV1bMF07IH0pXG4gICAgICAgICAgICAgICAgICAuc2hvd0xlZ2VuZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgLnNob3dMYWJlbHMoZmFsc2UpICAgICAvL0Rpc3BsYXkgcGllIGxhYmVsc1xuICAgICAgICAgICAgICAgICAgLmxhYmVsVGhyZXNob2xkKDAuMDUpICAvL0NvbmZpZ3VyZSB0aGUgbWluaW11bSBzbGljZSBzaXplIGZvciBsYWJlbHMgdG8gc2hvdyB1cFxuICAgICAgICAgICAgICAgICAgLmxhYmVsVHlwZShcInBlcmNlbnRcIikgLy9Db25maWd1cmUgd2hhdCB0eXBlIG9mIGRhdGEgdG8gc2hvdyBpbiB0aGUgbGFiZWwuIENhbiBiZSBcImtleVwiLCBcInZhbHVlXCIgb3IgXCJwZXJjZW50XCJcbiAgICAgICAgICAgICAgICAgIC5kb251dCh0cnVlKSAgICAgICAgICAvL1R1cm4gb24gRG9udXQgbW9kZS4gTWFrZXMgcGllIGNoYXJ0IGxvb2sgdGFzdHkhXG4gICAgICAgICAgICAgICAgICAuZG9udXRSYXRpbygwLjM1KTsgICAgIC8vQ29uZmlndXJlIGhvdyBiaWcgeW91IHdhbnQgdGhlIGRvbnV0IGhvbGUgc2l6ZSB0byBiZS5cblxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiNwaWUgc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhc2V0KVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDM1MClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNoYXJ0LnZhbHVlRm9ybWF0KGQzLmZvcm1hdCgnZCcpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBudi5hZGRHcmFwaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGNoYXJ0MiA9IG52Lm1vZGVscy5waWVDaGFydCgpXG4gICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZTsgfSlcbiAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5mb2xsb3dpbmc7IH0pXG4gICAgICAgICAgICAgICAgIC5jb2xvcihmdW5jdGlvbihkKXsgcmV0dXJuIGNvbG9yT2JqW2QudHlwZV1bMF07IH0pXG4gICAgICAgICAgICAgICAgIC5zaG93TGVnZW5kKHRydWUpXG4gICAgICAgICAgICAgICAgIC5zaG93TGFiZWxzKGZhbHNlKSAgICBcbiAgICAgICAgICAgICAgICAgLmxhYmVsVGhyZXNob2xkKDAuMDUpICBcbiAgICAgICAgICAgICAgICAgLmxhYmVsVHlwZShcInBlcmNlbnRcIikgXG4gICAgICAgICAgICAgICAgIC5kb251dCh0cnVlKSAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgLmRvbnV0UmF0aW8oMC4zNSk7ICAgIFxuXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjcGllMiBzdmdcIilcbiAgICAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YXNldDIpXG4gICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigzNTApXG4gICAgICAgICAgICAgICAgICAgLmNhbGwoY2hhcnQyKTtcbiAgICAgICAgICAgICAgY2hhcnQyLnZhbHVlRm9ybWF0KGQzLmZvcm1hdCgnZCcpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0MjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbnYuYWRkR3JhcGgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBjaGFydDMgPSBudi5tb2RlbHMucGllQ2hhcnQoKVxuICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGU7IH0pXG4gICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY291bnQ7IH0pXG4gICAgICAgICAgICAgICAgIC8vIC5jb2xvcihmdW5jdGlvbihkKXsgcmV0dXJuIGNvbG9yT2JqW2QudHlwZV1bMF07IH0pXG4gICAgICAgICAgICAgICAgIC5zaG93TGVnZW5kKHRydWUpXG4gICAgICAgICAgICAgICAgIC5zaG93TGFiZWxzKGZhbHNlKSAgICBcbiAgICAgICAgICAgICAgICAgLmxhYmVsVGhyZXNob2xkKDAuMDUpICBcbiAgICAgICAgICAgICAgICAgLmxhYmVsVHlwZShcInBlcmNlbnRcIikgXG4gICAgICAgICAgICAgICAgIC5kb251dCh0cnVlKSAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgLmRvbnV0UmF0aW8oMC4zNSk7ICAgIFxuXG4gICAgICAgICAgICAgIGQzLnNlbGVjdChcIiNwaWUzIHN2Z1wiKVxuICAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YXNldDMpXG4gICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzUwKVxuICAgICAgICAgICAgICAgICAuY2FsbChjaGFydDMpO1xuICAgICAgICAgICAgICBjaGFydDMudmFsdWVGb3JtYXQoZDMuZm9ybWF0KCdkJykpO1xuICAgICAgICAgICAgICByZXR1cm4gY2hhcnQzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGltZ3MgPSBzdmcuc2VsZWN0QWxsKFwiaW1hZ2VcIikuZGF0YShbMF0pO1xuICAgICAgICAgICAgICAgIGltZ3MuZW50ZXIoKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoXCJzdmc6aW1hZ2VcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInhsaW5rOmhyZWZcIiwgXCIuLi9zdGF0aWMvdmlld3MvT05FLnBuZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCBcIjBcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgXCIwXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAnMTAwJScpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgJzE1MCcpO1xuXG4gICAgICAgIHNjb3BlLnJlbmRlciA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
